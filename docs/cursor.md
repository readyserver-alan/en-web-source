# Cursor AI Context Guide

> **Purpose**: This document provides AI assistants (Cursor, Claude, etc.) with comprehensive context about the ReadyServer static site project structure, conventions, and development practices.

---

## Table of Contents

1. [Project Overview](#1-project-overview)
2. [Directory Structure](#2-directory-structure)
3. [Technology Stack](#3-technology-stack)
4. [Build System](#4-build-system)
5. [Templating Conventions](#5-templating-conventions)
6. [Analytics & Tracking System](#6-analytics--tracking-system)
7. [Styling Guidelines](#7-styling-guidelines)
8. [Development Workflow](#8-development-workflow)
9. [Common Tasks](#9-common-tasks)
10. [Important Files Reference](#10-important-files-reference)

---

## 1. Project Overview

**ReadyServer Singapore** is a high-performance static marketing website for VPS and dedicated server hosting services. The site is built with:

- **Jinja2** for HTML templating (Python-based)
- **Alpine.js** for lightweight client-side interactivity
- **Tailwind CSS** for utility-first styling
- **Google Tag Manager (GTM)** for analytics and conversion tracking

**Production URL**: https://readyserver.sg  
**Hosting**: Cloudflare Pages  
**GTM Container ID**: `GTM-P5CRWLDZ`

### Core Business Goal

The primary conversion metric is **Mobile App Downloads** tracked via `store_outbound_click` events when users click App Store or Play Store badges.

---

## 2. Directory Structure

```
ReadyServer_HTMX/
├── src/                          # Source files
│   ├── templates/                # Jinja2 HTML templates
│   │   ├── base.html             # Base layout with GTM, meta tags, scripts
│   │   ├── components/           # Reusable UI components
│   │   │   ├── header.html       # Site navigation
│   │   │   ├── footer.html       # Site footer
│   │   │   ├── accordion.html    # FAQ accordion (Alpine.js)
│   │   │   ├── app-store-badges.html  # App Store/Play Store buttons
│   │   │   ├── button.html       # Button variants
│   │   │   └── ...
│   │   ├── sections/             # Page sections (reusable blocks)
│   │   │   ├── hero-dramatic.html
│   │   │   ├── features.html
│   │   │   ├── app-showcase.html
│   │   │   ├── faq.html
│   │   │   ├── cta.html
│   │   │   └── ...
│   │   └── pages/                # Full page templates
│   │       ├── home.html
│   │       ├── vps-hosting.html
│   │       ├── windows-vps.html
│   │       ├── dedicated-servers.html
│   │       ├── download-mobile-app.html
│   │       ├── contact.html
│   │       ├── blog/             # Blog templates
│   │       │   ├── index.html    # Blog listing
│   │       │   └── post.html     # Individual post
│   │       └── legal/            # Legal pages
│   │           ├── privacy-policy.html
│   │           ├── terms-of-service.html
│   │           └── sla.html
│   ├── content/                  # Content files
│   │   └── blog/                 # Markdown blog posts (*.md)
│   ├── data/                     # Site data (JSON/YAML)
│   │   └── site.json             # Site configuration
│   └── static/                   # Static assets
│       ├── css/
│       │   └── globals.css       # Tailwind input CSS
│       ├── js/
│       │   ├── app.js            # Alpine.js initialization
│       │   ├── analytics.js      # GTM/GA4 tracking system
│       │   ├── alpine.min.js     # Alpine.js core (self-hosted)
│       │   └── alpine-collapse.min.js  # Alpine collapse plugin
│       ├── images/               # Image assets
│       │   ├── logo/
│       │   ├── app/
│       │   ├── blog/
│       │   ├── og/               # Open Graph images
│       │   └── ...
│       └── gtm/                  # GTM container export
│           └── gtm-container-export.json
├── dist/                         # Build output (deployed to Cloudflare)
├── docs/                         # Documentation
│   ├── cursor.md                 # This file - AI context guide
│   └── gtm-tracking-plan.md      # Analytics implementation spec
├── scripts/                      # Build utilities
│   └── html_formatter.py         # Blog HTML styling
├── build.py                      # Main build script
├── package.json                  # Node.js dependencies
├── requirements.txt              # Python dependencies
├── tailwind.config.js            # Tailwind configuration
├── postcss.config.js             # PostCSS configuration
├── _headers                      # Cloudflare security headers
└── _redirects                    # Cloudflare URL redirects
```

### Key Conventions

1. **Templates follow atomic design**: `components/` → `sections/` → `pages/`
2. **Blog posts are Markdown** with YAML frontmatter in `src/content/blog/`
3. **Static assets** go in `src/static/` and are copied to `dist/` during build
4. **Never edit files in `dist/`** - they are generated by the build

---

## 3. Technology Stack

### Backend / Build

| Technology | Version | Purpose |
|------------|---------|---------|
| Python | 3.11+ | Build script, templating |
| Jinja2 | 3.1+ | HTML templating engine |
| Markdown | 3.5+ | Blog post processing |
| python-frontmatter | 1.0+ | YAML frontmatter parsing |
| PyYAML | 6.0+ | Data file loading |

### Frontend

| Technology | Version | Purpose |
|------------|---------|---------|
| Alpine.js | 3.14.8 | Lightweight reactivity (self-hosted) |
| Tailwind CSS | 3.4+ | Utility-first CSS framework |
| Inter | - | Primary typeface (Google Fonts) |

### Analytics

| Technology | Purpose |
|------------|---------|
| Google Tag Manager | Tag management, event routing |
| Google Analytics 4 | Analytics and reporting |
| ContentSquare | Session replay, heatmaps |

### Hosting

| Service | Purpose |
|---------|---------|
| Cloudflare Pages | Static site hosting |
| Cloudflare CDN | Global edge caching |

---

## 4. Build System

### Build Commands

```bash
# Full production build (runs on Cloudflare)
npm run build

# Local development build
npm run build:local

# Development mode with hot reload
npm run dev

# Build CSS only
npm run build:css

# Clean dist folder
npm run clean
```

### Build Process (`build.py`)

1. **Clean** - Remove existing `dist/` folder
2. **Copy Static** - Copy `src/static/` to `dist/`
3. **Load Data** - Parse JSON/YAML from `src/data/`
4. **Process Blog** - Convert Markdown to HTML with frontmatter
5. **Render Pages** - Generate HTML from Jinja2 templates
6. **Generate Sitemap** - Create `sitemap.xml`
7. **Generate robots.txt** - Create robots file
8. **Build CSS** - Tailwind compilation (via npm)

### Site Configuration

Global site config is in `build.py`:

```python
SITE_CONFIG = {
    "title": "Ready Server",
    "tagline": "Singapore's #1 VPS & Dedicated Hosting",
    "url": "https://readyserver.sg",
    "locale": "en-SG",
    "gtm_id": "GTM-P5CRWLDZ",
}
```

---

## 5. Templating Conventions

### Base Template (`base.html`)

All pages extend `base.html` which provides:

- HTML5 doctype and lang attribute
- SEO meta tags (title, description, canonical)
- Open Graph / Twitter Card meta
- GTM script (deferred via `requestIdleCallback`)
- Theme initialization (dark mode)
- Header and Footer includes
- Script loading (Alpine.js, analytics)

### Page Template Pattern

```jinja2
{% extends 'base.html' %}

{% block title %}Page Title - {{ site.title }}{% endblock %}
{% block description %}Page description for SEO{% endblock %}
{% block og_image %}/og/page-name.svg{% endblock %}
{% block canonical %}/page-slug{% endblock %}

{% block content %}
<section class="py-20">
    <!-- Page content -->
</section>
{% endblock %}
```

### Including Components

```jinja2
{# Include a component #}
{% include 'components/header.html' %}

{# Include a section #}
{% include 'sections/hero-dramatic.html' %}

{# Include with context #}
{% include 'components/app-store-badges.html' with context %}
```

### Jinja2 Filters Available

| Filter | Usage | Description |
|--------|-------|-------------|
| `date` | `{{ post.date\|date('%B %d, %Y') }}` | Format datetime |
| `truncate_words` | `{{ text\|truncate_words(30) }}` | Truncate to N words |
| `slugify` | `{{ title\|slugify }}` | Convert to URL slug |

### Global Variables

| Variable | Description |
|----------|-------------|
| `site` | Site configuration object |
| `now` | Current datetime |
| `year` | Current year (for copyright) |

---

## 6. Analytics & Tracking System

### Overview

The analytics system is documented in detail in `docs/gtm-tracking-plan.md`. Key points:

**Primary KPI**: `store_outbound_click` (App Store / Play Store clicks)

### Event Taxonomy

| Event | Purpose | Trigger |
|-------|---------|---------|
| `page_view` | Page load tracking | Every page load |
| `store_outbound_click` | **PRIMARY CONVERSION** | App Store/Play Store link clicks |
| `cta_click` | Internal CTA clicks | Links to internal pages |
| `view_section` | Section visibility | IntersectionObserver (35% threshold) |
| `faq_open` | FAQ accordion expand | Accordion click |
| `outbound_link_click` | External link clicks | Non-store external links |
| `scroll_depth` | Scroll milestones | 25%, 50%, 75%, 100% |
| `time_on_page` | Time engagement | 30s, 60s, 120s, 300s |

### Data Attributes for Tracking

```html
<!-- Store link (conversion) -->
<a href="https://apps.apple.com/..."
   data-gtm-id="home.hero.appstore"
   data-gtm-placement="hero"
   data-gtm-section="home.hero"
   data-gtm-destination="app_store">

<!-- Internal CTA -->
<a href="/download-mobile-app"
   data-gtm-id="nav.desktop.download_app"
   data-gtm-placement="nav"
   data-gtm-section="nav">

<!-- Section visibility tracking -->
<section data-track-section="home.features"
         data-section-label="Features Section">

<!-- FAQ accordion -->
<button data-gtm-id="home.faq.1"
        data-gtm-faq-label="getting_started">
```

### Event Precedence Rules (CRITICAL)

The analytics system follows strict precedence to prevent double-firing:

1. **Store links** → Fire ONLY `store_outbound_click`, then STOP
2. **Internal links** → Fire ONLY `cta_click`, then STOP
3. **External links** → Fire ONLY `outbound_link_click`, then STOP
4. **FAQ toggles** → Fire ONLY `faq_open`, then STOP

### Canonical Section Keys

Always use these exact keys for consistency:

| Section Key | Page | Description |
|-------------|------|-------------|
| `home.hero` | `/` | Hero section |
| `home.features` | `/` | Features section |
| `home.app_showcase` | `/` | App showcase |
| `home.faq` | `/` | FAQ section |
| `home.cta` | `/` | Final CTA |
| `download.hero` | `/download-mobile-app` | Hero section |
| `download.benefits` | `/download-mobile-app` | Benefits section |
| `download.comparison` | `/download-mobile-app` | Comparison table |
| `download.faq` | `/download-mobile-app` | FAQ section |
| `download.cta` | `/download-mobile-app` | Final CTA |

### Analytics File Location

- **Client-side tracking**: `src/static/js/analytics.js`
- **GTM container export**: `src/static/gtm/gtm-container-export.json`
- **Tracking documentation**: `docs/gtm-tracking-plan.md`

---

## 7. Styling Guidelines

### Tailwind CSS

The project uses Tailwind CSS with custom configuration in `tailwind.config.js`.

**Input file**: `src/static/css/globals.css`  
**Output file**: `dist/css/styles.css`

### CSS Variables (Theme)

Colors are defined via CSS custom properties for dark mode support:

```css
:root {
  --background: 0 0% 100%;
  --foreground: 222.2 84% 4.9%;
  --primary: 217 91% 60%;
  /* ... */
}

.dark {
  --background: 222.2 84% 4.9%;
  --foreground: 210 40% 98%;
  /* ... */
}
```

### Common Utility Classes

```html
<!-- Container -->
<div class="container mx-auto px-4">

<!-- Section spacing -->
<section class="py-20 md:py-32">

<!-- Card styling -->
<div class="bg-card rounded-2xl border p-6">

<!-- Primary button -->
<a class="bg-primary text-primary-foreground px-6 py-3 rounded-lg">

<!-- Gradient text -->
<span class="bg-gradient-to-r from-primary to-blue-400 bg-clip-text text-transparent">
```

### Animations

Custom animations are defined in `tailwind.config.js`:

- `animate-fade-up` - Fade in from below
- `animate-fade-in` - Simple fade in
- `animate-slide-in-left` - Slide from left
- `animate-slide-in-right` - Slide from right
- `animate-float` - Floating effect
- `animate-pulse-glow` - Glowing pulse

---

## 8. Development Workflow

### Local Development

```bash
# 1. Install dependencies
npm install
pip install -r requirements.txt

# 2. Start development server
npm run dev

# 3. Open browser
# http://localhost:8000
```

### Making Changes

1. **Edit templates** in `src/templates/`
2. **Edit styles** in `src/static/css/globals.css`
3. **Edit JavaScript** in `src/static/js/`
4. **Add blog posts** in `src/content/blog/` as Markdown

The dev server will rebuild automatically on changes.

### Testing Analytics

1. Open GTM Preview mode
2. Navigate to the page
3. Verify events fire correctly
4. Check no double-firing occurs
5. Verify `event_id` is present on click events

### Deployment

Push to the main branch triggers automatic deployment via Cloudflare Pages.

```bash
git add .
git commit -m "feat: description of changes"
git push origin main
```

---

## 9. Common Tasks

### Adding a New Page

1. Create template in `src/templates/pages/new-page.html`
2. Add page definition in `build.py` under `build_pages()`:

```python
pages = [
    # ...existing pages...
    ("pages/new-page.html", "new-page/index.html", {}),
]
```

3. Add to sitemap in `build_sitemap()` if needed
4. Add navigation link in `header.html` and/or `footer.html`

### Adding a Blog Post

1. Create Markdown file in `src/content/blog/post-slug.md`
2. Add frontmatter:

```yaml
---
title: "Post Title"
slug: "post-slug"
description: "SEO description"
date: 2025-01-15
author: "Ready Server Team"
category: "Product"
featured_image: "/images/blog/post-image.webp"
published: true
---

Post content in Markdown...
```

### Adding Analytics Tracking

1. Add data attributes to HTML element:

```html
<a href="/target"
   data-gtm-id="section.element.action"
   data-gtm-placement="hero|nav|mid|footer"
   data-gtm-section="canonical.section.key">
```

2. For store links, add `data-gtm-destination="app_store|play_store"`

3. For section tracking, add to the section element:

```html
<section data-track-section="page.section_name">
```

### Modifying the Header/Footer

- **Header**: `src/templates/components/header.html`
- **Footer**: `src/templates/components/footer.html`

Both are included in `base.html` and appear on all pages.

### Updating Tailwind Configuration

Edit `tailwind.config.js` and rebuild CSS:

```bash
npm run build:css
```

---

## 10. Important Files Reference

### Core Files

| File | Purpose |
|------|---------|
| `build.py` | Main build script |
| `src/templates/base.html` | Base HTML template |
| `src/static/js/analytics.js` | Analytics tracking system |
| `tailwind.config.js` | Tailwind CSS configuration |
| `package.json` | Node.js scripts and dependencies |
| `requirements.txt` | Python dependencies |

### Configuration Files

| File | Purpose |
|------|---------|
| `_headers` | Cloudflare security headers |
| `_redirects` | Cloudflare URL redirects |
| `postcss.config.js` | PostCSS plugins |

### Documentation

| File | Purpose |
|------|---------|
| `docs/cursor.md` | This AI context guide |
| `docs/gtm-tracking-plan.md` | Analytics implementation spec |
| `README.md` | Project overview |

### Key Templates

| Template | Purpose |
|----------|---------|
| `pages/home.html` | Homepage |
| `pages/download-mobile-app.html` | App download landing page |
| `pages/vps-hosting.html` | VPS product page |
| `components/app-store-badges.html` | Store download buttons |
| `sections/hero-dramatic.html` | Hero section component |

---

## Quick Reference Card

```
# Build Commands
npm run dev          # Development with hot reload
npm run build        # Production build
npm run build:css    # Rebuild CSS only

# Key Directories
src/templates/       # Jinja2 templates
src/content/blog/    # Markdown blog posts
src/static/          # CSS, JS, images
dist/                # Build output (don't edit!)

# Analytics Events
store_outbound_click # PRIMARY - App store clicks
cta_click            # Internal navigation
view_section         # Section visibility
faq_open             # FAQ expansion

# Data Attributes
data-gtm-id          # Unique element identifier
data-gtm-placement   # UI location (hero/nav/mid/footer)
data-gtm-section     # Canonical section key
data-gtm-destination # app_store or play_store
data-track-section   # Section visibility tracking
```

---

*Last updated: December 29, 2025*


//15.163.0-es6 2025-12-22T05:08:03.836Z (4c222aceaa5e8)
var CS_CONF={"collectionEnabled":true,"projectId":475304,"status":1,"hostnames":[""],"crossDomainTracking":0,"crossDomainSingleIframeTracking":0,"consentRequired":0,"allowSubdomains":1,"visitorCookieTimeout":34164000000,"sampleRate":100,"replayRecordingRate":100,"validationRate":10,"lastTrackingDraw":null,"trackerDomain":"c.ba.contentsquare.net","recordingDomain":"r.contentsquare.net","useMalkaPipeline":1,"malkaQuotaServiceDomain":"q.ba.contentsquare.net","malkaRecordingDomain":"k.ba.contentsquare.net","ed":"l.contentsquare.net/log/web","eMerchandisingEnabled":0,"mouseMoveHeatmapEnabled":1,"jsErrorsEnabled":1,"customErrorsEnabled":0,"jsCustomErrorsEnabled":0,"apiErrorsEnabled":0,"customHashIdEnabled":0,"recordingEncryptionEnabled":0,"recordingEncryptionPublicKey":null,"recordingEncryptionPublicKeyId":0,"secureCookiesEnabled":1,"triggerSessionReplayEnabled":0,"triggerSessionReplayRegex":null,"dynamicIdRegex":null,"whitelistedAttributes":null,"replayRecordingUnmaskedUrlRegex":null,"replayRecordingUnmaskedUrlRegexRules":[],"replayRecordingMaskedUrlRegexRules":[{"operator":"contain","value":".*","ignoreQueryParams":1,"ignoreURIFragments":1,"ignoreCaseSensitivity":1,"maskMedia":1}],"replayRecordingMaskedUrlRegex":null,"anonymisationMethod":"replayRecordingMaskedUrlRegexRules","anonymizeDigits":true,"tagDeploymentMode":"CONTENTSQUARE","experimental":null,"iframesTracking":0,"textVisibilityEnabled":0,"cookielessTrackingEnabled":0,"malkaUrlEnabled":0,"malkaEtrEnabled":0,"pathComputationRules":{},"asyncSerializerEnabled":1,"pendingInactivityTimeout":5000,"accessibilityEnabled":0,"taskSchedulerOptions":{"enabled":1},"uxaDomain":"app.contentsquare.com","webviewsTrackingEnabled":0,"staticResourceManagerDomain":"srm.ba.contentsquare.net","useStaticResourceManager":1,"performanceTimingOptions":{"withResource":false,"withNavigation":false},"replayConsentRequiredForSession":0,"displayAdOptions":null,"implementations":[{"template":{"name":"ArtificialPageview","args":{}},"triggers":[{"name":"HistoryChange","args":{"listeners":"popstate, pushState, replaceState","useDebounce":"no","window":400}}]}],"eventsApiEnabled":0,"dynamicConfDomain":"t.contentsquare.net/settings","collectHierarchy":0,"collectSubmit":0,"collectTargetText":1,"tagVerificationDomain":"tcvsapi.contentsquare.com","tagVerificationEnabled":true,"startMode":1,"quotas":[{"quotaType":"ANALYTICS","value":1},{"quotaType":"RECORDING","value":0.15}],"trackingCodeVerified":true,"voc":{"siteId":null,"enabled":0}};
var CS_INTEGRATIONS_CONF = {"google-analytics-4-events":{}};
/* integration-google-analytics-4-events 2.2.3 */
(()=>{"use strict";function n(n,t){try{n()}catch(n){window._uxa=window._uxa||[],window._uxa.push(["logSnippetError",t,n]),(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&(console.log(`%cCSQ INTEGRATION ERROR: [${t}] : ${n.message}`,"color:rgb(228, 25, 45); font-weight: bold"),console.log(n))}}let t,e=1e3,o=10;function i(n,r,c,a,u,s){var l;r&&c&&(t||(t=function(n){function t(n){return"object"==typeof n&&null!==n}if(t(window.CS_INTEGRATIONS_CONF)&&t(window.CS_INTEGRATIONS_CONF[n]))return window.CS_INTEGRATIONS_CONF[n].timingSettings}(n),"object"==typeof(l=t)&&null!==l&&Object.keys(l).length&&(e=t.doOnlyWhenInterval,o=t.doOnlyWhenTimes)),void 0===u&&(u=e),void 0===s&&(s=o),--s<0?"function"==typeof a&&a():c()?r():setTimeout(function(){i(n,r,c,a,u,s)},u))}function r(n,t,e){if((e=e||window)&&t&&n){let o=!1,i=e[n];i?t():Object.defineProperty(e,n,{configurable:!0,enumerable:!0,get:function(){return i},set:function(n){i=n,o||(o=!0,t())}})}}const c=JSON.parse('{"QC":"Google Analytics 4 Events","Mz":"AN_GA4Event_","be":"GA_"}'),a=function(t){let e,o,i,r;if(n(function(){const n=t.name;e=t.version;const c=n.replace("@contentsquare/integration-","");o=c+"-"+e;let a="-contentsquare";r=new RegExp(a+"$").test(c),i=c.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),r||(a="-cap",r=new RegExp(a+"$").test(c),i=c.replace(/-cap([^-cap]*)$/,"$1"))},"Shared-Function-readPackageJSON"),r)return{snippetBuildName:o,parameterName:i,snippetVersion:e}}(JSON.parse('{"name":"@contentsquare/integration-google-analytics-4-events-contentsquare","version":"2.2.3","scripts":{"build:snippet":"npx webpack"}}')),u=a.parameterName,s=a.snippetBuildName,l=a.snippetVersion;n(function(){const t=c.QC,e=c.Mz,o=c.be;var a,f;function g(n){const t=`${e}${n}`;var i,r;!function(n,t){window._uxa=window._uxa||[],window._uxa.push(["trackDynamicVariable",{key:n,value:t}])}(t,n),i=`${o}${r=n,r&&"string"==typeof r?r.replace(/[\W_]+/g,"-"):""}`,window._uxa=window._uxa||[],window._uxa.push(["event",i]),function(n,t,e){(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&(e?"warn"===e&&console.log(`%cCSQ INTEGRATION: [${n}] : ${t}`,"color:rgb(255, 86, 2); font-weight: bold"):console.log(`%cCSQ INTEGRATION: [${n}] : ${t}`,"color: #2a9d8f; font-weight: bold"))}(s,t)}a=t,f=l,CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push(a+" - v"+f);let w={},p=!1,d=!1;const y=[];function _(n){if(!n||!n.length||n.length<2||"event"!==n[0])return;const t={action:n[1],category:n[2]&&n[2].event_category||""};if(function(n){return"detect_user"===n.action&&"Contentsquare"===n.category}(t))return;const e=t.action;-1===y.indexOf(e)&&(y.push(e),g(e))}function h(){if(p=!0,!d){const n=window.dataLayer;if(!0===n._csGA4integration)return;n.forEach(n=>{_(n)});const t=n.push;n.push=function(){t.apply(n,arguments),_(arguments[0])},n._csGA4integration=!0}}function b(){if(d=!0,!p){const n=window.gtag;window.gtag=function(){const t=Array.prototype.slice.call(arguments);n.apply(null,t),_(t)}}!async function(){if("function"==typeof window.Promise&&"function"==typeof SubtleCrypto){const n=w.sessionKey.split(".")[0],t=(await async function(n){return await async function(n){const t=await crypto.subtle.digest("SHA-256",function(n){const t=new ArrayBuffer(n.length),e=new Uint8Array(t);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return t}(n));let e=new Uint8Array(t.slice(0,8));return e=function(n){const t=new ArrayBuffer(n.byteLength+1),e=new Uint8Array(t);for(let t=1;t<e.byteLength;t++)e[t]=n[t-1];return e}(e),function(n){const t=[];return Uint8Array.from(n).forEach(function(n){let e=n.toString(16);e.length%2&&(e="0"+e),t.push(e)}),BigInt("0x"+t.join(""))}(e)}(n)}(n)).toString().replace("n","");gtag("set","user_properties",{csuid:t}),gtag("event","detect_user",{event_category:"Contentsquare",event_label:t,non_interaction:!0})}}()}!function(n){let t=!1;window._uxa=window._uxa||[],window._uxa.push(["afterPageView",function(e){t||(n(e),t=!0)}])}(function(t){n(function(){w=t,function(n,t,e){e=e||window;const o=n.split(".");if(1==o.length)r(n,t,e);else{let n=e,i=0;const c=function(){n=i>0?n[o[i-1]]:window,i++,i>=o.length?r(o[i-1],t,n):r(o[i-1],c,n)};c()}}("dataLayer",h),i(u,b,function(){return"function"==typeof gtag})},s)})},s)})();
(()=>{var id=Object.defineProperty,rd=Object.defineProperties;var nd=Object.getOwnPropertyDescriptors;var cr=Object.getOwnPropertySymbols;var Ra=Object.prototype.hasOwnProperty,Ca=Object.prototype.propertyIsEnumerable;var en=(s,r,t)=>r in s?id(s,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[r]=t,j=(s,r)=>{for(var t in r||(r={}))Ra.call(r,t)&&en(s,t,r[t]);if(cr)for(var t of cr(r))Ca.call(r,t)&&en(s,t,r[t]);return s},ct=(s,r)=>rd(s,nd(r));var sn=(s,r)=>{var t={};for(var e in s)Ra.call(s,e)&&r.indexOf(e)<0&&(t[e]=s[e]);if(s!=null&&cr)for(var e of cr(s))r.indexOf(e)<0&&Ca.call(s,e)&&(t[e]=s[e]);return t};var Re=(s,r,t)=>en(s,typeof r!="symbol"?r+"":r,t);var Q=(s,r,t)=>new Promise((e,i)=>{var n=l=>{try{c(t.next(l))}catch(h){i(h)}},o=l=>{try{c(t.throw(l))}catch(h){i(h)}},c=l=>l.done?e(l.value):Promise.resolve(l.value).then(n,o);c((t=t.apply(s,r)).next())});var ve={};ve.d=(s,r)=>{for(var t in r)ve.o(r,t)&&!ve.o(s,t)&&Object.defineProperty(s,t,{enumerable:!0,get:r[t]})};ve.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(s){if(typeof window=="object")return window}}();ve.o=(s,r)=>Object.prototype.hasOwnProperty.call(s,r);ve.r=s=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})};var wo={};ve.r(wo);ve.d(wo,{getRequestParameters:()=>sm});function xs(s,r){let t;return window.Zone&&typeof window.Zone.__symbol__=="function"&&(t=s[window.Zone.__symbol__(r)]),t!=null?t:s[r]}var gt=(()=>{let s;return function(r){r.debug="debug",r.warn="warn",r.implementation="implementation",r.error="error",r.critical="critical"}(s||(s={})),s})();function At(s){return Z(s)&&(typeof s=="number"||s instanceof Number)&&!isNaN(s)}function Os(s){return s===parseInt(s,10)}function I(s){return Z(s)&&(typeof s=="string"||s instanceof csString)}function Ar(s){return typeof s=="boolean"}function Qs(s){return typeof s=="object"}function Z(s){return typeof s!="undefined"}function vt(s){return Z(s)&&s!==null}function K(s){return typeof s=="object"&&s!==null}function od(s,r,t){return Os(s)&&s>=r&&s<=t}function Hn(s){for(let r in s)return!1;return!0}function Se(s){return typeof s=="function"}function fs(s){return s instanceof Element}function Le(s){return s instanceof Error}function Ao(s){let r=s.length;for(let t=0;t<r;t++)switch(csString.prototype.charCodeAt.call(s,t)){case 9:case 10:case 11:case 12:case 13:case 32:case 160:continue;default:return!1}return!0}var rn={[gt.debug]:0,[gt.warn]:1,[gt.implementation]:1,[gt.error]:2,[gt.critical]:3},ht={debug(...s){},warn(...s){},implementation(...s){},error(...s){},critical(...s){},isPerfLoggingActive(){return!1}};function ad(s){ht=s}var N=s=>(r,t,e)=>{let i=(t==null?void 0:t.toString())||"",n=s||`${r.constructor&&r.constructor.name}.${i}`;if(e){let o=e.value;e.value=function(...c){return ps(n,o.bind(this))(...c)}}};function ps(s,r){return function(...t){try{let e=r.apply(this,t);return Z(self.Promise)&&e instanceof self.Promise?e.then(i=>i,i=>ht.error(Le(i)?i:new Error(i),s)):e}catch(e){try{ht.error(Le(e)?e:new Error(e),s)}catch(i){}}}}function rt(s,r,t,e){var i=arguments.length,n=i<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,t):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,r,t,e);else for(var c=s.length-1;c>=0;c--)(o=s[c])&&(n=(i<3?o(n):i>3?o(r,t,n):o(r,t))||n);return i>3&&n&&Object.defineProperty(r,t,n),n}function To(s){let r=new ArrayBuffer(s.length),t=new Uint8Array(r);for(let e=0,i=s.length;e<i;e+=1)t[e]=csString.prototype.charCodeAt.call(s,e);return r}function Ia(s){let r=new Uint8Array(s),t="";for(let e=0;e<r.byteLength;e+=1)t+=csString.fromCodePoint(r[e]);return t}function Qc(s){let r=self.atob(s);return To(r)}function Bn(s){let r=csArray.from(new Uint8Array(s));return csArray.prototype.join.call(csArray.prototype.map.call(r,t=>csString.prototype.padStart.call(t.toString(16),2,"0")),"")}function Pa(s){let r=csString.prototype.indexOf.call(s,";base64,")!==-1,t=csString.prototype.indexOf.call(s,","),e=r?[csString.prototype.substring.call(s,0,t-7),csString.prototype.substring.call(s,t+1)]:[csString.prototype.substring.call(s,0,t),csString.prototype.substring.call(s,t+1)];if(!r&&/^%3Csvg/i.test(e[1]))try{e[1]=decodeURIComponent(e[1])}catch(o){ht.warn(`${o}, calling decodeURIComponent on: ${e[1]}`)}let n=r?Qc(e[1]):To(e[1]);return new Blob([n],{type:csString.prototype.replace.call(e[0],"data:","")})}var Zc=typeof performance!="undefined"&&!!performance.now,Oa=Zc?()=>performance.now():()=>csDate.now(),cd=(()=>{var s,r;return Zc?(r=(s=performance.timing)===null||s===void 0?void 0:s.navigationStart)!==null&&r!==void 0?r:Math.floor(performance.timeOrigin):0})(),bo=34164e6,k={now(){return Math.round(Oa()+cd)},elapsed(){return Oa()}};function Na(){return Math.floor(k.now()/1e3)}function tl(){return typeof self.Promise=="function"}function ld(){var s;return typeof crypto!="undefined"&&Se((s=crypto.subtle)===null||s===void 0?void 0:s.digest)}function Ma(){var s,r;return typeof((s=window.navigation)===null||s===void 0?void 0:s.addEventListener)=="function"&&typeof((r=window.navigation)===null||r===void 0?void 0:r.removeEventListener)=="function"}function jt(s,r){return csString.prototype.lastIndexOf.call(s,r,0)===0}function ii(s,r){return csString.prototype.indexOf.call(s,r,s.length-r.length)!==-1}var hd=Number.MAX_SAFE_INTEGER||9007199254740991,Ns={percentage(){return Math.floor(Math.random()*1e4)/100},boolean(s){return this.percentage()<s},integer(s=hd){return Math.floor(Math.random()*s)}},xi=typeof window=="undefined";function ud(){return typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof ve.g!="undefined"?ve.g:typeof process!="undefined"?process:Function("return this")()}var ot=ud();function Ci(s,r){let t,e,i,n,o,c=null,l=d=>{let p=k.elapsed();if(!d&&c!==null){let m=r-(p-c);if(m>=1){i=ot.csSetTimeout(l,m);return}}let y=p-n;i=null,c=null,n=null,o=s.apply(t,[y,...e])},h=function(){if(t=this,e=arguments,n){c=k.elapsed();return}return n=k.elapsed(),i=ot.csSetTimeout(l,r),o};return h.flushPending=()=>{i&&(ot.csClearTimeout(i),l(!0))},h.cancel=()=>{c=null,n=null,i&&(ot.csClearTimeout(i),i=null)},h}var Ms=(()=>{class s{static setGlobalService(t){s.globalService=t}constructor(t){this.name=t,this.values={}}reset(){this.values={}}flush(t=""){if(!s.globalService)return!1;let e=this.values,i=Object.keys(e);if(!i.length)return!1;let n=`${t===""?"":`${t}.`}${this.name}`,o=csArray.prototype.map.call(i,c=>({name:n,parameter:c,value:Math.round(e[c])}));return s.globalService.push(o),this.reset(),o.length>0}}return s.globalService=null,rt([N()],s.prototype,"flush",null),s})(),xt=(()=>{class s extends Ms{constructor(t,e=100){super(t),this.kE=e,this.values={},e&&(this.debouncedFlush=Ci(()=>this.flush(),this.kE))}count(t,e=1){Ms.globalService&&(this.values[t]=(this.values[t]||0)+e,this.debouncedFlush())}}return s})(),lr=(()=>{class s extends Ms{constructor(t,e=["max","average","total","count"]){super(t),this.collecting=e,this.values={average:0,count:0,max:0,total:0}}get average(){return this.values.average}get count(){return this.values.count}get max(){return this.values.max}get total(){return this.values.total}flush(t=""){if(this.count===0)return!1;let e=Object.keys(this.values);return csArray.prototype.forEach.call(csArray.prototype.filter.call(e,i=>!csArray.prototype.some.call(this.collecting,n=>i===n)),i=>{delete this.values[i]}),super.flush(t)}push(t){this.values.count++,this.values.total+=t,this.values.max=Math.max(this.values.max,t),this.values.average=this.values.total/this.values.count}reset(){this.values={count:0,total:0,max:0,average:0}}}return s})(),nn=(()=>{class s extends Ms{constructor(t,e=["max","average","total","count"]){super(t),this.collecting=e}flush(t=""){let e=Object.keys(this.values);return csArray.prototype.forEach.call(csArray.prototype.filter.call(e,i=>!csArray.prototype.some.call(this.collecting,n=>csString.prototype.endsWith.call(i,`.${n}`))),i=>{delete this.values[i]}),super.flush(t)}add(t,e){var i,n,o,c,l,h,d;let p=y=>this.values[`${t}.${y}`];(i=(c=this.values)[l=`${t}.count`])!==null&&i!==void 0||(c[l]=0),(n=(h=this.values)[d=`${t}.total`])!==null&&n!==void 0||(h[d]=0),this.values[`${t}.count`]++,this.values[`${t}.total`]+=e,this.values[`${t}.max`]=Math.max((o=p("max"))!==null&&o!==void 0?o:0,e),this.values[`${t}.average`]=p("total")/p("count")}}return s})(),dd=(()=>{class s extends Ms{constructor(){super(...arguments),this.values={}}set(t,e="flags"){var i,n;Ms.globalService&&((i=(n=this.values)[e])!==null&&i!==void 0||(n[e]=0),this.values[e]|=t,this.flush())}}return s})(),q={counters:{commandsFromIntegrations:new xt("commands-from-integrations"),commandsFromCSTC:new xt("commands-from-cstc"),commandsFromIframe:new xt("commands-from-iframe"),commandApplied:new xt("command-applied"),commandError:new xt("command-error"),commandMisuse:new xt("command-misuse"),CSTCSnippetUsed:new xt("cstc-snippet-used"),redactedPII:new xt("redacted-pii"),pageAnonymisation:new xt("page-anonymisation"),patchedNativeFunctions:new xt("patched-native-functions"),pureWindowState:new xt("pure-window-state"),sensitiveElements:new xt("sensitive-elements"),cspErrors:new xt("csp-errors"),networkRequests:new xt("network-requests"),webVitalsErrors:new xt("web-vitals-errors"),trackedFeatures:new xt("tracked-features"),longTasks:new lr("long-tasks"),errors:new xt("errors"),methodPerformance:new nn("perf"),transferSize:new lr("transfer-size",["max","average"]),downloadTime:new lr("download-time",["average"]),blockingTime:new lr("blocking-time"),inpContribution:new nn("inp-contribution"),tasks:new nn("tasks"),availableFeatures:new dd("available-features")},setService(s){Ms.setGlobalService(s)}},Li=(()=>{class s{constructor(){this.ia=0}get length(){return this.ia}get isEmpty(){return!this.Js}pushAll(t){for(let e=0;e<t.length;e++)this.push(t[e])}push(t){this.ia++,this.dn?this.dn=this.dn[1]=[t,void 0]:this.dn=this.Js=[t,void 0]}pop(){if(!this.Js)return null;this.ia--;let t=this.Js[0];return this.Js=this.Js[1],this.Js||(this.dn=void 0),t}forEach(t){let e=this.Js;for(;e!=null&&e.length;)t(e[0]),e=e[1]}clear(){this.ia=0,this.Js=this.dn=void 0}}return s})(),Fn=0,Ro=s=>{Fn++,csQueueMicrotask(()=>Ls(()=>{try{s()}finally{Fn--}},[_e.MicroTask,"queueMicrotask"]))},Tr=new Li,br=new Li;function Yt(s,r="high"){Tr.isEmpty&&br.isEmpty&&el(fd),r==="high"?br.push(Da(s)):Tr.push(Da(s))}function el(s,r=10){r===0?Ro(s):csQueueMicrotask(()=>el(s,r-1))}function fd(){for(;!br.isEmpty;)br.pop()();for(;!Tr.isEmpty;)Tr.pop()()}function sl(s=1){return Q(this,null,function*(){for(let r=0;r<s;r++)yield new Promise(t=>Yt(t))})}function Da(s){return function(){try{s.apply(window,arguments)}catch(r){ht.critical(r)}}}var Sr="null",rs=null,il=[],pd=()=>{var s;return xi||!!(!((s=document.body)===null||s===void 0)&&s.getAttribute("data-cs-tag-extension"))};!xi&&pd()&&(window._uxa?_uxa.push(["debugEvents",!0]):window._uxa=[["debugEvents",!0]],rs=new BroadcastChannel("cs-tag"),document.addEventListener("cs.tracking.recordingEvent",s=>{$n({type:"UXA_EVENT",event:s.detail})}),rs.addEventListener("message",s=>{if(s.data.type==="CONNECT"){if(s.data.sessionId===Sr)return;Sr=s.data.sessionId,csArray.prototype.forEach.call(il,r=>r()),rs==null||rs.postMessage({type:"CONNECTED",sessionId:Sr})}}));function gd(s){xi||(Sr!==null&&csSetTimeout(s),csSetTimeout(()=>csArray.prototype.push.call(il,s)))}function $n(s){rs==null||rs.postMessage(s)}function Ii(s){var r;let t=(r=s.length)!==null&&r!==void 0?r:0,e=new csArray(t);for(let i=0;i<t;i+=1)e[i]=s[i];return e}function xe(s,r){let t=s.length,e=new csArray(t);for(let i=0;i<t;i+=1)e[i]=r(s[i]);return e}function md(s,r,t){let e=[],i=0;for(let n=0;n<s.length;n+=1){let o=r(s[n]);for(let c=0;c<o.length;c++)t(o[c],i++)}return e}function Co(s,r){let t=[];return md(s,r,e=>csArray.prototype.push.call(t,e)),t}function J(s,r){if(yd(s)){let t=s.length;for(let e=0;e<t;e++)r(s[e],e)}else{let t=0,e=s.next();for(;!e.done;)r(e.value,t++),e=s.next()}}function yd(s){return s.length>=0}function ri(s,r){let t=s.length;for(let e=0;e<t;e++)if(r(s[e],e))return s[e]}function rl(s,r){let t=s.length;for(let e=0;e<t;e++)if(r(s[e],e))return!0;return!1}function nl(s,r){let t=s.length;for(let e=0;e<t;e++)if(!r(s[e],e))return!1;return!0}function Rr(s,r){let t=s.length,e=[];for(let i=0;i<t;i+=1){let n=s[i];r(n)&&csArray.prototype.push.call(e,n)}return e}function Ed(s,r,t){let e=s.length+r.length+((t==null?void 0:t.length)||0),i=new csArray(e),n=0;for(let o=0;o<s.length;o++)i[n++]=s[o];for(let o=0;o<r.length;o++)i[n++]=r[o];if(!t)return i;for(let o=0;o<t.length;o++)i[n++]=t[o];return i}function ka(s,r){for(let t=0;t<s.length;t++)csArray.prototype.push.call(r,s[t])}function gs(s){let r=s instanceof Map,t=[];return s.forEach((e,i)=>csArray.prototype.push.call(t,r?[i,e]:e)),t}function vd(s){return csArray.isArray(s)&&s.length>0}var Vi=(()=>{class s{constructor(t,e=""){this.name=t,this.format=e}}return s})(),Ce=(()=>{class s extends Vi{constructor(t){super(t,"Value: {count}"),this.count=0}increase(t=1){this.count+=t}decrease(){this.count>0&&this.count--}clear(){this.count=0}getData(){return{count:this.count}}}return s})();var xa=(()=>{class s extends Vi{constructor(t){super(t,"Living intances: {instances}<br/>Added: {added}<br/>Removed: {removed}"),this.added=0,this.removed=0}get value(){return this.added-this.removed}increase(){this.added++}decrease(){this.removed++}getData(){return{added:this.added,removed:this.removed,instances:this.added-this.removed}}}return s})(),Ie=(()=>{class s extends Vi{constructor(t){super(t,"Count: {count}<br/>Average: {average}ms<br/>Max: {max}ms<br/>Total: {total}ms"),this.total=0,this.count=0,this.max=0}get average(){return this.count?this.total/this.count:0}elapsed(t){return this.count++,this.max=Math.max(this.max,t),this.total+=t,t}measure(t){let e=k.elapsed();t(),this.count++;let i=k.elapsed()-e;return this.max=Math.max(this.max,i),this.total+=i,i}asyncMeasure(){let t=k.elapsed();return()=>{this.count++;let e=k.elapsed()-t;return this.max=Math.max(this.max,e),this.total+=e,e}}getData(){return{total:this.total,count:this.count,average:this.average,max:this.max}}}return s})(),Sd=(()=>{class s extends Vi{constructor(){super("INP","Value: {value}")}getData(){return{value:_t.tasks.eventListener.max}}}return s})(),_t={general:{category:"General",nbEvents:new Ce("Nb of Events"),pendingTasks:new Ce("Pending Tasks"),pendingEvents:new Ce("Pending Tasks"),nbOfMutationObservers:new xa("Nb of Mutation Observers"),inp:new Sd},mutations:{category:"Mutations",initialDOM:new Ie("Initial DOM"),pendingMutations:new Ce("Nb of Mutations scheduled"),serializedMutations:new Ie("Serialized Mutations"),count:new Ce("Mutation Count"),elementMutationObserved:new xa("Nb of Elements Observed by MutationObserver"),unobserveGarbageCollection:new Ie("Unobserve GC")},visibilityObserver:{category:"Visibility Observer",hiddenElements:new Ce("Nb of Hidden Elements "),nbElements:new Ce("Nb of  Elements")},tasks:{category:"Tasks",tasks:new Ce("Tasks"),errors:new Ce("Errors"),timer:new Ie("Timers"),microtask:new Ie("Microtasks"),mutationObserver:new Ie("MutationObserver"),monkeyPatch:new Ie("MonkeyPatch"),eventListener:new Ie("EventListener"),intersectionObserver:new Ie("Intersection")}};function _d(){let s=null;gd(()=>{let r=n=>Object.keys(n),t=csArray.prototype.map.call(r(_t),n=>_t[n]),e=csArray.prototype.map.call(t,n=>csArray.prototype.filter.call(csArray.prototype.map.call(r(n),o=>n[o]),o=>o instanceof Vi));$n({type:"UXA_PERFORMANCE_COUNTER_SCHEMA",event:csArray.prototype.map.call(t,(n,o)=>({category:n.category,performanceCounters:csArray.prototype.map.call(e[o],c=>({name:c.name,format:c.format}))}))}),!s&&(s=csSetInterval(()=>{Ls(()=>{let n=Co(xe(e,o=>xe(o,c=>c.getData())),o=>o);$n({type:"UXA_PERFORMANCE_COUNTER",event:n})},[_e.Timer,"performance-counter-interval"])},1e3))})}var _e=(()=>{let s;return function(r){r.Timer="timer",r.MonkeyPatch="monkeyPatch",r.MutationObserver="mutationObserver",r.EventListener="eventListener",r.IntersectionObserver="intersectionObserver",r.MicroTask="microtask"}(s||(s={})),s})(),Wt=null,wd=["click","tap","keyup","keydown","pointerup","pointerdown"];function Ls(s,r,t=null){return Q(this,null,function*(){if(Wt&&r[0]!==_e.MicroTask)return s();t&&(Wt=t),Wt||(Wt={type:r[0],elapsed:0},_t.tasks.tasks.increase());try{Wt.elapsed+=Ad(s)}catch(e){_t.tasks.errors.increase(),ht.critical(new Error(`Task error:  ${r}/${s.name}.
${e.message}
${e.stack}`,e),"TASK_ERROR")}finally{Fn<=0&&(_t.tasks[Wt.type].elapsed(Wt.elapsed),Wt.elapsed>50&&(q.counters.longTasks.push(Wt.elapsed),q.counters.blockingTime.push(Wt.elapsed-50)),q.counters.tasks.add(r[0],Wt.elapsed),csArray.prototype.includes.call(wd,r[1])&&q.counters.inpContribution.add(r[1],Wt.elapsed),Wt=null)}})}function Ad(s){let r=k.elapsed();return s(),k.elapsed()-r}var on,Td="cs-native-frame";var Xe={navigatorProperties:[{propertyName:"sendBeacon",binding:navigator}],nodeProperties:["childNodes","parentNode","nextSibling","firstChild","nodeType"],elementProperties:["shadowRoot"],elementPropertiesValues:["matches","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector"],eventProperties:["target"],imageProperties:["src"],constructors:{Date:"csDate",JSON:"csJSON",Array:"csArray",String:"csString",URL:"csURL",MutationObserver:"csMutationObserver",screen:"csScreen",RegExp:"csRegExp"}};function ol(s,r){let t=xs(window,s);return function(e,i){return t(()=>Ls(e,[r,s]),i)}}window.csSetTimeout=ol("setTimeout",_e.Timer);window.csSetInterval=ol("setInterval",_e.Timer);window.csQueueMicrotask=(on=xs(window,"queueMicrotask"))!==null&&on!==void 0?on:setTimeout;window.csClearTimeout=xs(window,"clearTimeout");window.csClearInterval=xs(window,"clearInterval");window.csFileReader=xs(window,"FileReader");(()=>{var s;let r=0;function t(i){return"cs$Symbol_"+i}function e(i){return t(i)+ ++r}e.for=t,window.csSymbol=(s=window.Symbol)!==null&&s!==void 0?s:e})();function bd(){let s=document.createElement("iframe");s.id=Td,s.setAttribute("hidden",""),s.setAttribute("title","Intentionally blank"),s.setAttribute("sandbox","allow-same-origin");let r=document.createElement("cs-native-frame-holder");if(r.setAttribute("hidden",""),document.body.appendChild(r),!!Element.prototype.attachShadow){let e=r.attachShadow({mode:"closed"});return e.innerHTML=s.outerHTML,e.firstElementChild.contentWindow}return r.innerHTML=s.outerHTML,r.firstElementChild.contentWindow}function Rd(s,r){let t,e=s;for(;e&&!(t=Object.getOwnPropertyDescriptor(e,r));)e=Object.getPrototypeOf(e);return t}function Cd(s,r,t){let e=Rd(s,r);if(!e)return function(){return this[r]};switch(t){case"get":return e.get;case"set":return e.set;case"value":return e.value}}function al(s){var r,t;Object.keys(Xe.constructors).forEach(i=>{window[Xe.constructors[i]]=s[i]instanceof Function&&s[i].prototype==null?s[i].bind(window):s[i]}),Od(s);let e=s.MutationObserver;("Prototype"in window||Pd())&&(e=(t=(r=xs(window,"MutationObserver"))!==null&&r!==void 0?r:window.WebKitMutationObserver)!==null&&t!==void 0?t:window.MutationObserver),window.csIntersectionObserver=La(window.IntersectionObserver,_e.IntersectionObserver),window.csMutationObserver=La(e,_e.MutationObserver),zs("csNode",Xe.nodeProperties,s.Node.prototype,"get"),zs("csElement",Xe.elementProperties,s.Element.prototype,"get"),zs("csElement",Xe.elementPropertiesValues,s.Element.prototype,"value",!1),zs("csHTMLImageElement",Xe.imageProperties,s.HTMLImageElement.prototype,"set"),zs("csEvent",Xe.eventProperties,s.Event.prototype,"get"),zs("csNavigator",Xe.navigatorProperties,s.navigator,"value")}function zs(s,r,t,e,i=!0){r.forEach(n=>{let o=typeof n!="string"&&"binding"in n,c=o?n.propertyName:n;(i||c in t)&&(window[`${s+c}`]=Cd(t,c,e),o&&(window[`${s+c}`]=window[`${s+c}`].bind(n.binding)))})}function Io(s,r){window.CSProtectnativeFunctionsLogs=window.CSProtectnativeFunctionsLogs||{},window.CSProtectnativeFunctionsLogs[s]=r}function Id(){try{let s=bd();return s?(window.CSPureWindow=s,al(window.CSPureWindow),!0):!1}catch(s){return Io("Warning",`failed to copy references from pure iframe: ${s.message}`),!1}}if(!Id())try{al(ot)}catch(s){Io("Critical",`failed to copy references from window: ${s.message}`)}function Pd(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function Od(s){window.csquerySelector={1:s.Element.prototype.querySelector,9:s.Document.prototype.querySelector,11:s.DocumentFragment.prototype.querySelector},window.csquerySelectorAll={1:s.Element.prototype.querySelectorAll,9:s.Document.prototype.querySelectorAll,11:s.DocumentFragment.prototype.querySelectorAll}}function La(s,r){try{let t=function(e,i){return new s((o,c)=>{Ls(()=>e(o,c),[r,s.name])},i)};return t.base=s,t}catch(t){return Io("Warning",`failed to extends ${s.name}`),s}}var Ot=(()=>{let s;return function(r){r.ELLIPSIS="\u2026";function t(o){return csString.prototype.replace.call(o,/[.*+?^${}()|[\]\\]/g,"\\$&")}function e(o){return csString.prototype.replace.call(o,/([#;&,.+*~':"!^$[\]()<=>|/%?@`{}\\ ])/g,"\\$1")}r.escapeInvalidCharacters=e;function i(o,c,l){if("replaceAll"in csString.prototype)return csString.prototype.replaceAll.call(o,c,l);let h=new csRegExp(t(c),"g");return csString.prototype.replace.call(o,h,l)}r.stringReplaceAll=i;function n(o,c,l=""){return o.length<=c?o:csString.prototype.slice.call(o,0,c-l.length)+l}r.truncate=n}(s||(s={})),s})();function zn(s){return Ot.escapeInvalidCharacters(csString.prototype.toLowerCase.call(s.localName))}function Nd(s){let r=s.getAttribute("id");return r&&Ot.escapeInvalidCharacters(r)}function pt(s){return csNodenodeType.apply(s)===1}function Cr(s){return csNodenodeType.apply(s)===3}function Md(s){return csNodenodeType.apply(s)===8}function cl(s){return pt(s)&&s.localName==="link"}function Dd(s){return pt(s)&&s.localName==="source"}function ll(s){return pt(s)&&s.localName==="a"}function Po(s){return cl(s)&&csString.prototype.indexOf.call(s.rel,"stylesheet")!==-1}function kd(s){return pt(s)&&s.localName==="img"}function xr(s){return pt(s)&&s.localName==="style"}function Lr(s){return pt(s)&&s.localName==="input"}function Oo(s){return pt(s)&&s.localName==="textarea"}function Vr(s){return pt(s)&&s.localName==="script"}function xd(s){return pt(s)&&s.localName==="button"}function ni(s){return pt(s)&&"ownerSVGElement"in s}function No(s){return pt(s)&&s.localName==="select"}function Ld(s){return pt(s)&&s.localName==="details"}function Vd(s){return pt(s)&&s.localName==="summary"}function Ud(s){return ni(s)&&s.localName==="image"}function jd(s){return ni(s)&&s.localName==="use"}function Hd(s){return ni(s)&&s.localName==="feImage"}function Bd(s){switch(csNodenodeType.apply(s)){case 9:case 11:return!0;default:return!1}}function Fd(s){switch(csNodenodeType.apply(s)){case 9:case 11:case 1:return!0;default:return!1}}function Ir(s){return csNodenodeType.apply(s)===9}function Pi(s){return Bd(s)&&"host"in s&&"mode"in s}function hl(s){return pt(s)&&!!csElementshadowRoot.apply(s)&&Pi(csElementshadowRoot.apply(s))}var $d=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"];function zd(s){return pt(s)&&vt(s.tagName)&&csString.prototype.indexOf.call(s.tagName,"-")>0&&csString.prototype.indexOf.call(s.tagName,":")===-1&&csString.prototype.indexOf.call(s.tagName,'"')===-1&&csString.prototype.indexOf.call(s.tagName,",")===-1&&csArray.prototype.indexOf.call($d,csString.prototype.toLocaleLowerCase.call(s.tagName))<0}var Ui="detached";function ul(s){let r=s,t=[r];for(;csNodeparentNode.apply(r)!==null;)r=csNodeparentNode.apply(r),csArray.prototype.push.call(t,r);return Pr(r)&&csArray.prototype.push.call(t,Ui),{ancestors:t,selectionRoot:r}}function Gd(s){let r=s,t=[r],e=null;for(;csNodeparentNode.apply(r)!==null;)e===null&&ll(r)&&(e=r),csArray.prototype.push.call(t,csNodeparentNode.apply(r)),r=csNodeparentNode.apply(r);return Pr(r)&&csArray.prototype.push.call(t,Ui),{firstAnchorParent:e,ancestors:t,selectionRoot:r}}function Pr(s){return ls.isValidElement(s)}var Ts=(()=>{var s,r;return(r=(s=ot.Element)===null||s===void 0?void 0:s.prototype)!==null&&r!==void 0?r:{}})(),Zt=Ts.matches||Ts.matchesSelector||Ts.mozMatchesSelector||Ts.msMatchesSelector||Ts.oMatchesSelector||Ts.webkitMatchesSelector,Va=Ts.closest,dl=9;function qd(s,r){return r?csArray.prototype.some.call(r,t=>Zt.call(s,t)):!1}function Wd(s,r,t){if(s===Ui||csNodenodeType.apply(s)===dl)return 0;let e=t.dynamicElementNameRegex,i=!!(e!=null&&e.test(r.localName)),n=zn(r),o=0,c=r.previousElementSibling;for(;c;)(zn(c)===n||i&&(e!=null&&e.test(c.localName)))&&!qd(c,t.reliableSelectors)&&(o+=1),c=c.previousElementSibling;return o}function Yd(s,r,t){if(s===Ui||csNodenodeType.apply(s)===dl)return 0;let e=0,i=r.previousElementSibling;for(;i;)Zt.call(i,t)&&(e+=1),i=i.previousElementSibling;return e}var Xd=[/\d{4}/,/^ember\d+$/],Kd="@",Mo="data-cs-override-id",Jd="data-cs-dynamic-id";function fl(s,r,t,e){let i=e.dynamicIdRegex||null,n=e.dynamicElementNameRegex,o=zn(s);if(n&&n.test(s.localName)&&(o=csString.prototype.replace.call(o,n,`$1${Kd}`)),tf(s,t)){let y=Do(s);return{hasUniqueIdentifier:!0,elementSelector:`${o}[${Mo}="${y}"]`}}let c=cf(s,t,e);if(c.success)return{hasUniqueIdentifier:!0,elementSelector:`${o}#UA[${c.attributeName}="${c.attributeValue}"]`};let l=Qd(s,t,e);if(l)return{hasUniqueIdentifier:!0,elementSelector:`${o}#UCS[${l}]`};let h=Nd(s);if(sf(s,h,t,i))return{hasUniqueIdentifier:!0,elementSelector:`${o}#${h}`};let d=Zd(s,e);if(d){let y=Yd(r,s,d);return{hasUniqueIdentifier:!1,elementSelector:`${o}[${d}](${y})`}}let p=Wd(r,s,e);return{hasUniqueIdentifier:!1,elementSelector:`${o}:eq(${p})`}}function Qd(s,r,t){if(t.uniqueCssSelectors){for(let e of t.uniqueCssSelectors)if(Zt.call(s,e)&&af(e,r))return e}}function Zd(s,r){if(r.reliableSelectors){for(let t of r.reliableSelectors)if(Zt.call(s,t))return t}}function tf(s,r){let t=Do(s);return t&&csString.prototype.match.call(t,/^[\w-]+$/)&&ko(Mo,t,r)}function ef(s){return Do(s)!==null}function Do(s){return s.getAttribute(Mo)}function sf(s,r,t,e){return r&&!ef(s)&&!rf(s,r,e)&&of(r,t)}function rf(s,r,t){return s.hasAttribute(Jd)||nf(r,t)}function nf(s,r){let t=!1;return s&&r&&(t=r.test(s)),s&&(csArray.prototype.some.call(Xd,e=>e.test(s))||t)}function of(s,r){return s&&ko("id",s,r)}function ko(s,r,t){try{return window.csquerySelectorAll[t.nodeType].call(t,`[${s}="${r}"]`).length===1}catch(e){if(e.name!=="SyntaxError")throw e}return!1}function af(s,r){try{return window.csquerySelectorAll[r.nodeType].call(r,s).length===1}catch(t){if(t.name!=="SyntaxError")throw t}return!1}function cf(s,r,t){if(!t.uniqueAttributes)return{success:!1};for(let e of t.uniqueAttributes){let i=s.getAttribute(e);if(i!==null&&ko(e,i,r))return{attributeName:e,attributeValue:i,success:!0}}return{success:!1}}var Gn=11;function Or(s,r,t){let e=csArray.prototype.shift.call(s);if(s.length===0)return Ua(e,t);let i=e,n=s[0],{elementSelector:o,hasUniqueIdentifier:c}=fl(i,n,r,t);if(!t.fullPath&&c){let h=s[s.length-1];return`${Ua(h,t)}${o}`}let l=Or(s,r,t);return`${l?`${l}>`:""}${o}`}function Ua(s,r){if(s===Ui)return"|detached|";if(s.host){let{ancestors:t,selectionRoot:e}=ul(s.host);return`${Or(t,e,r)}|shadow-root|`}return csNodenodeType.apply(s)===Gn?"|fragment|":""}var pl=(()=>{class s{constructor(t){this.options=t,this.done=!1,this.path=null}getPath(){if(this.path===null)throw new Error("getPath was called before serializeElement");return this.path}isDone(){return this.done}}return s})(),lf=(()=>{class s extends pl{constructor(){super(...arguments),this.ra=!1,this.na=!1,this.Xc=!1}xE(t,e){return this.ra&&!(e===null&&Pr(t))&&csNodenodeType.apply(t)!==Gn&&!t.host}LE(t){return!t.localName}serializeElement(t,e,i){var n;if((n=this.path)!==null&&n!==void 0||(this.path=""),this.xE(t,e))return;let o=!1;e===null&&Pr(t)&&(o=!0,this.done=!0);let c=this.na&&!this.options.fullPath?"":">",l=!!t.host;if(l&&this.path&&(this.path="|shadow-root|"+c+this.path,this.Xc=!0,this.ra=!1,this.na=!1),!l&&e===null&&csNodenodeType.apply(t)===Gn){this.path="|fragment|"+c+this.path,this.done=!0;return}if(this.LE(t))return;let h=e!=null?e:"detached",{elementSelector:d,hasUniqueIdentifier:p}=fl(t,h,i,this.options);p&&(this.na=!0,this.ra=!this.options.fullPath);let y=`${o?`|detached|${c}`:""}${this.ra&&!p?"":d}`,v=!p&&this.na&&!this.options.fullPath?"":this.path&&!this.Xc?">":"";this.Xc=!1,this.path=`${y}${v}${this.path}`}}return s})(),Ct=(()=>{let s;return function(r){function t(){let p=[i()];return document.documentElement&&csArray.prototype.push.call(p,document.documentElement.scrollHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight),document.body&&csArray.prototype.push.call(p,document.body.scrollHeight,document.body.offsetHeight),Math.max(...p)}r.documentHeight=t;function e(){return document.documentElement.scrollWidth}r.documentWidth=e;function i(){return window.innerHeight}r.windowHeight=i;function n(){return window.innerWidth}r.windowWidth=n;function o(){let p=window.csScreen.width;return Os(p)&&p>0?p:window.screen.width}r.screenWidth=o;function c(){let p=window.csScreen.height;return Os(p)&&p>0?p:window.screen.height}r.screenHeight=c;function l(){return window.pageXOffset}r.windowOffsetX=l;function h(){return window.pageYOffset}r.windowOffsetY=h;function d(){return{dw:`${e()}`,dh:`${t()}`,ww:`${n()}`,wh:`${i()}`,sw:`${o()}`,sh:`${c()}`}}r.getRequestParameters=d}(s||(s={})),s})();function ae(s,r=Bt.SHOW_ALL){let t=r|Bt.SHOW_ELEMENT,e=[document.createTreeWalker(s,t,null,!1)],i=ja(s);i&&csArray.prototype.push.call(e,document.createTreeWalker(i,t,null,!1));let n=null;return{root:s,nextNode(){if(i){let o=i;return i=null,o}for(;e.length>0;){if(n){let h=n;return n=null,h}let c=e[e.length-1].nextNode();if(!c){csArray.prototype.pop.call(e);continue}let l=ja(c);if(r&Bt.SHOW_DOCUMENT_FRAGMENT&&l&&(n=l),l&&csArray.prototype.push.call(e,document.createTreeWalker(l,t,null,!1)),(cn[csNodenodeType.apply(c)]&r)!==0)return c}return null},visitAll(o){cn[csNodenodeType.apply(s)]&r&&o(s);let c=this.nextNode();for(;c;){if((cn[csNodenodeType.apply(c)]&r)===0){c=this.nextNode();continue}o(c),c=this.nextNode()}},find(o){let c;return this.visitAll(l=>o(l)&&(c=l)),c},collectAll(o){let c=[];return this.visitAll(l=>csArray.prototype.push.call(c,o?o(l):l)),c}}}function ja(s){return s&&hl(s)?s.shadowRoot:null}var an=(()=>{var s;return(s=ot.Node)!==null&&s!==void 0?s:{}})(),Bt=(()=>{var s;return(s=ot.NodeFilter)!==null&&s!==void 0?s:{}})(),cn={2:Bt.SHOW_ATTRIBUTE,4:Bt.SHOW_CDATA_SECTION,8:Bt.SHOW_COMMENT,11:Bt.SHOW_DOCUMENT_FRAGMENT,9:Bt.SHOW_DOCUMENT,10:Bt.SHOW_DOCUMENT_TYPE,1:Bt.SHOW_ELEMENT,[an.ENTITY_NODE]:Bt.SHOW_ENTITY,[an.ENTITY_REFERENCE_NODE]:Bt.SHOW_ENTITY_REFERENCE,[an.NOTATION_NODE]:Bt.SHOW_NOTATION,7:Bt.SHOW_PROCESSING_INSTRUCTION,3:Bt.SHOW_TEXT},gl=!1,qn=5,hr=50;function hf(s=5){gl=ht.isPerfLoggingActive(),qn=s}function Vs(s,r){return function(){if(!gl)return s.apply(this,arguments);let t=k.elapsed(),e=s.apply(this,arguments);if(e!=null&&e.then)e.then(()=>{let i=k.elapsed()-t;i>=qn&&q.counters.methodPerformance.add(r,i),i>hr&&q.counters.blockingTime.push(i-hr)});else{let i=k.elapsed()-t;i>=qn&&q.counters.methodPerformance.add(r,i),i>hr&&q.counters.blockingTime.push(i-hr)}return e}}var Nt=function(s){return function(r,t,e){let i=e.value;e.value=Vs(i,s)}},Is=(()=>{let s;return function(r){function t(){return!!Element.prototype.attachShadow}r.isSupported=t;function e(n){return n&&hl(n)?n.shadowRoot:null}r.getShadowRoot=e;function i(n){return ae(n,NodeFilter.SHOW_DOCUMENT_FRAGMENT).collectAll(o=>o.host)}r.getAllShadowHosts=Vs(i,"getAllShadowHosts")}(s||(s={})),s})(),ln=(()=>{var s;return(s=ot.Node)!==null&&s!==void 0?s:Object})(),lt=(()=>{let s;return function(r){let t="isConnected"in ln.prototype?S=>S.isConnected:S=>!S.ownerDocument||!(S.ownerDocument.compareDocumentPosition(S)&S.DOCUMENT_POSITION_DISCONNECTED);function e(S,V){for(let U=S;U;U=csNodenextSibling.apply(U))V(S)}r.forEachChild=e;function i(S){return t(S)}r.isConnected=i;function n(S,V){let U=[];for(let G of l(S,V))csArray.prototype.push.call(U,G);return U}r.getAncestors=n;let o=(S,V)=>{var U;return(U=csNodeparentNode.apply(S))!==null&&U!==void 0?U:V&&Pi(S)?S.host:null};function c(S,V,U=!1){let G=S;for(;G;){if(V(G))return G;let mt=o(G,U);if(mt&&mt!==G)G=mt;else break}return null}r.findAncestor=c;function*l(S,V=!1){let U=S;for(;U;){yield U;let G=o(U,V);if(G&&G!==U)U=G;else break}}r.walkUp=l;function h(S,V){if(S===V||V.contains(S))return!0;let U=r.getParentElement(S);return U&&U!==S?h(U,V):!1}r.isDescendantOf=h;function d(S){var V;return S.parentElement?S.parentElement:r.getRootNode(S)?(V=r.getRootNode(S))===null||V===void 0?void 0:V.host:null}r.getParentElement=d;function p(S,V=document){let U=Ii(window.csquerySelectorAll[V.nodeType].call(V,S)),G=Is.getAllShadowHosts(V);for(let mt of G){let Mt=Is.getShadowRoot(mt);if(!Mt)continue;let be=Ii(window.csquerySelectorAll[Mt.nodeType].call(Mt,S));csArray.prototype.push.call(U,...be)}return U}r.findAllElements=p,r.getRootNode=(()=>{if("getRootNode"in ln.prototype)return(U,G)=>U.getRootNode(G);function S(U){let G=V(U);return Pi(G)?S(G.host):G}function V(U){return csNodeparentNode.apply(U)!=null?V(csNodeparentNode.apply(U)):U}return(U,G)=>typeof G=="object"&&!!G.composed?S(U):V(U)})();function y(S){return S==="transparent"||/^(rgba|hsla)\(\d+, \d+%?, \d+%?, 0\)$/.test(S)}function m(S){let V=S.getBoundingClientRect();return V.right+Ct.windowOffsetX()<0||V.bottom+Ct.windowOffsetY()<0}function v(S){var V,U;if(((V=S.checkVisibility)===null||V===void 0?void 0:V.call(S,{checkOpacity:!0,checkVisibilityCSS:!0}))===!1)return!0;if(!S.offsetParent){if(!S.getBoundingClientRect)return ht.warn(`SUP-11432: Element doesn't have getBoundingClientRect. Node: ${S instanceof ln} Ctor: ${(U=S==null?void 0:S.constructor)===null||U===void 0?void 0:U.name}`),!1;let Mt=S.getBoundingClientRect();if(Mt.width===0&&Mt.height===0)return!0}let G=window.getComputedStyle(S);return G?G.display==="none"||G.visibility==="hidden"||G.visibility==="collapse"||G.opacity==="0"||G.filter==="opacity(0)"||G.width==="0px"&&G.height==="0px"||y(G.color):!0}r.isHiddenByCSS=v;function b(S){if(v(S))return!0;let U=d(S);return U!=null&&b(U)}r.areAncestorsHiddenByCSS=b;function C(S){let V=null,U=S;do if(v(U))V=U;else break;while(U=d(U));return V}r.getTopAncestorHiddenByCSS=C;function _(S){let V=T(S);return V!==null&&!S.contains(V)&&!V.contains(S)}function T(S){let V=S.getBoundingClientRect(),U=V.left+.5*V.width,G=V.top+.5*V.height;return O(document,U,G)}r.getTopElement=T;function x(S){if(!S.getBoundingClientRect)return null;let V=S.getBoundingClientRect(),U=V.x+V.width/2,G=V.y+V.height/2;return r.getTopElementFromPoint(document,U,G)}r.getElementOnTop=x;function O(S,V,U){let G=S.elementFromPoint(V,U);if(!G)return null;let mt=Is.getShadowRoot(G);return mt&&mt!==r.getRootNode(document.body)&&mt!==S?O(mt,V,U):G}r.getTopElementFromPoint=O;function w(S){return!m(S)&&!v(S)&&!_(S)}r.isVisibleInDocument=w;function H(S){return v(S)?!1:$(S)}r.isVisibleInViewportInForeground=H;function $(S){let V=T(S);return V===null?!1:S===V?!0:Gt(S)?S.textContent!==""&&V.contains(S):S.contains(V)}r.isInViewPort=$;function tt(S,V,U){let G=S.getAttributeNS(V,U);return G===""?S.hasAttributeNS(V,U)?G:null:G}r.getAttributeNS=tt;function It(S){return!!(S.hasAttribute("tabIndex")||S.getAttribute("contentEditable")==="true"||ll(S)&&S.hasAttribute("href")||(No(S)||Oo(S)||Lr(S)||xd(S))&&!S.hasAttribute("disabled")||Ld(S)||Vd(S))}r.isElementFocusable=It;function Gt(S){return S.localName==="span"||S.localName==="a"||S.localName==="b"||S.localName==="i"||S.localName==="button"||S.localName==="input"||S.localName==="label"||S.localName==="cite"||S.localName==="small"||S.localName==="strong"||S.localName==="code"||S.localName==="abbr"||S.localName==="em"||S.localName==="dfn"||S.localName==="time"||S.localName==="output"||S.localName==="object"||S.localName==="sub"}r.isInlineElement=Gt;function ee(S){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>S(),{once:!0}):csSetTimeout(S)}r.onDocumentLoaded=ee}(s||(s={})),s})(),uf=(()=>{class s{constructor(t){this.VE=t}run(t){let e=[...this.VE],i=lt.getAncestors(t,!1),n=i[i.length-1];for(;e.length>0&&i.length>0;){let o=csArray.prototype.shift.call(i),c=i[0]||null;if(this.UE(e,o,c,n),this.jE(e),e.length===0)break;i.length===0&&o.host&&(i=lt.getAncestors(o.host,!1),n=i[i.length-1])}}UE(t,e,i,n){for(let o of t)o.serializeElement(e,i,n)}jE(t){for(let e=0;e<t.length;e++)t[e].isDone()&&(csArray.prototype.splice.call(t,e,1),e--)}}return s})(),df=(()=>{class s extends pl{serializeElement(t){var e;if((e=this.path)!==null&&e!==void 0||(this.path=""),(t==="detached"||t.localName==="body")&&(this.done=!0,this.path.length>0))return;let i=this.HE(t);if(i+=i.length>0?"|":"",this.path.length+i.length>this.options.hierarchyMaxLength){this.done=!0;return}this.path=i+this.path}HE(t){if(!t.localName)return"";let e=`@${t.localName};`;return e+=this.BE(t.id),t.classList&&(e+=this.FE(csArray.from(t.classList))),t.attributes&&(e+=this.$E(t)),e}BE(t){return t?`#${t};`:""}FE(t){return t.length>0?`.${csArray.prototype.join.call(csArray.prototype.sort.call(t),";.")};`:""}zE(t,e){var i,n;return((n=(i=this.options).isAttributeSensitive)===null||n===void 0?void 0:n.call(i,t,e))||csArray.prototype.indexOf.call(this.options.attributeIgnoreTokens,e)!==-1||ni(t)&&csString.prototype.indexOf.call(e,"data-")===-1&&e!=="aria-label"||Lr(t)&&e==="value"}GE(t,e){return this.options.useAnonymization&&!this.options.allWhitelistedAttributes.has(t)||e.length>this.options.attrMaxLength}qE(t){let e={};for(let i of csArray.from(t.attributes))this.zE(t,i.name)||(e[i.name]=i.value);return e}$E(t){var e,i;if(!((i=(e=this.options).isNodeSensitive)===null||i===void 0)&&i.call(e,t))return"";let n=Object.entries(this.qE(t));return csArray.prototype.join.call(csArray.prototype.sort.call(csArray.prototype.map.call(csArray.prototype.filter.call(n,([o])=>o.length<this.options.attrMaxLength),([o,c])=>this.GE(o,c)?`[${o}]`:`[${o}=${c}]`)),";")+(n.length>0?";":"")}}return s})(),ls=(()=>{let s;return function(r){r.INVALID_ELEMENT="INVALID_ELEMENT";function t(c){return!!c&&"localName"in c&&"getAttribute"in c&&"hasAttribute"in c&&"parentNode"in c}r.isValidElement=t;function e(c,l,h={fullPath:!1,dynamicIdRegex:null}){let d=o(c);if(d===document)return{path:"",hierarchy:""};if(!t(d))return{path:r.INVALID_ELEMENT,hierarchy:r.INVALID_ELEMENT};let p=new lf(h),y=new df(l);return new uf([p,y]).run(d),{path:p.getPath(),hierarchy:y.getPath()}}r.getElementPathAndHierarchy=e;function i(c,l={fullPath:!1,dynamicIdRegex:null}){let h=o(c);if(h===document)return"";if(!t(h))return r.INVALID_ELEMENT;let{ancestors:d,selectionRoot:p}=ul(h);return Or(d,p,l)}r.getElementPath=i;function n(c,l={fullPath:!1,dynamicIdRegex:null}){let h=o(c);if(h===document)return{path:"",firstAnchorParent:null};if(!t(h))return{path:r.INVALID_ELEMENT,firstAnchorParent:null};let{firstAnchorParent:d,ancestors:p,selectionRoot:y}=Gd(h);return{path:Or(p,y,l),firstAnchorParent:d}}r.getElementPathAndFirstAnchorParent=n;function o(c){return c&&"jquery"in c&&c.length===1?c[0]:c}}(s||(s={})),s})();window.CSPathComputation=window.CSPathComputation||ls;var ml=["t.contentsquare.net","clicktale"],ff=s=>{var r;if(typeof s.filename=="string"&&csArray.prototype.some.call(ml,t=>csString.prototype.indexOf.call(s.filename,t)>-1)&&!(csString.prototype.indexOf.call(s.filename,"blob")>-1&&(s.message==null?void 0:csString.prototype.indexOf.call(s.message,"importScripts"))>-1)){let t=new Error(s.message);t.stack=(r=s.error)===null||r===void 0?void 0:r.stack,B.critical(t)}};window.addEventListener("error",ff);var B=(()=>{class s{constructor(){}static whiteListFilename(t){csArray.prototype.push.call(ml,t)}static setStrategy(t){s.cr=t}static computeIsActive(t){s.ze=Ns.boolean(t),s.ze?s.Kc=Ns.boolean(10):s.Kc=!1}static isLoggingActive(){return s.ze}static getStrategy(){return s.cr}static debug(t,e=""){s.ze&&this.cr.send(t,e,gt.debug)}static warn(t,e=!0,i=""){var n;q.counters.errors.count("warning"),s.ze&&e&&this.cr.send(t,i,gt.warn),(n=window.UXAnalytics.Console)===null||n===void 0||n.warn(t)}static implementation(t,e=""){q.counters.errors.count("implementation"),s.ze&&this.cr.send(t,e,gt.implementation)}static error(t,e=""){var i;q.counters.errors.count("error"),s.ze&&this.cr.send(t,e,gt.error),(i=window.UXAnalytics.Console)===null||i===void 0||i.error(t)}static critical(t,e=""){q.counters.errors.count("critical"),this.cr.send(t,e,gt.critical)}static tryToExecute(t,e){return function(...i){try{let n=e.apply(this,i);return Z(ot.Promise)&&n instanceof ot.Promise?n.then(o=>o,o=>s.error(Le(o)?o:new Error(o),t)):n}catch(n){try{s.error(Le(n)?n:new Error(n),t)}catch(o){}}}}static isPerfLoggingActive(){return s.Kc}}return s.ze=!1,s.Kc=!1,s})();var Wn=!1;function pf(){Wn=!0}function ft(){return(s,r,t)=>{if(t){let e=t.value;t.value=function(i,n){(i==null?void 0:i.isTrusted)===!1&&Wn||e.call(this,i,n)}}else{let e=s[r];if(typeof e!="function")return;s[r]=function(i,...n){(i==null?void 0:i.isTrusted)===!1&&Wn||e.call(this,i,n)}}}}function gf(s){if(document!=null&&document.prerendering){document.addEventListener("prerenderingchange",s,{once:!0});return}s()}var mf=(()=>{class s{constructor(t,e){this.oa=t,this.Kd=e}init(){this.Jd=this.oa!==this.oa.top,this.Qd=this.Kd.isWebView&&this.oa===this.oa.top,this.Kd.iframesTracking&&this.Jd||this.Qd?this.Zd=!1:this.Zd=!0}isInIframeContext(){return this.Jd}isTopWindowTracker(){return this.Zd}isInWebViewContext(){return this.Qd}}return s})(),Vt=!xi&&document.createElement("a"),yf=/(:443|:80)$/;function De(s){return Vt?(Vt.href=s,Vt.href):""}function Ef(s,r){return new csURL(s,r).href}function vf(s,r){return csArray.prototype.some.call(r,t=>ii(s,`.${t}`)||s===t||t==="")}function Sf(s){return s[0]==="/"?s:`/${s}`}function Ha(s){return csString.prototype.replace.call(s,yf,"")}function yl(s){return!Vt||!jt(s,"http://")&&!jt(s,"https://")?null:(Vt.href=s,{hash:Vt.hash,host:Ha(Vt.host),hostname:Vt.hostname,href:Vt.href,origin:Vt.origin?Vt.origin:Ha(`${Vt.protocol}//${Vt.host}`),pathname:Sf(Vt.pathname),port:Vt.port,protocol:Vt.protocol,search:Vt.search})}var Lt=(()=>{let s;return function(r){r.Discovery="discovery",r.Stop="stop",r.RecordingContext="recordingContext",r.SensitiveStatus="sensitiveStatus",r.RecordingEvent="recordingEvent",r.EndOfBufferedMessages="endOfBufferedMessages",r.ChildLogMessage="childLogMessage",r.AnalysisEvent="analysisEvent",r.JavascriptError="javascriptError",r.ApiError="apiError",r.Assets="assets",r.DetailedApiError="detailedApiError",r.EmerchandisingMessage="emerchandisingMessage",r.Commands="commands",r.IntegrationCallback="integrationCallback",r.StaticResource="staticResource",r.TrackingContextResultMessage="trackingContextResultMessage",r.TrackingContextRequestMessage="trackingContextRequestMessage",r.CustomError="customError"}(s||(s={})),s})();var _f=(()=>{class s{setContext(t,e){this.N=t,this.R=e}getVisitorService(){return this.N}getSessionService(){return this.R}}return s})();function Ba(){}function Yn(s,r){return csString.prototype.lastIndexOf.call(s,r,0)===0}function wf(s,r){return csString.prototype.indexOf.call(s,r,s.length-r.length)!==-1}var hn=csSymbol("cachedJson");function Af(s){if(s[hn])return s[hn];if(csArray.isArray(s)){if(s.length===0)return"[]";let r="["+Ds(s[0]);for(let t=1;t<s.length;t++)r+=","+Ds(s[t]);return r+="]"}return s[hn]=csJSON.stringify(s)}var Ds=typeof window.Symbol!="undefined"?Af:csJSON.stringify;var Oi=(()=>{let s;return function(r){function t(e){return csArray.prototype.join.call(csArray.prototype.map.call(Object.keys(e),i=>`${encodeURIComponent(i)}=${encodeURIComponent(e[i])}`),"&")}r.toQuery=t}(s||(s={})),s})(),El=(()=>{class s{constructor(t,e){this.domainUri=t,this.path=e,this.beforeRequestCallbacks=[],this.afterRequestCallbacks=[]}setRequestParametersProviders(...t){this.requestParametersProviders=t}before(t){csArray.prototype.push.call(this.beforeRequestCallbacks,t)}after(t){csArray.prototype.push.call(this.afterRequestCallbacks,t)}retrieveParameters(){return this.requestParametersProviders?csArray.prototype.reduce.call(csArray.prototype.map.call(this.requestParametersProviders,t=>t.getRequestParameters()),(t,e)=>j(j({},t),e)):{}}}return s})(),Zs=(()=>{class s extends El{constructor(t,e){super(t,e)}send(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,i=>i());let t=this.retrieveParameters();this.Jc(t);let e=Oi.toQuery(t);this.WE(e),csArray.prototype.forEach.call(this.afterRequestCallbacks,i=>i())}WE(t){let e=new window.Image(1,1);e.onload=Ba,e.onerror=Ba,csHTMLImageElementsrc.call(e,`${this.domainUri}${this.path?`/${this.path}`:""}?${t}`)}Jc(t){t.r=csString.prototype.slice.call(`${Math.random()}`,2,8)}}return s})();var Tf=(()=>{class s{constructor(t,e){this.Ts=t,this.YE=e}init(){this.bs=new Zs(this.Ts.getLoggerUri()),this.bs.setRequestParametersProviders(this,this.YE)}send(t){this.aa=t,this.bs.send()}getRequestParameters(){return{a:this.aa.app,l:this.aa.level,m:this.aa.message,s:this.aa.stacktrace}}}return s})(),bf=/[a-zA-Z0-9._%+-]+(?:@|%40|%2540)[a-zA-Z0-9.%-_]+((?:\.|%2[eE])[a-zA-Z0-9-]+)+/g,Rf=/[a-zA-Z0-9+_-](?:@|%40|%2540)/,Cf="CS_ANONYMIZED_EMAIL",un="([-A-Za-z0-9+/=_]|=[^=]|={3,})+",If=new csRegExp(`(ey${un}\\.ey${un}\\.${un})`,"g"),Pf="CS_ANONYMIZED_JWT",Of=/[0-9]{4}/,Nf=/(^|[^a-zA-Z0-9*.,-])([45*][0-9*]{3}([ -]?)[0-9*]{4}\3[0-9*]{4}\3[0-9*]{4})($|[^a-zA-Z0-9*.,-])/g,Mf="CS_ANONYMIZED_PII",Df="\u2022",kf=/\d/g,xf=/([+(]{0,2}\d[-_ ()/]{0,4}){9,}/,Lf=/(?:\d{1,3}\.){3}\d{1,3}/,Vf=/(?:[A-F0-9]{1,4}:){7}[A-F0-9]{1,4}/,Ke=(()=>{let s;return function(r){function t(d){return csString.prototype.replace.call(d,bf,Cf)}r.replaceEmail=t;function e(d){return csString.prototype.replace.call(d,If,Pf)}r.replaceJWT=e;function i(d,p){return csString.prototype.replace.call(d,Nf,p)}r.replaceCreditCardNumber=i;function n(d){return csString.prototype.replace.call(d,kf,Df)}r.replaceDigits=n;function o(d){return Lf.test(d)||Vf.test(d)}r.mayHaveIPAddress=o;function c(d){return xf.test(d)}r.mayHaveNumberSequence=c;function l(d){return Of.test(d)}r.mayHaveCreditCardNumber=l;function h(d){return Rf.test(d)}r.mayHaveEmail=h}(s||(s={})),s})(),oi=(()=>{class s{hasPII(t,e){let i=this.checkAndAnonymizePII(t,e);return t!==i}checkAndAnonymizePII(t,e=null){let i=this.XE(this.Qc(t));return e===!0?i=this.KE(i):e===!1&&(i=this.JE(i)),i}anonymizePII(t){return this.Qc(t)}anonymizeJwt(t){return Ke.replaceJWT(t)}anonymizeFields(t,e){return csArray.prototype.forEach.call(e,i=>{t[i]=this.Qc(t[i])}),t}Qc(t){if(Ke.mayHaveEmail(t)){let e=Ke.replaceEmail(t);return e!==t&&q.counters.redactedPII.count("email"),e}return t}KE(t){return Ke.replaceDigits(t)}JE(t){return Ke.mayHaveNumberSequence(t)?Ke.replaceDigits(t):t}XE(t){return Ke.mayHaveCreditCardNumber(t)?Ke.replaceCreditCardNumber(t,(e,i,n,o,c)=>{if(csString.prototype.indexOf.call(n,"*")===-1){let h=o.length?csArray.prototype.join.call(csString.prototype.split.call(n,o),""):n;if(!this.QE(h))return e;q.counters.redactedPII.count("cc")}else q.counters.redactedPII.count("cc-partial");return`${i}${Mf}${c}`}):t}QE(t){let e=parseInt(t[t.length-1]),i=0;for(let n=t.length-2;n>=0;n--){let o=parseInt(t[n]);n%2===0&&(o*=2),i+=Math.floor(o/10)+o%10}return 10-i%10===e}}return s})(),vl="15.163.0";function xo(){return{v:vl}}var Uf=(()=>{class s{constructor(t,e){this.E=t,this.D=e}getRequestParameters(){return j(j({d:`${k.now()}`,p:this.D.anonymizePII(window.location.href)},this.E.getRequestParameters()),xo())}}return s})(),jf="uxa",Fa=5,Hf="No stacktrace",Sl="snippet-",_l="implementation-snippet-",$a=(()=>{let s;return function(r){r.IMPLEMENTATION="implementation",r.DYNAMIC="dynamic"}(s||(s={})),s})(),Bf=(()=>{class s{constructor(t,e,i){this.lr=e,this.D=new oi,this.tf=rn[gt.warn],this.tf=rn[t.minLogLevel||gt.warn],this.bs=i||new Tf(t,new Uf(t,this.D)),this.ef={[gt.debug]:[],[gt.warn]:[],[gt.implementation]:[],[gt.error]:[],[gt.critical]:[]},this.ca={implementation:{},dynamic:{}},this.bs.init()}send(t,e="",i=gt.warn){if(!this.ZE(i,e))return;csArray.prototype.push.call(this.ef[i],e||"");let n={message:this.sv(t,e),stacktrace:this.iv(t),app:jf,level:i};this.bs.send(n)}sv(t,e){let i=Le(t)?this.D.anonymizePII(t.message||t.toString()):t;return e&&(i+=` ErrorCode: ${e}`),i}iv(t){return Le(t)?`${t.stack||Hf} ${this.sf()}`:this.sf()}sf(){let t=this.lr.getVisitorService(),e=t==null?void 0:t.getVisitor();if(!e)return"No context";let i=this.lr.getSessionService(),n=i&&i.getSession(),o={userId:e.id,sessionNumber:e.visitsCount,pageNumber:n&&n.pageNumber};return csJSON.stringify(o)}ZE(t,e){if(rn[t]<this.tf)return!1;if((e==null?void 0:csString.prototype.indexOf.call(e,_l,0))===0)return this.rf(e,$a.IMPLEMENTATION);if((e==null?void 0:csString.prototype.indexOf.call(e,Sl,0))===0)return this.rf(e,$a.DYNAMIC);let i=this.ef[t];return i.length>=Fa?!1:!(e&&csArray.prototype.some.call(i,n=>n===e))}rf(t,e){return t in this.ca[e]?this.ca[e][t]>=Fa?!1:(this.ca[e][t]+=1,!0):(this.ca[e][t]=1,!0)}}return s})();var Ff=(()=>{let s;return function(r){function t(){return typeof window.CSJavascriptBridge=="object"&&typeof window.CSJavascriptBridge.optIn=="function"&&typeof window.CSJavascriptBridge.optOut=="function"&&typeof window.CSJavascriptBridge.sendEvent=="function"&&typeof window.CSJavascriptBridge.sendDynamicVar=="function"&&typeof window.CSJavascriptBridge.sendTransaction=="function"}r.isCSJavascriptBridgeDefined=t;function e(){if(typeof window.CSJavascriptBridge.getVersion=="function")try{let $=window.CSJavascriptBridge.getVersion();if(At($))return $}catch($){B.warn("an error occurred when calling getVersion")}return null}r.getBridgeVersion=e;function i(){typeof window.CSJavascriptBridge.onWebviewTrackingReady=="function"&&window.CSJavascriptBridge.onWebviewTrackingReady()}r.notifyIsReadyForTracking=i;function n($,tt){window.CSJavascriptBridge.identify&&window.CSJavascriptBridge.identify($,csJSON.stringify(tt))}r.identify=n;function o(){window.CSJavascriptBridge.resetIdentity&&window.CSJavascriptBridge.resetIdentity()}r.resetIdentity=o;function c($){window.CSJavascriptBridge.addUserProperties&&window.CSJavascriptBridge.addUserProperties(csJSON.stringify($))}r.addUserProperties=c;function l($){window.CSJavascriptBridge.addEventProperties&&window.CSJavascriptBridge.addEventProperties(csJSON.stringify($))}r.addEventProperties=l;function h($){window.CSJavascriptBridge.removeEventProperty&&window.CSJavascriptBridge.removeEventProperty($)}r.removeEventProperty=h;function d(){window.CSJavascriptBridge.clearEventProperties&&window.CSJavascriptBridge.clearEventProperties()}r.clearEventProperties=d;function p($){window.CSJavascriptBridge.addPageviewProperties&&window.CSJavascriptBridge.addPageviewProperties(csJSON.stringify($))}r.addPageviewProperties=p;function y($){window.CSJavascriptBridge.removePageviewProperty&&window.CSJavascriptBridge.removePageviewProperty($)}r.removePageviewProperty=y;function m(){window.CSJavascriptBridge.clearPageviewProperties&&window.CSJavascriptBridge.clearPageviewProperties()}r.clearPageviewProperties=m;function v($){window.CSJavascriptBridge.sendEvent(csJSON.stringify($))}r.sendAnalysisEvent=v;function b($){if(window.CSJavascriptBridge.sendSREvent)for(let tt of $.events)window.CSJavascriptBridge.sendSREvent(csJSON.stringify(tt))}r.sendSREvent=b;function C($){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendLog&&window.CSJavascriptBridge.sendLog(csJSON.stringify($))}r.sendLog=C;function _(){window.CSJavascriptBridge.optIn()}r.sendOptIn=_;function T(){window.CSJavascriptBridge.optOut()}r.sendOptOut=T;function x($,tt){window.CSJavascriptBridge.sendDynamicVar($,tt)}r.sendDynamicVariable=x;function O($,tt,It){window.CSJavascriptBridge.sendTransaction($,tt,It)}r.sendTransaction=O;function w($,tt){if(window.CSJavascriptBridge.sendAssets){let It=csJSON.stringify($);window.CSJavascriptBridge.sendAssets(It,tt||null)}else window.CSJavascriptBridge.sendSRAssets&&window.CSJavascriptBridge.sendSRAssets(csArray.prototype.map.call($,It=>It.assetId))}r.sendAssets=w;function H($){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendNativeSREvent&&window.CSJavascriptBridge.sendNativeSREvent(csJSON.stringify($))}r.sendNativeSREvent=H}(s||(s={})),s})(),$f=(()=>{class s{constructor(){}send(t,e,i=gt.warn){let n={message:t,errorCode:e,level:i};Ff.sendLog(n)}}return s})();function re(s){return jt(s,"data:")}function zf(s){return jt(s,"#")}function Gf(s){return!!s&&(ii(s,".css")||jt(s,"https://fonts.googleapis.com/css"))}function qf(){let s={};return new csURL(location.href).searchParams.forEach((r,t)=>s[t]=r),s}var Wf=["id","class","style","srcset","sizes","rel","type","width","height","media","align","dir","bgcolor","color","border","colspan","rowspan","cols","rows","size","start","slot","data-cs-override-id"],Lo=s=>{let r=new Set(Wf);return csArray.prototype.forEach.call(s,t=>{r.add(t)}),r},Yf=["svg","slot"],Xf=(s,r,t)=>t==="radio"&&s==="input"&&r==="name"||csArray.prototype.indexOf.call(Yf,s)>-1,wl={href:new Set(["a"]),src:new Set(["iframe"])},Kf=s=>wl.hasOwnProperty(s),Jf=(s,r,t)=>{var e;return((e=wl[r])===null||e===void 0?void 0:e.has(s))&&!re(t)},Qf=(s,r,t)=>(t==="submit"||t==="button")&&s==="input"&&r==="value";function dn(s){return s?Zf(s):null}function Zf(s){try{let r=/^\/(.*)\/([gim]*)$/.exec(s);if(r){let[,t,e]=r;return new csRegExp(`^${t}$`,e)}return new csRegExp(`^${s}$`)}catch(r){return null}}var tp=/^\d+\.\d+(?:\.\d+)?$/,ep=s=>{if(!tp.test(s))return;let[r,t,e]=csArray.prototype.map.call(csString.prototype.split.call(s,"."),Number);return{major:r,minor:t,patch:!e||Number.isNaN(e)?0:e}},sp=(s,r)=>s.major!==r.major?s.major-r.major:s.minor!==r.minor?s.minor-r.minor:s.patch-r.patch,ip=(s,r)=>sp(s,r)>=0,rp=1,Xn=(()=>{let s;return function(r){r[r.Disabled=0]="Disabled",r[r.ButtonAndLinkOnly=1]="ButtonAndLinkOnly",r[r.Enabled=2]="Enabled"}(s||(s={})),s})(),Nr=(()=>{let s;return function(r){r[r.Automatic=1]="Automatic",r[r.Manual=2]="Manual"}(s||(s={})),s})(),np=(()=>{class s{constructor(t){var e,i,n,o,c,l,h,d,p,y,m,v,b;this.isChild=!1,this.useFastDOM=!!t.useFastDOM,this.isSMB=(e=t.isSMB)!==null&&e!==void 0?e:!1,this.trackerDomain=t.trackerDomain,this.dynamicConfDomain=t.dynamicConfDomain,this.settingsFileUri=t.settingsFileUri,this.tagDomain=t.tagDomain,this.loggerDomain=t.ed,this.minLogLevel=t.logLevel,this.projectId=t.projectId,this.smbConfig=t.smbConfig,this.status=t.status,this.hostnames=t.hostnames,this.iframesTracking=!!t.iframesTracking,this.crossDomainTracking=!!t.crossDomainTracking,this.crossDomainSingleIframeTracking=!!t.crossDomainSingleIframeTracking,this.consentRequired=!!t.consentRequired,this.allowSubdomains=!!t.allowSubdomains,this.visitorCookieTimeout=t.visitorCookieTimeout||bo,this.sampleRate=t.sampleRate,this.replayRecordingRate=t.replayRecordingRate,this.validationRate=t.validationRate,this.lastTrackingDraw=t.lastTrackingDraw||1,this.useHttps=!0,this.eMerchandisingEnabled=t.eMerchandisingEnabled,this.jsErrorsEnabled=t.jsErrorsEnabled,this.collectionEnabled=!!(!((o=(i=t.collectionEnabled)!==null&&i!==void 0?i:(n=t.smbConfig)===null||n===void 0?void 0:n.record)!==null&&o!==void 0)||o),this.apiErrors=j({enabled:(c=t.apiErrorsEnabled)!==null&&c!==void 0?c:0},t.apiErrors),this.customErrors=j({enabled:(l=t.customErrorsEnabled)!==null&&l!==void 0?l:0},t.customErrors),this.jsCustomErrorsEnabled=t.jsCustomErrorsEnabled,this.triggerSessionReplayEnabled=t.triggerSessionReplayEnabled,this.triggerSessionReplayRegex=dn(t.triggerSessionReplayRegex),this.dynamicIdRegex=t.dynamicIdRegex?new csRegExp(t.dynamicIdRegex):null,this.whitelistedAttributes=t.whitelistedAttributes||[],this.replayRecordingUnmaskedUrlRegex=dn(t.replayRecordingUnmaskedUrlRegex),this.replayRecordingMaskedUrlRegex=dn(t.replayRecordingMaskedUrlRegex),this.replayRecordingMaskedUrlRegexRules=t.replayRecordingMaskedUrlRegexRules||null,this.replayRecordingUnmaskedUrlRegexRules=t.replayRecordingUnmaskedUrlRegexRules||null,this.anonymisationMethod=t.anonymisationMethod||null,this.tagDeploymentMode=t.tagDeploymentMode,this.dualCollectionTagDomain=t.dualCollectionTagDomain||null,this.ptcDomain=t.ptcDomain||null,this.ptcGuid=t.ptcGuid||null,this.secureCookiesEnabled=!!t.secureCookiesEnabled,this.ptcSha512=t.ptcSha512||null,this.ptcSnapshotPath=t.ptcSnapshotPath||null,this.emitDebugEvents=!1,this.staticResourceManagerDomain=t.staticResourceManagerDomain||null,this.malkaRecordingDomain=t.malkaRecordingDomain||null,this.textVisibilityEnabled=t.textVisibilityEnabled,this.experimental=t.experimental||{},this.malkaEtrEnabled=!!t.malkaEtrEnabled,this.malkaUrlEnabled=!!t.malkaUrlEnabled,this.recordingUrlRules=(h=t.recordingUrlRules)!==null&&h!==void 0?h:[],this.cookielessTrackingEnabled=t.cookielessTrackingEnabled,this.customHashIdEnabled=!!t.customHashIdEnabled,this.encryptionEnabled=!!t.recordingEncryptionEnabled,this.encryptionPublicKey=t.recordingEncryptionPublicKey||null,this.pathComputationRules=t.pathComputationRules||{},t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex===""&&(this.pathComputationRules.dynamicElementNameRegex=null),t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex&&(this.pathComputationRules.dynamicElementNameRegex=new csRegExp(t.pathComputationRules.dynamicElementNameRegex)),this.asyncSerializerEnabled=!!t.asyncSerializerEnabled,this.encryptionPublicKeyId=t.recordingEncryptionPublicKeyId,this.pendingInactivityTimeout=t.pendingInactivityTimeout||5e3,this.accessibilityEnabled=!!t.accessibilityEnabled,this.useStaticResourceManager=!!t.useStaticResourceManager,t.taskSchedulerOptions&&(this.taskSchedulerOptions=ct(j({},t.taskSchedulerOptions),{enabled:!!t.taskSchedulerOptions.enabled})),this.uxaDomain=t.uxaDomain,this.environment=((d=t.uxaDomain)===null||d===void 0?void 0:d.indexOf("staging"))>-1?"staging":"production",this.performanceTimingOptions=t.performanceTimingOptions,this.replayConsentRequiredForSession=!!t.replayConsentRequiredForSession,this.isWebView=!1,t.displayAdOptions&&t.displayAdOptions.length&&(this.displayAdOptions=t.displayAdOptions),t.voc&&(this.voc=ct(j({},t.voc),{enabled:!!t.voc.enabled})),this.vocData=t.vocData,t.heapEnvironment&&(this.heapEnvironment=t.heapEnvironment),t.implementations&&t.implementations.length&&(this.implementations=t.implementations),this.eventsApiEnabled=!!t.eventsApiEnabled,this.anonymizeDigits=(p=t.anonymizeDigits)!==null&&p!==void 0?p:null,this.isHeapPresent=window.heap!==void 0,this.recordTargetingRules=(y=t.recordTargetingRules)!==null&&y!==void 0?y:[],this.paProxyDomainUri=t.paProxyDomainUri||null,this.emitRecordInfoEvents=t.emitRecordInfoEvents!==!1,this.collectHierarchy=!!t.collectHierarchy,this.collectSubmit=!!t.collectSubmit,this.collectTargetText=(m=t.collectTargetText)!==null&&m!==void 0?m:Xn.Disabled,this.identityEncryptionKey=t.identityEncryptionKey||null,this.tagVerificationDomain=t.tagVerificationDomain,this.tagVerificationEnabled=!!t.tagVerificationEnabled,this.trackingCodeVerified=!!t.trackingCodeVerified,this.quotas=(v=t.quotas)!==null&&v!==void 0?v:null,this.startMode=(b=t.startMode)!==null&&b!==void 0?b:Nr.Automatic,this.eventEnricher=t.eventEnricher||null}getTrackerUri(){return`${this.Qs()}://${this.trackerDomain}`}getRecordingUri(){return`${this.Qs()}://${this.malkaRecordingDomain}`}getLoggerUri(){return`${this.Qs()}://${this.loggerDomain}`}getMetricsUri(){return`${this.Qs()}://${this.loggerDomain}/metrics`}getStaticResourceManagerUri(){return`${this.Qs()}://${this.staticResourceManagerDomain}`}getVerificationEndpoint(){return`${this.Qs()}://${this.tagVerificationDomain}`}getSettingsFileUri(){return this.settingsFileUri?this.settingsFileUri:`${this.Qs()}://${this.dynamicConfDomain}/${this.projectId}.json`}isQuotaEnabled(){return this.isSMB||this.quotas!==null}getPaProxyDomainUri(){return`${this.Qs()}://${this.paProxyDomainUri}`}Qs(){return this.useHttps?"https":"http"}isProjectActive(){return this.status===rp}processOptionOverrides(t){t&&t.forEach&&t.forEach(([e,...i])=>{if(e==="setOption"){let[n,o]=i;this.rv(n,o)}})}rv(t,e){t==="trackerDomain"&&(this.trackerDomain=e),t==="loggerDomain"&&(this.loggerDomain=e),t==="malkaRecordingDomain"&&(this.malkaRecordingDomain=e),t==="staticResourceManagerDomain"&&(this.staticResourceManagerDomain=e),t==="minLogLevel"&&(this.minLogLevel=e),t==="useHttps"&&(this.useHttps=!!e),t==="isWebView"&&(this.isWebView=e),t==="dynamicConfDomain"&&(this.dynamicConfDomain=e),t==="paProxyDomainUri"&&(this.paProxyDomainUri=e),t==="startMode"&&Os(e)&&csArray.prototype.includes.call(Object.values(Nr),e)&&(this.startMode=e)}getRequestParameters(){return{pid:`${this.projectId}`}}updateDynamicFields(t,e){t==="emitDebugEvents"&&(this.emitDebugEvents=e),t==="minLogLevel"&&(this.minLogLevel=e)}isCsSideloadingHeap(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="cs_sideloads_heap"&&!this.isHeapPresent}isHeapSideloadsCs(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="heap_sideloads_cs"}isHeapSideloadsCsV5(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="heap_sideloads_cs"&&this.nf()}isHeapSideloadsStartDataCollection(){if(this.isHeapSideloadsCs()){if(this.nf())return!0;let t=ep(this.getHeapVersion()||"");if(t&&t.major===4&&ip(t,{major:4,minor:23,patch:5}))return!0}return!1}nf(){var t;return typeof((t=window.heap)===null||t===void 0?void 0:t.getUserId)=="function"}getHeapVersion(){var t,e,i,n,o,c;return typeof((t=window.heap)===null||t===void 0?void 0:t.getConfig)=="function"&&((n=(i=(e=window.heap)===null||e===void 0?void 0:e.getConfig())===null||i===void 0?void 0:i.sdk)===null||n===void 0?void 0:n.version)||((c=(o=window.heap)===null||o===void 0?void 0:o.version)===null||c===void 0?void 0:c.heapJsVersion)||void 0}isCsCrosswritingHeap(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="cs_crosswrites_heap"}getHeapStorageLocation(){var t,e;return(e=(t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_storage_location)!==null&&e!==void 0?e:null}getHeapWebAppUri(){return this.getHeapStorageLocation()==="eu-west-1"?"https://eu.heapanalytics.com":"https://heapanalytics.com"}isCollectTargetTextEnabled(){return this.isSMB||this.collectTargetText!==Xn.Disabled}isNetworkDetailsEnabled(){return this.performanceTimingOptions?this.performanceTimingOptions.withResource||this.performanceTimingOptions.withNavigation:!1}hasRecordingUrlRules(){var t;return!!(!((t=this.recordingUrlRules)===null||t===void 0)&&t.length)}hasTargetingRules(){var t;return!!(!((t=this.recordTargetingRules)===null||t===void 0)&&t.length)}getHeapEnvId(){return this.heapEnvironment?this.heapEnvironment.env_id:""}}return s})();function F(s,r,t,e){var i=arguments.length,n=i<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,t):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,r,t,e);else for(var c=s.length-1;c>=0;c--)(o=s[c])&&(n=(i<3?o(n):i>3?o(r,t,n):o(r,t))||n);return i>3&&n&&Object.defineProperty(r,t,n),n}function op(){let s=new MutationObserver(r=>{r.forEach(t=>{J(t.removedNodes,e=>{e instanceof HTMLElement&&e.tagName==="CS-NATIVE-FRAME-HOLDER"&&(q.counters.pureWindowState.count("iframe-deletion"),ht.warn("<cs-native-frame-holder> deleted"),s.disconnect())})})});s.observe(document.body,{childList:!0})}function za(s){return typeof s!="function"?!1:s.toString().indexOf("[native code]")!==-1}function ap(){(!za(MutationObserver)||!za(MutationObserver.prototype.observe))&&q.counters.patchedNativeFunctions.count("MutationObserver")}function cp(){try{window.CSPureWindow&&op(),ap()}catch(s){}}var wt=(()=>{let s;return function(r){r.CURRENT_DOMAIN="CURRENT_DOMAIN";function t(l){let d=new csRegExp(`(^|;)[ ]*${l}=([^;]*)`).exec(document.cookie);return d?decodeURIComponent(d[2]):null}r.get=t;function e(l,h,d,p,y,m){let v=encodeURIComponent(`${h}`),b=d===r.CURRENT_DOMAIN?void 0:d,C=i(p),_=C?`;expires=${C.toUTCString()}`:"",T=";path=/",x=vt(b)?`;domain=${b}`:"",O=`${l}=${v}${_}${T}${x}`;return Z(y)&&y!==ns.NotSet&&(O=`${O};SameSite=${y}`),Z(m)&&m===ye.Yes&&(O=`${O};Secure`),document.cookie=O,!0}r.set=e;function i(l){return At(l)?new csDate(k.now()+l):l}r.toExpireDate=i;function n(l,h){t(l)&&e(l,"",h,new csDate(0)),t(l)&&e(l,"",h,new csDate(0),ns.None,ye.Yes)}r.remove=n;function o(){return document.cookie.length>0}r.isCookiePresent=o;function c(l,h){let d="_cs_root-domain",p=t(d);if(p!==null&&p!=="1")return p;let y=csString.prototype.split.call(window.location.hostname,"."),m=csArray.prototype.pop.call(y);for(;y.length&&(p===null||p==="1");)m=csArray.prototype.join.call([csArray.prototype.pop.call(y),m],"."),e(d,m,m,void 0,l,h),p=t(d);return n(d,m),m}r.getRootDomain=c}(s||(s={})),s})(),lp=(()=>{let s;return function(r){function t(){return window.navigator.vendor&&csString.prototype.indexOf.call(window.navigator.vendor,"Apple")>-1&&window.navigator.appVersion&&csString.prototype.indexOf.call(window.navigator.appVersion,"Version/12.")>-1}r.browserIsSafariV12=t}(s||(s={})),s})(),ns=(()=>{let s;return function(r){r.None="None",r.Lax="Lax",r.NotSet="X"}(s||(s={})),s})(),ye=(()=>{let s;return function(r){r[r.Yes=1]="Yes",r[r.No=0]="No"}(s||(s={})),s})(),Ur=(()=>{class s{constructor(t,e,i){this.E=t,this.C=e,this.Oi=i,this.Zc=!1,this.of=ns.NotSet,this.tl=ye.No}getSameSiteFlag(){return this.of}getSecureFlag(){return this.tl}getDomain(){return this.sl}getRootDomain(){return this.af}init(){if(this.E.cookielessTrackingEnabled)return;let t=this.nv(),e=this.ov();this.Zc=this.av(t,e),this.Zc?(this.of=t,this.tl=e):this.E.secureCookiesEnabled&&this.C.getUrlProtocol()==="https:"&&(this.tl=ye.Yes),this.af=this.cv(),this.sl=this.lv(this.af)}av(t,e){return lp.browserIsSafariV12()?!1:(wt.set(s.COOKIE_TEST_FOR_SAME_SITE,"Test same site",s.CURRENT_DOMAIN,void 0,t,e),wt.get(s.COOKIE_TEST_FOR_SAME_SITE)?(wt.remove(s.COOKIE_TEST_FOR_SAME_SITE,s.CURRENT_DOMAIN),!0):!1)}nv(){return this.C.getUrlProtocol()==="http:"?ns.Lax:this.Oi.isSameSiteNoneSecureNeeded()||this.E.crossDomainTracking?ns.None:ns.Lax}ov(){return this.C.getUrlProtocol()==="http:"?ye.No:this.E.secureCookiesEnabled||this.E.crossDomainTracking||this.Oi.isSameSiteNoneSecureNeeded()?ye.Yes:ye.No}isSameSiteSupported(){return this.Zc}set(t,e,i,n){let o=wt.toExpireDate(i),c=n?ye.Yes:this.getSecureFlag();wt.set(t,e,this.sl,o,this.getSameSiteFlag(),c)}get(t){let i=new csRegExp(`(^|;)[ ]*${t}=([^;]*)`).exec(document.cookie);return i?decodeURIComponent(i[2]):null}delete(t,e){let i=e||this.sl;wt.remove(t,i)}cv(){let t=this.Oi.isSameSiteNoneSecureNeeded()&&this.isSameSiteSupported(),e=t?ns.None:void 0,i=t?ye.Yes:void 0;return wt.getRootDomain(e,i)}lv(t){return this.E.allowSubdomains?t:wt.CURRENT_DOMAIN}}return s.CURRENT_DOMAIN="CURRENT_DOMAIN",s.COOKIE_TEST_FOR_SAME_SITE="_cs_same_site",s})(),Gs="_cs_t",Ga="1",hp=(()=>{class s{constructor(t,e){this.Tt=t,this.E=e,this.ha=!1,this.ua=!1}init(){if(!this.E.cookielessTrackingEnabled&&this.Tt.isTopWindowTracker()&&"cookie"in document){if(!this.Tt.isInIframeContext()&&wt.isCookiePresent()){this.ha=!0,this.ua=!1;return}if(wt.set(Gs,Ga,wt.CURRENT_DOMAIN),wt.get(Gs)!==null){this.ha=!0,this.ua=!1,wt.remove(Gs,wt.CURRENT_DOMAIN);return}wt.set(Gs,Ga,wt.CURRENT_DOMAIN,void 0,ns.None,ye.Yes),wt.get(Gs)!==null&&(this.ha=!0,this.ua=!0,wt.remove(Gs,wt.CURRENT_DOMAIN))}}areCookiesEnabled(){return this.ha}isSameSiteNoneSecureNeeded(){return this.ua}}return s})();function up(){let s="CSSessionStorageTest";try{return sessionStorage.setItem(s,s),sessionStorage.getItem(s)!==s?!1:(sessionStorage.removeItem(s),!0)}catch(r){return!1}}var dp=(()=>{class s{constructor(t,e){this.E=t,this.Oi=e}canTrack(){return this.E.isProjectActive()&&this.hv()&&this.cf()&&this.uv()}canTrackInChild(){return this.E.isProjectActive()&&this.fv()&&(this.cf()||this.pv())}uv(){return this.E.cookielessTrackingEnabled?up():this.Oi.areCookiesEnabled()}cf(){return vf(window.location.hostname,this.E.hostnames)}hv(){return!this.lf()&&this.gv()}fv(){return!this.lf()&&this.mv()}pv(){return window.location.protocol==="about:"&&window.location.hostname===""}lf(){return"visibilityState"in document&&document.visibilityState==="prerender"}gv(){return this.hf()&&this.yv()}mv(){return this.hf()}yv(){try{return!!window.localStorage}catch(t){return!1}}hf(){return"pageXOffset"in window&&"pageYOffset"in window&&"onpagehide"in window&&"JSON"in window&&"parse"in window.csJSON&&"stringify"in window.csJSON&&"addEventListener"in window&&"removeEventListener"in window&&"Node"in window&&"filter"in csArray.prototype&&"forEach"in csArray.prototype&&"querySelectorAll"in document&&"now"in csDate&&"keys"in Object&&"performance"in window&&"Map"in window&&"Set"in window}}return s})(),Al=":";function qa(s){let r=[],t=fp(s),e=csString.prototype.split.call(t,"/");for(let i of e)jt(i,Al)?csArray.prototype.push.call(r,{key:i,value:`CS_ANONYMIZED_${csString.prototype.toUpperCase.call(csString.prototype.slice.call(i,1))}`}):csArray.prototype.push.call(r,{key:i,value:null});return r}function fp(s){let r=s;return jt(s,"/")&&(r=csString.prototype.substring.call(r,1)),ii(s,"/")&&(r=csString.prototype.slice.call(r,0,-1)),r}var pp=/\b((?:profile|user|last|first|primary|primary(?:[/_+-]|%20)?last)(?:[/_+-]|%20)?(?:name)[/=])[^#;?&/]+/gi,gp="$1CS_ANONYMIZED_NAME",mp=(()=>{class s{constructor(t){this.D=t}anonymizeUrl(t,e={}){let i=e.maskingPatterns||[],n=e.partialMaskingPatterns||[],o=this.D.anonymizePII(t);if(o=this.D.anonymizeJwt(o),e.maskNames){let h=o;o=this.En(o),o!==h&&(q.counters.redactedPII.count("name"),q.counters.redactedPII.count("name-in-url"))}let c=this.Ev(o,i);if(c!==o)return q.counters.redactedPII.count("url"),c;let l=this.vv(o,n);return l!==o&&q.counters.redactedPII.count("url"),l}removeQueryString(t){let{path:e,queryString:i}=this.il(t);return i!==""?`${e}?`:e}il(t){let e=csString.prototype.indexOf.call(t,"?"),i,n="";return e!==-1?(i=csString.prototype.slice.call(t,0,e),n=csString.prototype.slice.call(t,e,t.length)):i=t,{path:i,queryString:n}}Ev(t,e){if(e.length===0)return t;let{path:i,queryString:n}=this.il(t),o=csString.prototype.split.call(i,"/");for(let c of e){let l=this.Sv(o,c);if(l!==null)return`${l}${n}`}return t}Sv(t,e){if(t.length<e.length)return null;let i=[];for(let n=0;n<t.length;n++){let o=t[n];if(n>=e.length){csArray.prototype.push.call(i,o);continue}let c=e[n].key;if(this.uf(c)){let l=e[n].value;csArray.prototype.push.call(i,l);continue}if(o===c){csArray.prototype.push.call(i,o);continue}return null}return csArray.prototype.join.call(i,"/")}vv(t,e){if(e.length===0)return t;let{path:i,queryString:n}=this.il(t),o=csString.prototype.split.call(i,"/");for(let c of e)o=this._v(o,c);return`${csArray.prototype.join.call(o,"/")}${n}`}_v(t,e){let i=[],n=0,c=t[0]==="http:"||t[0]==="https:"?2:0;for(let l=0;l<t.length;l++){let h=t[l],d=e[n].key;if(this.uf(d)&&l>=c){let p=e[n].value;csArray.prototype.push.call(i,h.length>0?p:""),n++,n===e.length&&(n=0);continue}if(h===d){csArray.prototype.push.call(i,h),n++,n===e.length&&(n=0);continue}for(let p=0;p<n;p++){let y=l-n+p;i[y]=t[y]}n=0,csArray.prototype.push.call(i,h)}for(let l=0;l<n;l++){let h=t.length-n+l;i[h]=t[h]}return i}uf(t){return jt(t,Al)}En(t){return csString.prototype.replace.call(t,pp,gp)}}return s})(),yp="spki",Wa="RSA-OAEP",Ep="SHA-256",Ya="AES-CTR",vp="SHA-1",Xa=190,_i=(()=>{let s;return function(r){var t;let e=!1,i=null,n,o=typeof TextEncoder!="undefined"?new TextEncoder:null,c;r.crypto=(t=ot.crypto)===null||t===void 0?void 0:t.subtle,r.MAX_DIGEST_INPUT_SIZE=100;function l(){return!e}r.isKeyImported=l;function h(){return i}r.getCryptoKey=h;function d(){var O,w;return((w=(O=ot.self.crypto)===null||O===void 0?void 0:O.subtle)===null||w===void 0?void 0:w.encrypt)!=null&&ot.self.CryptoKey!=null}r.isSupported=d;function p(O){return Q(this,null,function*(){n=r.crypto.importKey(yp,Qc(O),{name:Wa,hash:Ep},!1,["encrypt"]).catch(()=>(e=!0,null)),i=yield n,n=void 0,i||ht.warn(`Fail to import public key '${O}'`)})}r.importKey=p;function y(O){return Q(this,null,function*(){if(!d()||e)return null;yield n;let w=To(O);w.byteLength>Xa&&(w=w.slice(0,Xa));try{let H=yield r.crypto.encrypt({name:Wa},i,w);return Ia(H)}catch(H){return null}})}r.asymmetricEncrypt=y;function m(O,w){return Q(this,null,function*(){if(!d()||e)return null;let H={counter:w.initializationVector,name:Ya,length:64},$=o.encode(O);try{let tt=yield r.crypto.encrypt(H,w.cryptoKey,$);return Ia(tt)}catch(tt){return null}})}r.symmetricEncrypt=m;function v(O){return Q(this,null,function*(){let w=yield b(O);if(!w)throw new Error("Export secret failed");let H=yield y(w);if(!H)throw new Error("Encrypt secret failed");return H})}r.encryptSecret=v;function b(O){return Q(this,null,function*(){var w;if(!d())return null;try{return(w=(yield r.crypto.exportKey("jwk",O)).k)!==null&&w!==void 0?w:null}catch(H){return null}})}function C(){return Q(this,null,function*(){if(!d()||e)return null;try{return{cryptoKey:yield r.crypto.generateKey({name:Ya,length:128},!0,["encrypt","decrypt"]),initializationVector:ot.crypto.getRandomValues(new Uint8Array(16))}}catch(O){return null}})}r.generateSymmetricKey=C;function _(O){c=O}r.setDigestSalt=_;function T(O){return Q(this,null,function*(){O=csString.prototype.toLocaleLowerCase.call(csString.prototype.trim.call(O)),c&&(O=`${O}:${c}`);let w=o.encode(O);try{let H=yield r.crypto.digest(vp,w);return Bn(H)}catch(H){return null}})}r.digest=T;function x(){return ot.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["encrypt","decrypt"])}r.generateKeyPair=x}(s||(s={})),s})(),Pe=(()=>{let s;return function(r){r.REGEX="regex",r.START="start",r.NOT_START="not-start",r.END="end",r.NOT_END="not-end",r.CONTAIN="contain",r.NOT_CONTAIN="not-contain",r.EXACT="exact",r.NOT_EXACT="not-exact"}(s||(s={})),s})(),Je=(()=>{let s;return function(r){r.START="start",r.NOT_START="not-start",r.END="end",r.NOT_END="not-end",r.CONTAIN="contain",r.NOT_CONTAIN="not-contain",r.EXACT="exact",r.NOT_EXACT="not-exact"}(s||(s={})),s})(),ws=(()=>{let s;return function(r){r.replayRecordingUnmaskedUrlRegex="replayRecordingUnmaskedUrlRegex",r.replayRecordingMaskedUrlRegex="replayRecordingMaskedUrlRegex",r.replayRecordingUnmaskedUrlRegexRules="replayRecordingUnmaskedUrlRegexRules",r.replayRecordingMaskedUrlRegexRules="replayRecordingMaskedUrlRegexRules"}(s||(s={})),s})(),Vo=(()=>{class s{constructor(){this.rl=[]}setRegexRules(t){this.rl=csArray.prototype.filter.call(csArray.prototype.map.call(t,e=>this.wv(e)),e=>e!==null)}evaluateUrl(t){return csArray.prototype.some.call(this.rl,e=>this.df(t,e))}getMatchingRules(t){return csArray.prototype.map.call(csArray.prototype.filter.call(this.rl,e=>this.df(t,e)),e=>e.ruleInput)}df(t,e){var i,n;let o=this.Av(t,e);return!this.Tv(e)||!this.bv(e)?!1:!!(e!=null&&e.notOperator?!(!((i=e.regex)===null||i===void 0)&&i.test(o)):!((n=e.regex)===null||n===void 0)&&n.test(o))}Tv(t){let e=new csDate,i=t.startDate&&t.startDate>e,n=t.endDate&&t.endDate<e;return!i&&!n}bv(t){let e=t.samplingRate!==100,i=e&&Ns.boolean(t.samplingRate);return!e||i}da(t){return!jt(t,"http://")&&!jt(t,"https://")?`https://${t}`:t}Av(t,e){let i=yl(this.da(t));return i?e.ignoreQueryParams&&e.ignoreURIFragments?`${i.origin}${i.pathname}`:e.ignoreQueryParams?`${i.origin}${i.pathname}${i.hash}`:e.ignoreURIFragments?`${i.origin}${i.pathname}${i.search}`:t:t}fa(t){return t!=null&&t.ignoreCaseSensitivity?"i":""}wv(t){let e=null,i=!1;switch(t.operator){case Je.NOT_START:case Pe.NOT_START:i=!0;case Je.START:case Pe.START:e=new csRegExp(`^${t.value}`,this.fa(t));break;case Je.NOT_END:case Pe.NOT_END:i=!0;case Je.END:case Pe.END:e=new csRegExp(`${t.value}$`,this.fa(t));break;case Je.NOT_CONTAIN:case Pe.NOT_CONTAIN:i=!0;case Je.CONTAIN:case Pe.CONTAIN:case Pe.REGEX:e=new csRegExp(`${t.value}`,this.fa(t));break;case Je.NOT_EXACT:case Pe.NOT_EXACT:i=!0;case Je.EXACT:case Pe.EXACT:e=new csRegExp(`^${t.value}$`,this.fa(t));break;default:ht.warn(`compileRegexRule, unknown operator: ${t.operator}`)}if(e===null)return null;let n=t.startDate?this.ff(t.startDate):void 0,o=t.endDate?this.ff(t.endDate):void 0;return{regex:e,ignoreQueryParams:t.ignoreQueryParams,ignoreURIFragments:t.ignoreURIFragments,notOperator:i,samplingRate:t.samplingRate!==void 0?t.samplingRate:100,startDate:n,endDate:o,ruleInput:t}}ff(t){let e=new csDate(t);return isNaN(e.getTime())?void 0:e}}return s})(),Y=(()=>{let s;return function(r){r[r.RESIZE=0]="RESIZE",r[r.SCROLL=1]="SCROLL",r[r.MOUSEMOVE=2]="MOUSEMOVE",r[r.MOUSEDOWN=3]="MOUSEDOWN",r[r.MOUSEUP=4]="MOUSEUP",r[r.CLICK=5]="CLICK",r[r.MOUSEOVER=6]="MOUSEOVER",r[r.MOUSEOUT=7]="MOUSEOUT",r[r.CHANGE=10]="CHANGE",r[r.FOCUSIN=11]="FOCUSIN",r[r.FOCUSOUT=12]="FOCUSOUT",r[r.TAP=14]="TAP",r[r.KEYDOWN=15]="KEYDOWN",r[r.KEYUP=16]="KEYUP",r[r.COMMAND=17]="COMMAND",r[r.PERFORMANCE=19]="PERFORMANCE",r[r.DRAG=20]="DRAG",r[r.FLICK=21]="FLICK",r[r.KEYBOARD_NAVIGATION=22]="KEYBOARD_NAVIGATION",r[r.ZOOM=23]="ZOOM",r[r.VIEWPORT_SCALE=24]="VIEWPORT_SCALE",r[r.TEXT_HIGHLIGHT=25]="TEXT_HIGHLIGHT",r[r.DEAD_CLICK=30]="DEAD_CLICK",r[r.DEAD_ZOOM=31]="DEAD_ZOOM",r[r.PAGE_RELOAD=32]="PAGE_RELOAD",r[r.THRASHED_CURSOR=33]="THRASHED_CURSOR",r[r.BLANK_PAGE=34]="BLANK_PAGE",r[r.EXTERNAL_EVENT=35]="EXTERNAL_EVENT",r[r.SUBMIT=36]="SUBMIT",r[r.CUSTOM_EVENT=37]="CUSTOM_EVENT"}(s||(s={})),s})(),os=(()=>{let s;return function(r){r.APPCUES="appcues",r.CHAMELEON="chameleon",r.CONTENTSQUARE="contentsquare",r.SEGMENT="segment",r.WEB="web"}(s||(s={})),s})();function Sp(s){return s.tgtHM!==void 0}function Tl(s){return s.tgt!==void 0}function _p(s){return s.tgtLk!==void 0}function wp(s){return s.x!==void 0&&s.y!==void 0}function Ap(s){return s===os.APPCUES||s===os.CHAMELEON||s===os.CONTENTSQUARE||s===os.SEGMENT||s===os.WEB}var Tp=Math.pow(2,31);function bp(s,r=0){let l=r>>>0,h=s.length;for(let m=0;m<h-3;m+=4){let v=(csString.prototype.charCodeAt.call(s,m)&255|(csString.prototype.charCodeAt.call(s,m+1)&255)<<8|(csString.prototype.charCodeAt.call(s,m+2)&255)<<16|(csString.prototype.charCodeAt.call(s,m+3)&255)<<24)>>>0;v=Math.imul(v,3432918353),v=v<<15|v>>>17,v=Math.imul(v,461845907),l^=v,l=l<<13|l>>>19,l=Math.imul(l,5)+3864292196}let d=0,p=h&3,y=h-p;switch(p){case 3:d^=(csString.prototype.charCodeAt.call(s,y+2)&255)<<16;case 2:d^=(csString.prototype.charCodeAt.call(s,y+1)&255)<<8;case 1:d^=csString.prototype.charCodeAt.call(s,y)&255,d=Math.imul(d,3432918353),d=d<<15|d>>>17,d=Math.imul(d,461845907),l^=d}return l^=h,l^=l>>>16,l=Math.imul(l,2246822507),l^=l>>>13,l=Math.imul(l,3266489909),l^=l>>>16,l>>>0}function bl(s){return bp(s)+Tp>>>0}var Uo=(()=>{class s{constructor(){this.listeners=[]}addListener(t){csArray.prototype.push.call(this.listeners,t)}}return s})(),wi="|iframe|",Rp=(()=>{class s extends Uo{constructor(t,e,i,n){super(),this.Rv=t,this.Cv=e,this.Iv=i,this.Pv=n}emitIframeEvent(t,e,i){if(this.Ov(e)&&t===null){B.error(`iframeEventEmitter received event ${e} with null iframe, content:${csJSON.stringify(i)}`);return}switch(e){case Lt.ChildLogMessage:this.Nv(i);break;case Lt.AnalysisEvent:{let n=i,o=this.Rv.transformEvent(t,n);o.isUserEvent?this.Mv(o.event):this.Dv(o.event);break}case Lt.RecordingEvent:{let n=i,o=this.Pv.transformEvents(t,n);if(o.events.length===0)return;o.containsUserEvent?this.kv(o.events):this.xv(o.events);break}case Lt.JavascriptError:this.Lv(i);break;case Lt.ApiError:this.Uv(i);break;case Lt.DetailedApiError:this.jv(i);break;case Lt.CustomError:this.Hv(i);break;case Lt.EmerchandisingMessage:{let n=this.Iv.transformEvent(t,i);this.Bv(n);break}case Lt.Commands:{let n=this.Cv.transformEvent(t,i);this.Fv(n);break}case Lt.IntegrationCallback:this.$v(i);break;case Lt.StaticResource:this.zv(i);break;case Lt.TrackingContextRequestMessage:this.Gv(i);break;default:B.error(`Parent received unknown data type from iframe : ${csJSON.stringify(i)}`)}}Ov(t){let e=[Lt.AnalysisEvent,Lt.RecordingEvent,Lt.EmerchandisingMessage,Lt.Commands];return csArray.prototype.indexOf.call(e,t)!==-1}Nv(t){let{message:e,errorCode:i,level:n}=t;switch(n){case gt.debug:B.debug(e,i);break;case gt.warn:B.warn(e,!0,i);break;case gt.implementation:B.implementation(e,i);break;case gt.error:B.error(e,i);break;case gt.critical:B.critical(e,i);break}}Mv(t){for(let e of this.listeners)e.onIframeAnalysisUserEvent&&e.onIframeAnalysisUserEvent(t)}Dv(t){for(let e of this.listeners)e.onIframeAnalysisBrowserEvent&&e.onIframeAnalysisBrowserEvent(t)}kv(t){for(let e of this.listeners)e.onIframeRecordingUserEvent&&e.onIframeRecordingUserEvent(t)}xv(t){for(let e of this.listeners)e.onIframeRecordingBrowserEvent&&e.onIframeRecordingBrowserEvent(t)}Lv(t){for(let e of this.listeners)e.onIframeJavascriptError&&e.onIframeJavascriptError(t)}Uv(t){for(let e of this.listeners)e.onIframeApiError&&e.onIframeApiError(t)}jv(t){for(let e of this.listeners)e.onIframeDetailedApiError&&e.onIframeDetailedApiError(t)}Bv(t){for(let e of this.listeners)e.onIframeEmerchandisingMessage&&e.onIframeEmerchandisingMessage(t)}Fv(t){for(let e of this.listeners)e.onIframeCommands&&e.onIframeCommands(t)}$v(t){for(let e of this.listeners)e.onIframeIntegrationCallback&&e.onIframeIntegrationCallback(t)}zv(t){for(let e of this.listeners)e.onIframeStaticResource&&e.onIframeStaticResource(t)}Gv(t){for(let e of this.listeners)e.onTrackingContextRequestCallback&&e.onTrackingContextRequestCallback(t)}Hv(t){for(let e of this.listeners)e.onIframeCustomError&&e.onIframeCustomError(t)}}return s})(),Cp=(()=>{class s{constructor(t,e,i){this.et=t,this.pf=e,this.gf=i}transformEvent(t,e){this.qv(t,e.event);let i=this.et.getElementPath(t);return this.Wv(i,e.event),this.Yv(e.event),e}qv(t,e){if(wp(e)){let i=t.getBoundingClientRect();e.x=Math.round(i.left+e.x+Ct.windowOffsetX()),e.y=Math.round(i.top+e.y+Ct.windowOffsetY())}}Wv(t,e){Tl(e)&&(e.tgt=`${t}${wi}${e.tgt}`),Sp(e)&&(e.tgtHM=`${t}${wi}${e.tgtHM}`,this.pf||(e.tgtHMH=bl(e.tgtHM))),_p(e)&&(e.tgtLk=`${t}${wi}${e.tgtLk}`)}Yv(t){!this.pf&&this.gf&&this.gf.enhanceAnalysisEvent(null,t)}}return s})(),Ip=(()=>{class s{constructor(t){this.et=t}transformEvent(t,e){let i=this.et.getElementPath(t);return{iframePath:e.iframePath?`${i}${wi}${e.iframePath}`:i,commands:e.commands}}}return s})(),Pp=(()=>{class s{constructor(t){this.et=t}transformEvent(t,e){if(e.products.length===0)return e;let i=this.et.getElementPath(t),n=csArray.prototype.map.call(e.products,o=>ct(j({},o),{targetPath:`${i}${wi}${o.targetPath}`}));return ct(j({},e),{products:n})}}return s})(),Op=1,Ka=csSymbol("nodeIdentifier");function W(s){let r=s[Ka];return r!=null?r:s[Ka]=Op++}var L=(()=>{let s;return function(r){r[r.MUTATION_INSERT=1]="MUTATION_INSERT",r[r.MUTATION_REMOVE=2]="MUTATION_REMOVE",r[r.MUTATION_ATTRIBUTE=3]="MUTATION_ATTRIBUTE",r[r.MUTATION_CHARACTER_DATA=4]="MUTATION_CHARACTER_DATA",r[r.INITIAL_DOM=5]="INITIAL_DOM",r[r.SCROLL=6]="SCROLL",r[r.CLICK=8]="CLICK",r[r.RESIZE=9]="RESIZE",r[r.INPUT_CHECKABLE=10]="INPUT_CHECKABLE",r[r.INPUT_SELECT=11]="INPUT_SELECT",r[r.INPUT_TEXT=12]="INPUT_TEXT",r[r.HASH_CHANGE=13]="HASH_CHANGE",r[r.UNANONYMIZED_CONSENT_GRANTED=14]="UNANONYMIZED_CONSENT_GRANTED",r[r.UNANONYMIZED_CONSENT_WITHDRAWN=15]="UNANONYMIZED_CONSENT_WITHDRAWN",r[r.MOUSE_OVER=16]="MOUSE_OVER",r[r.VISIBILITY_CHANGE=17]="VISIBILITY_CHANGE",r[r.STYLESHEET_RULE_INSERT=18]="STYLESHEET_RULE_INSERT",r[r.STATIC_RESOURCE_URL=19]="STATIC_RESOURCE_URL",r[r.PERFORMANCE_TIMINGS=20]="PERFORMANCE_TIMINGS",r[r.ATTACH_SHADOW=22]="ATTACH_SHADOW",r[r.STYLESHEET_CSS_TEXT_UPDATE=23]="STYLESHEET_CSS_TEXT_UPDATE",r[r.JAVASCRIPT_ERROR=26]="JAVASCRIPT_ERROR",r[r.PAGE_EVENT=27]="PAGE_EVENT",r[r.API_ERROR=28]="API_ERROR",r[r.TEXT_VISIBILITY=29]="TEXT_VISIBILITY",r[r.MUTATION_ENCRYPTED_CHARACTER_DATA=30]="MUTATION_ENCRYPTED_CHARACTER_DATA",r[r.INPUT_ENCRYPTED_TEXT=31]="INPUT_ENCRYPTED_TEXT",r[r.KEY_DOWN=32]="KEY_DOWN",r[r.KEY_UP=33]="KEY_UP",r[r.CLIPBOARD_COMMAND=34]="CLIPBOARD_COMMAND",r[r.STYLESHEET_RULE_DELETE=37]="STYLESHEET_RULE_DELETE",r[r.USER_IDENTIFIER=38]="USER_IDENTIFIER",r[r.TOUCH_START=41]="TOUCH_START",r[r.TOUCH_MOVE=42]="TOUCH_MOVE",r[r.TOUCH_END=43]="TOUCH_END",r[r.GESTURE_RECOGNITION=44]="GESTURE_RECOGNITION",r[r.POINTER_DOWN=47]="POINTER_DOWN",r[r.POINTER_MOVE=48]="POINTER_MOVE",r[r.POINTER_UP=49]="POINTER_UP",r[r.CUSTOM_ERROR=50]="CUSTOM_ERROR",r[r.CUSTOM_ELEMENT_REGISTRATION=54]="CUSTOM_ELEMENT_REGISTRATION",r[r.REGISTER_ADOPTED_STYLE_SHEET=60]="REGISTER_ADOPTED_STYLE_SHEET",r[r.SET_ADOPTED_STYLE_SHEETS=61]="SET_ADOPTED_STYLE_SHEETS",r[r.ADOPTED_STYLESHEET_RULE_INSERT=62]="ADOPTED_STYLESHEET_RULE_INSERT",r[r.ADOPTED_STYLESHEET_RULE_DELETE=63]="ADOPTED_STYLESHEET_RULE_DELETE",r[r.SCREEN_RESIZE=65]="SCREEN_RESIZE",r[r.RESOURCE_HASHES=66]="RESOURCE_HASHES",r[r.PERFORMANCE_NAVIGATION_TIMING=67]="PERFORMANCE_NAVIGATION_TIMING",r[r.PERFORMANCE_RESOURCE_TIMING=68]="PERFORMANCE_RESOURCE_TIMING",r[r.RECORDING_INFO_EVENT=72]="RECORDING_INFO_EVENT",r[r.TEXT_REF=73]="TEXT_REF",r[r.TOUCH_CANCEL=74]="TOUCH_CANCEL",r[r.MUTATION_MOVE=75]="MUTATION_MOVE",r[r.STYLESHEET_RULE_UPDATE=76]="STYLESHEET_RULE_UPDATE",r[r.ADOPTED_STYLESHEET_RULE_UPDATE=77]="ADOPTED_STYLESHEET_RULE_UPDATE",r[r.VIDEO_PLAY=78]="VIDEO_PLAY",r[r.VIDEO_PAUSE=79]="VIDEO_PAUSE",r[r.VIDEO_SEEK=80]="VIDEO_SEEK",r[r.ADOPTED_STYLESHEET_DISABLED=98]="ADOPTED_STYLESHEET_DISABLED",r[r.STYLESHEET_DISABLED=99]="STYLESHEET_DISABLED",r[r.DOM_INITIAL_STATE=102]="DOM_INITIAL_STATE",r[r.DOM_PATCH_STATE=103]="DOM_PATCH_STATE",r[r.DEBUG=999]="DEBUG"}(s||(s={})),s})();var mi=(()=>{let s;return function(r){r[r.SWIPE=0]="SWIPE",r[r.PINCH_IN=1]="PINCH_IN",r[r.PINCH_OUT=2]="PINCH_OUT",r[r.LONG_PRESS=3]="LONG_PRESS",r[r.TAP=4]="TAP",r[r.DOUBLE_TAP=5]="DOUBLE_TAP"}(s||(s={})),s})(),Np=(()=>{class s{constructor(){this.Xv={clientX:2,clientY:3},this.Kv={clientX:1,clientY:2},this.Jv=[L.POINTER_DOWN,L.POINTER_MOVE,L.POINTER_UP],this.Qv=[L.TOUCH_START,L.TOUCH_MOVE,L.TOUCH_END]}transformEvents(t,e){if(!lt.isConnected(t))return e.events=csArray.prototype.filter.call(e.events,c=>c.type!==L.VISIBILITY_CHANGE),e.events.length===0||(B.warn(`IframeRecordingEventsTransformer received event ${Lt.RecordingEvent}
        from disconnected iframe, content:${csJSON.stringify(e.events)}`),e.events=[]),e;let i=W(t),n=null;csArray.prototype.some.call(e.events,c=>this.mf(c)||this.yf(c))&&(n=t.getBoundingClientRect());for(let c of e.events)this.mf(c)?this.Zv(n,c):this.yf(c)&&this.tS(n,c),c.context=c.context&&c.context.length>0?`${i}/${c.context}`:`${i}`;return e}tS(t,e){this.Ef(this.Kv,t,e)}Zv(t,e){this.Ef(this.Xv,t,e)}Ef(t,e,i){i.args&&(i.args[t.clientX]=Math.round(e.left+i.args[t.clientX]),i.args[t.clientY]=Math.round(e.top+i.args[t.clientY]))}mf(t){return csArray.prototype.indexOf.call(this.Jv,t.type)!==-1}yf(t){return csArray.prototype.indexOf.call(this.Qv,t.type)!==-1}}return s})(),$t=(()=>{class s extends Error{constructor(t,e){let i=e?`Command misuse: ${t} - ${e}`:`Command misuse: ${t}`;super(i),this.name="MisusedCommandError"}}return s})(),fn;function Ut(s){if(fn||(fn=document.createElement("div")),!(!!s&&I(s)))return ht.warn(`isValidSelector: invalid selector provided '${s}'`),!1;try{return Zt.call(fn,s),!0}catch(t){return ht.warn(`isValidSelector: invalid selector provided '${s}'`),!1}}function ti(s,r){if(Va)return Va.call(s,r);let t=s;do{if(Zt.call(t,r))return t;t=t==null?void 0:t.parentElement}while(t!==null&&csNodenodeType.apply(t)===1);return null}function as(s){if(!s)return s;switch(typeof s){case"object":{if(csArray.isArray(s))return csArray.from(s);let r={};for(let t in s)r[t]=as(s[t]);return r}default:return s}}function Rl(s){for(let r in s)if(s[r]!==void 0)return!0;return!1}function Cl(s,r){if(csArray.isArray(s)&&csArray.isArray(r))return s.length!==r.length||csArray.prototype.some.call(s,(i,n)=>i!==r[n])?as(r):void 0;let t={},e=new Set([...Object.keys(s||{}),...Object.keys(r||{})]);for(let i of e){let n=s[i],o=r[i];if(n===o)continue;let c=typeof n;if(c!==typeof o)n===void 0&&o!==void 0?t[i]=o:n!==void 0&&o===void 0&&(t[i]=null);else if(c==="object"&&n&&o){let h=Cl(n,o);h!==void 0&&(t[i]=h)}else t[i]=as(o)}return Rl(t)?t:void 0}function Il(s,r){let t=j({},s);for(let[e,i]of Object.entries(r))if(i===null)delete t[e];else if(i!==void 0){let n=t[e],o=i;n&&typeof n=="object"&&o&&typeof o=="object"&&!csArray.isArray(n)&&!csArray.isArray(o)?t[e]=Il(n,o):t[e]=o}return t}function Pl(s){let r=null;return t=>t?r=t:r||(r=s())}var Mp=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]);function Dp(s){return csString.prototype.indexOf.call(s,"-")>0&&csString.prototype.indexOf.call(s,":")===-1&&csString.prototype.indexOf.call(s,'"')===-1&&csString.prototype.indexOf.call(s,",")===-1&&!Mp.has(s)}var qs=Pl(()=>new WeakMap),pn=Pl(()=>new Set),hs=(()=>{let s;return function(r){function t(d){return qs().get(d)}r.getAll=t;function e(d,p){var y;return(y=qs().get(d))===null||y===void 0?void 0:y[p]}r.get=e;function i(d,p,y){let m=qs().get(d);m||qs().set(d,m={}),m[p]=y,c(d)}r.set=i;function n(d,p){let y=qs().get(d);y&&(delete y[p],c(d))}r.remove=n;function o(){qs(new WeakMap)}r.reset=o;function c(d){for(let p of pn())p(d)}function l(d){pn().add(d)}r.subscribe=l;function h(d){pn().delete(d)}r.unsubscribe=h}(s||(s={})),s})(),at=(()=>{let s;return function(r){function t(l,h,d){var p;if(typeof Node!="undefined"&&l instanceof Node)hs.set(l,h,d);else{let y=l;(p=y.props)!==null&&p!==void 0||(y.props={}),y.props[h]=d}}r.setProperty=t;function e(l,h){var d;return typeof Node!="undefined"&&l instanceof Node?hs.get(l,h):(d=l.props)===null||d===void 0?void 0:d[h]}r.getProperty=e;function i(l){return typeof Node!="undefined"&&l instanceof Node?hs.getAll(l):l.props}r.getProperties=i;function n(l,h){let d=null;return o(l,(p,y,m)=>h(p)&&(d=p)&&!!m()),d}r.findDescendant=n;function o(l,h){c(l,void 0,h)}r.traverse=o;function c(l,h,d){let p=!1;if(d(l,h,()=>p=!0),p)return;let m=l.shadowRoot;m&&c(m,l,d);let v=l.children;if(v!=null&&v.length){for(let b of v)if(b&&(c(b,l,d),p))break}}}(s||(s={})),s})(),D=(()=>{let s;return function(r){let t;(function(_){_[_.NotMasked=0]="NotMasked",_[_.Parent=1]="Parent",_[_.Child=2]="Child"})(t=r.MaskedElementState||(r.MaskedElementState={})),r.maskedProp="masked",r.maskedAttributeProp="maskedAttribute";function e(_){return Qs(_)&&"Attributes"in _&&"PIISelectors"in _?_.Attributes instanceof Array&&_.PIISelectors instanceof Array:!1}r.isSelectorUserInput=e;function i(_){if(!Qs(_)||_===null)throw new $t("setPIISelectors");return"Attributes"in _||(_.Attributes=[]),"PIISelectors"in _||(_.PIISelectors=[]),_}r.sanitizeSelectorUserInput=i;function n(_){var T,x,O;return"nodeType"in _?(T=at.getProperty(_,r.maskedProp))!==null&&T!==void 0?T:{state:t.NotMasked}:(O=(x=_.metadata)===null||x===void 0?void 0:x[r.maskedProp])!==null&&O!==void 0?O:{state:t.NotMasked}}r.getMaskedElementDetails=n;function o(_){var T,x,O;return"nodeType"in _?(T=at.getProperty(_,r.maskedAttributeProp))!==null&&T!==void 0?T:{attributes:[]}:(O=(x=_.metadata)===null||x===void 0?void 0:x[r.maskedAttributeProp])!==null&&O!==void 0?O:{attributes:[]}}r.getMaskedAttributeDetails=o;function c(_){let T=at.getProperty(_,r.maskedProp);return(T==null?void 0:T.state)===t.Parent}r.isMaskedElement=c;function l(_){let T=at.getProperty(_,r.maskedProp);return(T==null?void 0:T.state)===t.Child}r.isMaskedElementChild=l;function h(_,T){let x=at.getProperty(_,r.maskedAttributeProp);return((x==null?void 0:x.attributes)==null?void 0:csArray.prototype.indexOf.call(x==null?void 0:x.attributes,T))>-1}r.isMaskedAttribute=h;function d(_,T){at.setProperty(_,r.maskedProp,T)}r.setMaskedElementProperty=d;function p(_){at.setProperty(_,r.maskedProp,void 0)}r.unsetMaskedElementProperty=p;function y(_,T){at.setProperty(_,r.maskedAttributeProp,T)}r.setMaskedAttributeProperty=y;function m(_,T){let x=csArray.prototype.filter.call(_.PIISelectors,H=>Ut(H));T.elementSelector.length>0&&csArray.prototype.push.call(x,...csString.prototype.split.call(T.elementSelector,","));let O=C([...x]),w={elementSelector:csArray.prototype.join.call(O,","),attrSelector:T.attrSelector,attrSelectors:T.attrSelectors};return csArray.prototype.forEach.call(_.Attributes,H=>{H!=null&&H.attrName&&(H!=null&&H.selector)&&Ut(H.selector)&&!v(w.attrSelectors,H)&&csArray.prototype.push.call(w.attrSelectors,H)}),w.attrSelector=b(w.attrSelectors),w}r.getComputedSelectorSettings=m;function v(_,T){return csArray.prototype.some.call(_,x=>x.selector===T.selector&&x.attrName===T.attrName)}function b(_){let T="";return csArray.prototype.forEach.call(_,x=>{let O=csString.prototype.split.call(x.selector,",");csArray.prototype.forEach.call(O,w=>{Ut(w)&&(T&&(T+=","),T+=w)})}),T}function C(_){if(_.length<=1)return _;let T=[];for(let x of _){let O=csString.prototype.split.call(x,",");for(let w of O)csArray.prototype.indexOf.call(T,w)===-1&&csArray.prototype.push.call(T,w)}return T}}(s||(s={})),s})(),kp=(()=>{class s{constructor(){this.pa={elementSelector:"",attrSelector:"",attrSelectors:[]},this.nl={elementSelector:"",attrSelector:"",attrSelectors:[]},this.eS=window.top===window?"pii-migration":"pii-migration-iframe",this.vf=!1}onAfterNaturalPageView(){this.Sf()}onParentSensitiveStatusChange(t){t.started&&!this.vf&&(this.vf=!0,t.maskedElementSettings&&(this.pa=t.maskedElementSettings),this.Sf())}Sf(){var t,e;let i=this._f(this.pa),n=this._f(this.nl),o=csArray.prototype.filter.call(n.elementSelectors,l=>csArray.prototype.indexOf.call(i.elementSelectors,l)===-1&&l!=="[data-cs-mask]"),c={};for(let[l,h]of Object.entries(n.attrSelectors)){let d=i.attrSelectors[l]||[],p=csArray.prototype.filter.call(h,y=>csArray.prototype.indexOf.call(d,y)===-1);p.length>0&&(c[l]=p)}(o.length>0||Object.keys(c).length>0)&&(B.computeIsActive(100),B.warn(csJSON.stringify({selectors:o,attrs:c}),!0,this.eS),B.computeIsActive((e=(t=window.CS_CONF)===null||t===void 0?void 0:t.validationRate)!==null&&e!==void 0?e:10))}_f(t){let e=csString.prototype.trim.call(t.elementSelector).length>0?csArray.prototype.filter.call(csArray.prototype.map.call(csString.prototype.split.call(t.elementSelector,","),n=>csString.prototype.trim.call(n)),n=>n.length>0):[],i={};for(let n of t.attrSelectors)i[n.attrName]=csArray.prototype.filter.call(csArray.prototype.map.call(csString.prototype.split.call(n.selector,","),o=>csString.prototype.trim.call(o)),o=>o.length>0);return{elementSelectors:e,attrSelectors:i}}markClicktalePIIInUse(t){this.nl=D.getComputedSelectorSettings(t,this.nl)}markPIIMaskingTemplateInUse(t){let e=D.sanitizeSelectorUserInput(t);this.pa=D.getComputedSelectorSettings(e,this.pa)}}return F([N()],s.prototype,"markPIIMaskingTemplateInUse",null),s})(),xp=(()=>{class s{constructor(t,e){this.S=t,this.yt=e}init(){this.yt.addListener(this.S)}onOptout(){this.S.stop()}onBeforeSessionRenewal(){this.S.stop()}}return s})();var zt=(()=>{class s{constructor(){this._isStarted=!1}get isStarted(){return this._isStarted}start(...t){this._isStarted||(this._isStarted=!0,this.onStart(...t))}stop(){this._isStarted&&(this._isStarted=!1,this.onStop())}restart(){this.stop(),this.start()}}return s})(),Lp=(()=>{let s;return function(r){r.UXA="_uxa",r.WVT="cs_wvt"}(s||(s={})),s})(),Vp=(()=>{class s extends zt{constructor(t,e){super(),this.ol=t,this.al=e,this.cs={}}register(t,e,i){for(let n of t){let o=(...c)=>{try{let l=e(...c);return q.counters.commandApplied.count(n),l}catch(l){l instanceof $t?(q.counters.commandMisuse.count(n),B.warn(`Misused Command: ${n}; Args: ${csJSON.stringify(c)}; Error: ${Le(l)?l.stack:l}`)):(q.counters.commandError.count(n),B.error(`Command Error - ${n}: ${Le(l)?l.stack:l}`))}};this.cs[n]={callback:o,configuration:i},this.cs}}onStart(){this.sS(),this.iS()}onStop(){for(let t of this.ol)window[t]=[]}applyFromIntegration(t,e,i){this.wf(t,e,`Commands.apply.from.integration: ${i}`),q.counters.commandsFromIntegrations.count(t)}applyFromImplementation(t,e,i){var n;this.wf(t,e,`Commands.apply.from.implementation: ${i}`),q.counters.commandsFromCSTC.count(t),i==="PIIMaskingTemplate"&&((n=this.al)===null||n===void 0||n.markPIIMaskingTemplateInUse(e[0]))}onIframeCommands(t){for(let e of t.commands)this.rS(e.name,e.params,t.iframePath),q.counters.commandsFromIframe.count(e.name)}wf(t,e,i){if(!this.isStarted){window._uxa.push([t,...e]);return}B.tryToExecute(i,()=>{if(this.cs[t])return this.cs[t].callback(...e)})()}rS(t,e,i){B.tryToExecute(`Commands.apply.from.iframe: ${i}`,()=>{if(this.cs[t])return this.cs[t].callback(...e)})()}sS(){for(let t of this.ol)window[t].forEach(([e,...i])=>this.Af(e,i,!1))}iS(){for(let t of this.ol)window[t]={push:([e,...i])=>this.Af(e,i,!0)}}Af(t,e,i){var n,o;if(this.cs[t]){if(((n=this.cs[t].configuration)===null||n===void 0?void 0:n.disableApplyPending)&&!i||((o=this.cs[t].configuration)===null||o===void 0?void 0:o.disableApplyImmediate)&&i)return;try{return this.cs[t].callback(...e)}catch(l){B.error(`Command ${t} failed - params: ${csJSON.stringify(e)}`,l)}}}}return s})(),Up=(()=>{class s extends Uo{emitPageEvent(t){for(let e of this.listeners)e.onPageEvent&&e.onPageEvent(t)}emitEventTriggerRecording(t,e){for(let i of this.listeners)i.onEventTriggerRecording&&i.onEventTriggerRecording(t,e)}emitCustomJavaScriptErrorEvent(t){for(let e of this.listeners)e.onCustomJavaScriptErrorEvent&&e.onCustomJavaScriptErrorEvent(t)}emitCustomErrorEvent(t){for(let e of this.listeners)e.onCustomErrorEvent&&e.onCustomErrorEvent(t)}emitUserIdentifierEvent(t){for(let e of this.listeners)e.onUserIdentifierEvent&&e.onUserIdentifierEvent(t)}emitExternalEvent(t){for(let e of this.listeners)e.onExternalEvent&&e.onExternalEvent({type:Y.EXTERNAL_EVENT,name:t,ts:0})}emitTargetingRulesArtificialPageview(t){for(let e of this.listeners)e.onTargetingRulesArtificialPageview&&e.onTargetingRulesArtificialPageview(t)}}return s})();function jp(s){return csNodenodeType.apply(s)===1}function Pt(s){let r=csEventtarget.apply(s);return r&&jp(r)&&csElementshadowRoot.apply(r)&&s.composedPath?s.__csOriginalTarget||s.composedPath()[0]:r}function Hp(s){return s.composedPath&&Object.defineProperty(s,"__csOriginalTarget",{value:s.composedPath()[0],writable:!1,enumerable:!1}),s}function Bp(){return(s,r,t)=>{let e=t.value;return e&&(t.value=function(i){if(Pt(i)===csEventtarget.apply(i))return e.call(this,i)}),t}}var Fp=["class","data-com.agilebits.onepassword.initial-value","data-com.onepassword.iv","data-ember-action","data-initial-value","data-previous-value","data-react-checksum","data-reactid","id","maxlength","onclick","onsubmit","style"],$p=1024,zp=1024,Gp=(()=>{class s{constructor(t,e){this.gt=t,this.E=e}getEventTargetPathAndHierarchy(t,e){let i=Pt(t),n={isNodeSensitive(o){return D.isMaskedElement(o)||D.isMaskedElementChild(o)},isAttributeSensitive(o,c){return D.isMaskedAttribute(o,c)},allWhitelistedAttributes:Lo(this.E.whitelistedAttributes),attributeIgnoreTokens:Fp,useAnonymization:e,attrMaxLength:zp,hierarchyMaxLength:$p};return this.gt.getElementPathAndHierarchy(i,n,j({dynamicIdRegex:this.E.dynamicIdRegex},this.E.pathComputationRules))}getEventTargetPath(t){let e=Pt(t);return this.gt.getElementPath(e,j({dynamicIdRegex:this.E.dynamicIdRegex},this.E.pathComputationRules))}getEventTargetPathAndTargetLink(t){let e=Pt(t),{path:i,firstAnchorParent:n}=this.gt.getElementPathAndFirstAnchorParent(e,j({dynamicIdRegex:this.E.dynamicIdRegex},this.E.pathComputationRules)),o=this.nS(n)?n.href:"";return{path:i,targetLink:o}}hasValidEventTarget(t){let e=Pt(t);return this.gt.isValidElement(e)}getElementPath(t){return this.gt.getElementPath(t,j({dynamicIdRegex:this.E.dynamicIdRegex},this.E.pathComputationRules))}nS(t){var e;return t!==null&&t.hasAttribute("href")&&!Yn((e=t.getAttribute("href"))!==null&&e!==void 0?e:"","#")}}return s})();function jr(s,r){typeof r=="number"&&(r={wait:r});let t=r.wait,e=r.mode||"leading",i,n=[],o=null,c=0,l,h=()=>{c=k.now(),o=null,l=s.apply(i,n),n=[],i=null},d=function(...p){if(i=this!==null&&this!==void 0?this:ot,n=[...p],e==="trailing")return o||(o=ot.csSetTimeout(h,t)),l;let y=k.now(),m=t-(y-c);return m<=0||m>t?(c=y,l=s.apply(i,n),o?(ot.csClearTimeout(o),o=null):n=[]):o||(o=ot.csSetTimeout(h,m)),l};return d.cancel=()=>{o&&(ot.csClearTimeout(o),c=0,o=null,n=[])},d.flushPending=()=>{o&&(ot.csClearTimeout(o),h())},d}var ji=s=>(r,t,e)=>{e.value=jr(e.value,s)};var Mr=".",jo="__DOT__",qp=/^(([a-z0-9\-])+(\.[0-9]+){6})(\.[0-1])?(\.\b(x|[0-9a-fA-F]{12})\b)?$/,Ol="x";function Wp(s){let[r,t,e,i,n,o,c,l,h]=Qp(s);return{id:r,creationTimestamp:Number(t),visitsCount:Number(e),hitTimestamp:Number(i),lastVisitTimestamp:Number(n),appliedTrackingDraw:Number(o),expires:Number(c),allowSubdomains:l===void 0?void 0:!!Number(l),identityPrint:h===void 0||h===Ol?null:h}}function Yp(s){var r;return csArray.prototype.join.call(csArray.prototype.map.call(csArray.prototype.map.call([s.id,s.creationTimestamp,s.visitsCount,s.hitTimestamp,s.lastVisitTimestamp,s.appliedTrackingDraw,s.expires,s.allowSubdomains?1:0,(r=s.identityPrint)!==null&&r!==void 0?r:Ol],csString),Kp),Mr)}function Xp(s){return qp.test(s)}function Kp(s){return csString.prototype.replace.call(s,/\./g,jo)}function Jp(s){return csString.prototype.replace.call(s,new csRegExp(jo,"g"),Mr)}function Qp(s){return csString.prototype.indexOf.call(s,jo)!==-1?csArray.prototype.map.call(csString.prototype.split.call(s,Mr),Jp):csString.prototype.split.call(s,Mr)}var M=(()=>{let s;return function(r){r.QUOTA_REACHED="X",r.RECORDING_RULES_TARGETING="8",r.ANALYTICS_ONLY_RULES_TARGETING="9",r.ANALYTICS_ONLY_RECORDING_PENDING_RULES_TARGETING="P",r.ANALYTICS_ONLY="0",r.RECORDING_GLOBAL_SAMPLING="5",r.RECORDING_TEMPORARILY="T",r.RECORDING_URL_SAMPLING="6",r.RECORDING_ETR_SAMPLING="7",r.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED="B",r.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN="W"}(s||(s={})),s})();function Zp(s){return s===M.RECORDING_TEMPORARILY||s===M.ANALYTICS_ONLY_RECORDING_PENDING_RULES_TARGETING}function Nl(s){return s===M.RECORDING_GLOBAL_SAMPLING||s===M.RECORDING_RULES_TARGETING||s===M.RECORDING_URL_SAMPLING||s===M.RECORDING_ETR_SAMPLING}var tg={[M.RECORDING_RULES_TARGETING]:M.RECORDING_GLOBAL_SAMPLING},oe=(()=>{let s;return function(r){r.ETR_OFF="0",r.ETR_ON="1"}(s||(s={})),s})(),us=(()=>{let s;return function(r){r.ETR_LEGACY="0",r.ETR_SESSION="1",r.ETR_PAGE="2"}(s||(s={})),s})(),Qt=(()=>{let s;return function(r){r.ETR_DISABLED="0",r.ETR_PENDING="1",r.ETR_SAVED_PAGE="2",r.ETR_SAVED_SESSION="3",r.ETR_NOT_SAVED_SESSION="9"}(s||(s={})),s})(),Kn=(()=>{let s;return function(r){r.UNNECESSARY="U",r.NOT_EXPRESSED="N",r.WITHDRAWN="W",r.GRANTED="G"}(s||(s={})),s})(),Ml=/^(\d+\.[01356789TBWXP](\.[01UNWG])?(\.[39])?)(\.\d+)?$/,Dl=".";function eg(s){return csArray.prototype.join.call([s.pageNumber,s.collectState,s.replayConsent,s.etrStatus],Dl)}function sg(s){if(!Ho(s))return null;let r=Jn(s);return r!==null?kl(r):null}function kl(s){var r,t;let[e,i,n,o]=csString.prototype.split.call(s,Dl);return{collectState:i,replayConsent:(r=n)!==null&&r!==void 0?r:Kn.UNNECESSARY,etrStatus:(t=o)!==null&&t!==void 0?t:Qt.ETR_NOT_SAVED_SESSION,pageNumber:parseInt(e,10)}}function Ho(s){return Ml.test(s)}function Jn(s){if(!s)return null;let r=(()=>{var t;return(t=csString.prototype.match.call(s,Ml))===null||t===void 0?void 0:t[1]})();return r!=null?r:null}var Oe="_cs_ex",Ja=2592e6,ig=/^[0-9]+$/,rg=(()=>{class s{constructor(t,e,i){this.E=t,this.M=e,this.K=i}onCookieToSet(t){this.Ni=t}onCookieToRemove(t){this.Mi=t}get(){return this.E.cookielessTrackingEnabled?Number(this.K.getItem(Oe)):Number(this.M.get(Oe))}set(t){var e;this.E.cookielessTrackingEnabled?this.K.setItem(Oe,t):(this.M.set(Oe,t,Ja),(e=this.Ni)===null||e===void 0||e.call(this,Oe,t,Ja))}remove(){var t;this.E.cookielessTrackingEnabled?this.K.removeItem(Oe):(this.M.delete(Oe),(t=this.Mi)===null||t===void 0||t.call(this,Oe))}static isValidExclusionString(t){return ig.test(t)}}return s})(),Qe="_cs_cvars",ng=(()=>{class s{constructor(t,e,i){this.E=t,this.M=e,this.K=i}onCookieToSet(t){this.Ni=t}onCookieToRemove(t){this.Mi=t}get(){return this.E.cookielessTrackingEnabled?this.K.getItem(Qe):this.M.get(Qe)}set(t){var e;this.E.cookielessTrackingEnabled?this.K.setItem(Qe,t):(this.M.set(Qe,t),(e=this.Ni)===null||e===void 0||e.call(this,Qe,t))}remove(){var t;this.E.cookielessTrackingEnabled?this.K.removeItem(Qe):(this.M.delete(Qe),(t=this.Mi)===null||t===void 0||t.call(this,Qe))}static isValidCustomVarString(t){return typeof t=="string"}}return s})();var og=(()=>{class s{constructor(t,e,i,n,o,c,l){this.w=t,this.S=e,this.gl=i,this.ml=n,this.ls=o,this.uS=c,this._n=l}start(){this.w.addListener(this.uS),this.w.addListener(this._n),this.w.addListener(this.gl),this._n.init(),this.ml.init(),this.ls.init(),!this.ls.isActive()&&this.S.start()}}return s})(),ag=(()=>{class s{constructor(t){this.Rs=t}onOptout(){this.Rs.removeExclusion()}}return s})(),cg=(()=>{class s{constructor(t,e){this.xt=t,this.ft=e}exclude(t){this.ft.set(csString(t.lastTrackingDraw))}removeExclusion(){this.ft.remove()}isExcluded(){return this.dS()||this.fS()}dS(){return this.getAppliedTrackingDraw()!==0}getAppliedTrackingDraw(){return this.ft.get()}fS(){return csString.prototype.indexOf.call(this.xt.href,Oe)>0}}return s})(),xl=["excludeURLforReplay"],lg=(()=>{class s{constructor(t,e){this.Rs=t,this.S=e}init(){this.S.register(xl,t=>{if(I(t))this.Rs.setExcludeUrlForSessionReplay(t);else throw new $t("excludeURLforReplay")})}}return s})(),gn=(()=>{let s;return function(r){r.SessionReplay="SR",r.None=""}(s||(s={})),s})(),hg=".^",Ll=".*",ug=(()=>{class s{constructor(t){this.C=t,this.yl=new csRegExp(`${hg}`)}setExcludeUrlForSessionReplay(t){try{this.yl=new csRegExp(t)}catch(e){B.warn(`excludeURLforReplay - invalid regex '${t}'`),this.yl=new csRegExp(`${Ll}`)}}Df(){return this.yl.test(this.C.getAnonymizedUrl())?gn.SessionReplay:gn.None}isUrlExcludedForSessionReplay(){return this.Df()===gn.SessionReplay}getRequestParameters(){return{ex:this.Df()}}}return s})();var Qa=1/0,{toString:dg}=Object.prototype;function fg(s){return s==null?s===void 0?"[object Undefined]":"[object Null]":dg.call(s)}var Bo=s=>typeof s=="symbol"||typeof s=="object"&&s!=null&&fg(s)==="[object Symbol]";function Vl(s){if(typeof s=="string"||Bo(s))return s;let r=`${s}`;return typeof s=="number"?r==="0"&&1/s===-Qa?"-0":r:s instanceof Number&&r==="0"&&1/s.valueOf()===-Qa?"-0":r}var pg=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,gg=/^\w*$/;function mg(s,r){return csArray.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||Bo(s)?!0:gg.test(s)||!pg.test(s)||r!=null&&s in Object(r)}function Fo(s,r){if(typeof s!="function"||r!=null&&typeof r!="function")throw new TypeError("Expected a function");let t=function(...e){let i=r?r.apply(this,e):e[0],{cache:n}=t;if(n.has(i))return n.get(i);let o=s.apply(this,e);return t.cache=n.set(i,o)||n,o};return t.cache=new(Fo.Cache||Map),t}Fo.Cache=Map;var yg=500;function Eg(s){let r=Fo(s,t=>{let{cache:e}=r;return e.size===yg&&e.clear(),t});return r}var vg=46,Sg=/\\(\\)?/g,_g=csRegExp(`[^.[\\]]+|\\[(?:([^"'][^[]*)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))`,"g"),Ul=Eg(s=>{let r=[];return csString.prototype.charCodeAt.call(s,0)===vg&&csArray.prototype.push.call(r,""),csString.prototype.replace.call(s,_g,(t,e,i,n)=>{let o=t;return i?o=csString.prototype.replace.call(n,Sg,"$1"):e&&(o=csString.prototype.trim.call(e)),csArray.prototype.push.call(r,o),t}),r});function wg(s,r){return csArray.isArray(s)?s:mg(s,r)?[s]:Ul(s)}function Ag(s,r){let t=wg(r,s),e=s,i=0,{length:n}=t;for(;e!=null&&i<n;){let o=Vl(t[i]);e=e[o],i+=1}return i&&i===n?e:void 0}function Tg(s){return"iterable"in s}function jl(s){return Z(s.iterable)?I(s.iterable)||s.iterable===null:!0}function Hl(s,r,t){let e=s==null?void 0:Ag(s,r);return e===void 0?t:e}var bg=/\b__p \+= '';/g,Rg=/\b(__p \+=) '' \+/g,Cg=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ig=/['\n\r\u2028\u2029\\]/g,Bl=/[&<>"']/g,Pg=csRegExp(Bl.source),Og=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ur=/($^)/,Ng={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Mg=/[()=,{}[\]/\s]/,Dg=/<%-([\s\S]+?)%>/g,kg=/<%([\s\S]+?)%>/g,Fl=/<%=([\s\S]+?)%>/g,{hasOwnProperty:Za}=Object.prototype,xg="Invalid `variable` option passed into `_.template`";function Lg(s){return`\\${Ng[s]}`}var Vg={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ug={escape:Dg,evaluate:kg,interpolate:Fl,variable:"",imports:{_:{template:_r,escape(s){return s&&Pg.test(s)?csString.prototype.replace.call(s,Bl,r=>Vg[r]):s!=null?s:""}}}};function _r(s,r){let t=j(j({},Ug),r),e=Object.keys(t.imports||{}),i=csArray.prototype.map.call(e,v=>t==null?void 0:t.imports[v]),n,o,c=0,l=t.interpolate||ur,h="__p += '",d=csRegExp(`${(t.escape||ur).source}|${l.source}|${(l===Fl?Og:ur).source}|${(t.evaluate||ur).source}|$`,"g"),p=`//# sourceURL=${Za.call(t,"sourceURL")?csString.prototype.replace.call(`${t.sourceURL}`,/\s/g," "):void 0}
`;s==null||csString.prototype.replace.call(s,d,(v,b,C,_,T,x)=>{let O=C||_;return h+=csString.prototype.replace.call(csString.prototype.slice.call(s,c,x),Ig,Lg),b&&(n=!0,h+=`' +
__e(${b}) +
'`),T&&(o=!0,h+=`';
${T};
__p += '`),O&&(h+=`' +
((__t = (${O})) == null ? '' : __t) +
'`),c=x+v.length,v}),h+=`';
`;let y=Za.call(t,"variable")&&t.variable;if(!y)h=`with (obj) {
${h}
}
`;else if(Mg.test(y))throw new Error(xg);h=csString.prototype.replace.call(csString.prototype.replace.call(o?csString.prototype.replace.call(h,bg,""):h,Rg,"$1"),Cg,"$1;"),h=`function(${y||"obj"}) {
${y?"":`obj || (obj = {});
`}var __t, __p = ''${n?", __e = _.escape":""}${o?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`}${h}return __p
}`;let m;try{m=Function(...e,`${p}return ${h}`)(...i)}catch(v){m=v}if(m.source=h,m instanceof Error)throw m;return m}var jg=/^(\s*("(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*')\s*,?)+$/,Hg=/<%[\s\S]+?%>|<%-[\s\S]+?%>|<%=[\s\S]+?%>|\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/,Bg=/^document\.querySelector\(("(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*')\)\.(textContent|value)$/;function tc(s){if(!jg.test(s)||Hg.test(s))throw new Error("whitelisted function is wrongly used")}var ec={"window.location.hash.replace(":(s,r)=>{let t=csString.prototype.substring.call(s,29,s.length-1);return tc(t),_r(`\${${s}}`)(r)},"window.sessionStorage.getItem(":(s,r)=>{let t=csString.prototype.substring.call(s,30,s.length-1);return tc(t),_r(`\${${s}}`)(r)},"document.querySelector(":(s,r)=>{if(Bg.test(s))return _r(`\${${s}}`)(r)},"new Date().getTime()":(s,r)=>new csDate().getTime().toString()};function Fg(s){let r=ri(Object.keys(ec),t=>jt(s,t));if(r)return ec[r]}function $g(s){return jt(s,"'")&&ii(s,"'")}var zg=/\$\{([\s\S]+?)\}/g,Gg=s=>(r,t,e)=>{let i="";return csArray.prototype.forEach.call(csString.prototype.split.call(t,"+"),n=>{let o=csString.prototype.trim.call(n),c=Hl(s,o);if(c===void 0)if($g(o))c=csString.prototype.substring.call(o,1,o.length-1);else{let l=Fg(o);if(l&&(c=l(o,s)),c===void 0)throw new Error("undefined not allowed")}i+=c}),i};function ei(s,r){try{return csString.prototype.replace.call(s,zg,Gg(r))}catch(t){return null}}function Qn(s,r){let t={};for(let e of Object.keys(s)){let i=s[e];if(I(i)){let n=ei(i,r);if(n===null)return null;t[e]=n}else t[e]=i}return t}function Zn(s,r){let t=csArray.prototype.join.call(csArray.prototype.filter.call(csArray.prototype.map.call(csString.prototype.split.call(s,","),e=>ei(e,r)),e=>e!==null&&Ut(e)),",");return Ut(t)?t:null}function qg(s){return csArray.isArray(s)?csArray.prototype.map.call(s,Vl):Bo(s)?[s]:csArray.from(Ul(s))}function Wg(s,r){try{let e=/^values\(([a-zA-Z0-9_$[\].]+)\)\[\?([a-zA-Z0-9_$]+)\]$/.exec(s);if(!e)return null;let i=e[1],n=e[2],o=Hl(r,qg(i));if(typeof o!="object"||o===null)return null;let c=[];return csArray.prototype.forEach.call(Object.keys(o),l=>{let h=o[l];typeof h=="object"&&h!==null&&!csArray.isArray(h)&&n in h&&csArray.prototype.push.call(c,h)}),c}catch(t){return null}}function Yg(s,r){let e=/^\[([0-9]+):([0-9+])\]$/.exec(s);if(!e)return null;let i=parseInt(e[1],10),n=parseInt(e[2],10);return n<=i||n>r.length?null:csArray.prototype.slice.call(r,i,n)}function Xg(s,r){let t=csString.prototype.split.call(s,"|");if(t.length>2)return null;let e=Wg(csString.prototype.trim.call(t[0]),r);return t.length===2?e===null?null:Yg(csString.prototype.trim.call(t[1]),e):e}var mn=(()=>{let s;return function(r){r.AND="AND",r.OR="OR"}(s||(s={})),s})(),ue=(()=>{let s;return function(r){r.STARTS_WITH="startsWith",r.EQUALS="equals",r.NOT_EQUALS="notEquals",r.CONTAINS="contains",r.NOT_CONTAINS="notContains",r.MATCHES="matches",r.NOT_MATCHES="notMatches",r.EXIST="exist",r.NOT_EXIST="notExist"}(s||(s={})),s})();function $l(s,r){return Kg(s.operator,tm(s.args,r))}function Kg(s,r){switch(s){case ue.EXIST:case ue.NOT_EXIST:return Jg(s,r);default:return Qg(s,r)}}function Jg(s,r){let[t]=r;if(!Ut(t))return!1;switch(s){case ue.EXIST:return window.csquerySelector[document.nodeType].call(document,t)!==null;case ue.NOT_EXIST:return window.csquerySelector[document.nodeType].call(document,t)===null;default:return!1}}function Qg(s,r){let[t,e]=r;if(!(s in mn)&&!(I(t)&&I(e)))return!1;switch(s){case mn.AND:return!!csArray.prototype.reduce.call(r,(n,o)=>n&&o);case mn.OR:return!!csArray.prototype.reduce.call(r,(n,o)=>n||o);case ue.STARTS_WITH:return jt(t,e);case ue.EQUALS:return t===e;case ue.NOT_EQUALS:return t!==e;case ue.CONTAINS:return csString.prototype.indexOf.call(t,e)>-1;case ue.NOT_CONTAINS:return csString.prototype.indexOf.call(t,e)===-1;case ue.MATCHES:{let n=sc(e);return n!==null&&n.test(t)}case ue.NOT_MATCHES:{let n=sc(e);return n!==null&&!n.test(t)}default:return!1}}function Zg(s){return!!(s&&s.operator&&s.args)}function tm(s,r){return csArray.prototype.map.call(s,t=>Zg(t)?$l(t,r):I(t)?ei(t,r):t)}function sc(s){let r=/^\/(.*)\/([gimy]*)$/.exec(s),t=null;if(r){let[,e,i]=r;try{t=new csRegExp(e,i)}catch(n){}}else try{t=new csRegExp(s)}catch(e){}return t}var Ni=(()=>{class s{constructor(...t){this.Vf=t}addProvider(t){csArray.prototype.push.call(this.Vf,t)}getRequestParameters(){return csArray.prototype.reduce.call(this.Vf,(t,e)=>j(j({},e.getRequestParameters()),t),{})}}return s})(),em=window.navigator.language||window.navigator.userLanguage||window.navigator.browserLanguage||window.navigator.systemLanguage||"unknown";function sm(){return{la:em}}var bs=(()=>{let s;return function(r){r.Artificial="a",r.Renewal="r",r.Natural="n"}(s||(s={})),s})(),Cs=(()=>{let s;return function(r){r.Natural="Natural",r.Artificial="Artificial",r.Renewal="Renewal"}(s||(s={})),s})(),im=(()=>{class s extends zt{constructor(t,e,i,n,o,c){super(),this.E=t,this.w=e,this.J=i,this.Rl=n,this.C=o,this.hs=c,this.ya=null}init(){this.AS()}onStart(t=Cs.Natural){switch(t){case Cs.Natural:this.TS();break;case Cs.Artificial:this.bS();break;case Cs.Renewal:this.RS();break}}onStop(){}triggerArtificialPageView(t,e){this.isStarted?(this.w.emitArtificialPageViewEnd(),this.Cl(t,e)):(vt(t)&&this.C.overridePath(t,e),this.J.emitTargetingRulesArtificialPageview(this.C.getUrl()),this.E.hasTargetingRules()&&this.C.cleanupOverrideLifespan())}TS(){this.hs.setPageViewType(bs.Natural);let t=this.C.getAnonymizedUrl();this.w.emitBeforeNaturalPageView(t),this.Rl.send(),this.C.cleanupOverrideLifespan(),this.w.emitAfterNaturalPageView(bs.Natural),this.ya=t}RS(){this.hs.setPageViewType(bs.Renewal);let t=this.C.getAnonymizedUrl();this.w.emitBeforeNaturalPageView(t),this.Rl.send(),this.w.emitAfterNaturalPageView(bs.Renewal),this.ya=t}Cl(t,e,i=!1){vt(t)&&this.C.overridePath(t,e);let n=this.C.getAnonymizedUrl();this.w.emitBeforeArtificialPageView(this.ya,n),this.hs.setPageViewType(bs.Artificial),this.Rl.send(),this.C.cleanupOverrideLifespan(),this.w.emitAfterArtificialPageView(i),this.ya=n}bS(){this.Cl(null,void 0,!0)}AS(){window.addEventListener("pageshow",t=>{this.isStarted&&t.persisted&&(this.w.emitArtificialPageViewEnd(),this.Cl())})}}return s})(),rm=(()=>{class s{constructor(){this.Il=bs.Natural}setPageViewType(t){this.Il=t}getPageViewType(){return this.Il}getRequestParameters(){return{pvt:this.Il}}}return s})();var nm=99999,om=(()=>{class s{constructor(t){this.R=t,this.CS=this.IS()&&window.CSCurrentScript}PS(){let t=window.CSCurrentScript;if(!t)return null;let e=window.performance.getEntriesByName(t.src,"resource")[0];return!e||this.OS(e)?null:Math.round(e.responseEnd-e.fetchStart)}OS(t){let e=t.transferSize;return e!==void 0?e===0||e===300||e<t.encodedBodySize:t.connectStart===t.domainLookupEnd}getRequestParameters(){if(!this.CS||this.NS()!==1)return{};let t=this.PS();return t===null?{}:{dt:`${Math.min(t,nm)}`}}NS(){var t;return((t=this.R.getSession())===null||t===void 0?void 0:t.pageNumber)||null}IS(){return typeof window.performance=="object"&&typeof window.performance.getEntriesByName=="function"}}return s})(),zl=["trackPageview"],to=["setPath"],eo=["setQuery"],ic=["referrer:maskUrl"],am=["referrer:removeQueryString"],cm=["referrer:keepQueryString"],yn=s=>Qs(s)&&s!==null,lm=(s,r,t,e)=>{s.register(zl,(i,n)=>{if(!I(i)){r.triggerArtificialPageView();return}yn(n)?r.triggerArtificialPageView(i,n):r.triggerArtificialPageView(i)}),s.register(to,(i,n)=>{if(!I(i))throw new $t(to[0]);yn(n)?t.overridePath(i,n):t.overridePath(i)}),s.register(eo,(i,n)=>{if(!I(i))throw new $t(eo[0]);yn(n)?t.overrideQuery(i,n):t.overrideQuery(i)}),e&&(s.register(ic,i=>{if(!I(i))throw new $t(ic[0]);e.addUrlMaskingPattern(i)}),s.register(am,()=>e.enableRemoveQueryString()),s.register(cm,()=>e.disableRemoveQueryString()))};var hm=(()=>{class s{constructor(t,e,i,n,o,c,l,h,d,p,y,m,v,b,C){this.E=t,this.S=e,this.w=i,this.Ve=n,this.N=o,this.R=c,this.Ps=l,this.It=h,this.bt=d,this.C=p,this.qt=y,this.hs=m,this.J=v,this.Ge=b,this.ur=C}init(){let t=new Zs(this.E.getTrackerUri(),"pageview");this.Is=new im(this.E,this.w,this.J,t,this.C,this.hs),this.Is.init();let e=new Ni(this.Ve,this.N,Ct,this.Ps,this.C,this.It,wo,this.bt,this.hs,new om(this.R),this.qt);this.Ge&&e.addProvider(this.Ge),this.ur&&e.addProvider(this.ur);let i=this.E.isCsCrosswritingHeap();if(i||this.E.isCsSideloadingHeap()||this.E.isHeapSideloadsCs()){let n=this.E.getHeapEnvId()||void 0;e.addProvider({getRequestParameters(){let o={cw:i?"1":"2"};return n&&(o.happid=n),o}})}t.setRequestParametersProviders(e),lm(this.S,this.Is,this.C,this.Ps)}start(t){this.Is.start(t)}stop(){this.Is.stop()}onBeforeSessionRenewal(){this.Is.stop()}}return s})();function $o(s){switch(s){case"no decoding":return null;case"decode once":return{decodeURI:!0};case"decode multiple times":return{decodeURIDeep:!0};default:return null}}function zo(s){switch(s==null?void 0:s[0]){case"on next pageview only":return{lifespan:"onNextPageviewOnly"};default:return null}}var Tt=(()=>{class s{constructor(t,e){this.commandsService=t,this.args=e}}return s})(),Hi=(()=>{class s extends Tt{}return s})(),Gl=(()=>{class s extends Tt{validateArgs(t){if(K(t)){let e=Z(t.path)?I(t.path):!0,i=Z(t.decodeURI)?I(t.decodeURI):!0,n=Z(t.lifespan)?csArray.isArray(t.lifespan):!0;return e&&i&&n}return!1}execute(t){if(!t.path)this.wn([]);else{let e=[t.path],i=$o(t.decodeURI),n=zo(t.lifespan),o=j(j({},i),n);Object.keys(o).length&&e.push(o),this.wn(e)}}wn(t){this.commandsService.applyFromImplementation(zl[0],t,"ArtificialPageviewTemplate")}}return s})(),ql=["trackError"],um=(()=>{class s extends Hi{validateArgs(t){return K(t)?I(t.message)&&csArray.isArray(t.attributes):!1}execute(t,e){let i=ei(t.message,e);if(!i)return;let n={};for(let o of t.attributes){let c=ei(o.value,e);c!==null&&(n[o.key]=c)}this.commandsService.applyFromImplementation(ql[0],[i,n],"CustomErrorTemplate")}}return s})(),Go=["setCustomVariable"],dm=(()=>{class s{constructor(t,e){this.S=t,this.bt=e}init(){this.S.register(Go,(t,e,i,n)=>{this.bt.set(t,e,i,n)})}onAfterArtificialPageView(){this.bt.deleteNextPageOnlyCustomVariables()}onAfterNaturalPageView(){this.bt.deleteNextPageOnlyCustomVariables()}onOptout(){this.bt.removeCustomVariablesSession()}onBeforeVisitorRenewal(){this.bt.removeCustomVariablesSession(),this.bt.removeCustomVariablesPage()}}return s})(),fm=(()=>{class s extends Tt{validateArgs(t){if(K(t)){let e=jl(t),i=csArray.isArray(t.scope)?nl(t.scope,n=>I(n)):!0;return e&&i&&At(t.index)&&I(t.name)&&I(t.value)}return!1}execute(t){this.commandsService.applyFromImplementation(Go[0],[t.index,t.name,t.value,t.scope[0]],"CustomVariableTemplate")}}return s})(),Wl=["setEncryptionSelectors"],qo=["setPIISelectors"],Yl=["setCapturedElementsSelector"],pm=(()=>{class s{constructor(t,e,i,n,o,c,l){this.w=t,this.S=e,this.lt=i,this.ie=n,this.Wt=o,this.ht=c,this.fr=l}init(){var t,e;this.fr&&this.ht&&((t=this.fr)===null||t===void 0||t.addSelector((e=this.ht)===null||e===void 0?void 0:e.getEncryptionSelectors())),this.ut()}onStartTracking(t){this.ie.start(),this.w.emitSensitiveStatusChange()}onBeforeArtificialPageView(){this.ie.stop(),this.w.emitSensitiveStatusChange()}onAfterArtificialPageView(){this.ie.start(),this.w.emitSensitiveStatusChange()}onBeforeSessionRenewal(){this.ie.stop(),this.w.emitSensitiveStatusChange()}onOptout(){this.ie.stop(),this.w.emitSensitiveStatusChange()}onReplayUnanonymizationConsentGranted(){this.w.emitSensitiveStatusChange()}onReplayUnanonymizationConsentWithdrawn(){this.w.emitSensitiveStatusChange()}ut(){this.S.register(qo,t=>{this.lt.setMaskedElementSettingsFromCommand(t),this.w.emitSensitiveStatusChange()}),this.S.register(Yl,t=>{this.Wt.setWhitelistedElementsSelector(t),this.w.emitSensitiveStatusChange()}),this.S.register(Wl,t=>{var e,i;(e=this.ht)===null||e===void 0||e.setEncryptionSelectors(t),(i=this.fr)===null||i===void 0||i.addSelector(t)})}}return s})(),gm=(()=>{class s extends Tt{validateArgs(t){return K(t)?I(t.selector):!1}execute(t){this.commandsService.applyFromImplementation(Wl[0],[t.selector],"DataCsEncryptTemplate")}}return s})(),mm="data-cs-override-id",ym=(()=>{class s extends Tt{validateArgs(t){if(K(t)){let e=vt(t.value)?I(t.value):!0;return I(t.selector)&&e}return!1}execute(t){var e;if(!Ut(t.selector))return;let i=window.csquerySelector[document.nodeType].call(document,t.selector);i&&i.setAttribute(mm,(e=t.value)!==null&&e!==void 0?e:"")}}return s})(),Em=512,vm=255,En=(()=>{class s{constructor(t,e){this.key=csString.prototype.slice.call(t,0,Em),this.value=I(e)?csString.prototype.slice.call(e,0,vm):e}static isKeyValid(t){return I(t)}static isValueValid(t){return I(t)||Os(t)}}return s})(),Sm=(()=>{class s extends zt{constructor(t,e){super(),this.Yt=t,this.D=e,this.Pl=[]}onStart(){csArray.prototype.forEach.call(this.Pl,t=>this.Uf(t.key,t.value)),this.Pl=[]}onStop(){}Uf(t,e){let i=this.D.anonymizePII(t),n=Os(e)?e:this.D.anonymizePII(e);this.Yt.add(new En(i,n))}trackDynamicVariable(t,e){if(En.isKeyValid(t)&&En.isValueValid(e)){if(!this.isStarted){csArray.prototype.push.call(this.Pl,{key:t,value:e});return}this.Uf(t,e)}else throw new $t(Wo[0])}}return s})(),_m=(()=>{class s{constructor(t){this.ue=t,this.Yt=[]}add(t){csArray.prototype.push.call(this.Yt,t),this.setBatchReadyCall()}clear(){this.Yt=[]}onBatchReady(t){this.MS=t}getRequestParameters(){let t={};for(let e of this.Yt)t[e.key]=e.value;return{dv:this.ue.compressSync(csJSON.stringify(t),"base64"),ct:this.ue.algorithm}}setBatchReadyCall(){this.MS()}}return F([ji({wait:0,mode:"trailing"}),N("dynamicVariablesBatchReady")],s.prototype,"setBatchReadyCall",null),s})(),wm="dvar",Wo=["trackDynamicVariable"],Am=(()=>{class s{constructor(t,e,i,n,o,c){this.S=t,this.R=e,this.E=i,this.Ve=n,this.ue=o,this.D=c,this.bs=new Zs(this.E.getTrackerUri(),wm),this.Yt=new _m(this.ue),this.Rs=new Sm(this.Yt,this.D)}init(){this.bs.setRequestParametersProviders(this.Ve,this.Yt),this.R.setDynamicVariablesService(this.Rs),this.Yt.onBatchReady(()=>this.bs.send()),this.bs.after(()=>this.Yt.clear()),this.S.register(Wo,({key:t,value:e}={})=>{this.Rs.trackDynamicVariable(t,e)})}onStartTracking(){this.Rs.start()}onArtificialPageViewEnd(t){t&&this.Rs.stop()}onAfterArtificialPageView(t){t&&this.Rs.start()}}return s})(),Tm=20,bm=(()=>{class s extends Hi{validateArgs(t){return K(t)?jl(t)&&I(t.key)&&I(t.value)&&I(t.type):!1}execute(t,e){let i=Qn(t,e);i!==null?this.wn(i):this.DS(t,e)()}DS(t,e){return()=>{let i=0,n=window.csSetInterval(()=>{i+=1;let o=Qn(t,e);if(o!==null){window.csClearInterval(n),n=void 0,i=0,this.wn(o);return}i>=Tm&&(window.csClearInterval(n),n=void 0,i=0)},100)}}wn(t){let e=t.value;if(t.type==="Integer"){let i=Number.parseInt(t.value,10);Number.isNaN(i)||(e=i)}this.commandsService.applyFromImplementation(Wo[0],[{key:t.key,value:e}],"DynamicVariableTemplate")}}return s})(),Xl=100,Rm=100,Cm=(()=>{class s extends zt{constructor(t,e){super(),this.kS=t,this.V=e,this.Ce=null,this.Ol=[]}onStart(){csArray.prototype.forEach.call(this.Ol,t=>{this.Ce=t,this.jf()}),this.Ol=[]}onStop(){}addToCart(t){let e={};I(t.sku)&&(e.sku=csString.prototype.slice.call(t.sku,0,Rm)),I(t.merchant)&&(e.merchant=csString.prototype.slice.call(t.merchant,0,Xl)),(e.sku||e.merchant)&&(this.Ce=e,this.jf())}getCartItem(){return this.Ce}jf(){if(!this.isStarted&&this.Ce!==null){csArray.prototype.push.call(this.Ol,this.Ce),this.clear();return}this.V.refreshSession(),this.V.isSessionValid()&&this.kS.send()}clear(){this.Ce=null}getRequestParameters(){if(!this.Ce)return{};let t={};return I(this.Ce.sku)&&this.Ce.sku.length>0&&(t.sku=this.Ce.sku),I(this.Ce.merchant)&&this.Ce.merchant.length>0&&(t.me=this.Ce.merchant),t}}return s})(),rc=(()=>{class s{constructor(t,e){this.id=t,this.revenue=e}static from(t){let e=new s(t.id,parseFloat(t.revenue));return isNaN(parseFloat(t.tax))||(e.tax=parseFloat(t.tax)),isNaN(parseFloat(t.shipping))||(e.shipping=parseFloat(t.shipping)),I(t.currency)&&t.currency.length<=10&&(e.currency=t.currency),e}hasValidRevenue(){return!isNaN(this.revenue)&&this.revenue>=0}static isValid(t){return vt(t)&&At(t.revenue)&&I(t.currency)&&t.currency.length<=10&&(!vt(t.id)||I(t.id))}}return s})(),Im=(()=>{class s{constructor(t,e,i,n){this.id=t,this.name=e,this.price=i,this.quantity=n}static from(t){if(!s.Nl(t))return null;let e=new s(t.id,t.name,parseFloat(t.price),parseInt(t.quantity,10));return Z(t.sku)&&(e.sku=t.sku),Z(t.category)&&(e.category=t.category),Z(t.merchant)&&t.merchant.length>0&&(e.merchant=t.merchant.slice(0,Xl)),e}static Nl(t){return vt(t)&&I(t.id)&&I(t.name)&&At(parseFloat(t.price))&&Os(parseInt(t.quantity,10))&&(!Z(t.sku)||I(t.sku))&&(!Z(t.category)||I(t.category))&&(!Z(t.merchant)||I(t.merchant))}}return s})(),Pm=(()=>{class s extends zt{constructor(t,e,i){super(),this.D=t,this.Hf=e,this.V=i,this.Ml=[],this.clear()}onStart(){csArray.prototype.forEach.call(this.Ml,t=>{this.de=t.transaction,this.An=t.transactionItems,this.sendTransaction()}),this.Ml=[]}onStop(){}addTransaction(t){let e=this.D.anonymizeFields(t,["id"]);this.de=rc.from(e)}getTransaction(){return this.de}sendTransaction(){if(!this.isStarted){csArray.prototype.push.call(this.Ml,{transaction:this.de,transactionItems:[...this.An]}),this.clear();return}if(!(this.Hf===null||this.V===null)&&(this.V.refreshSession(),!!this.V.isSessionValid())){if(!this.de.hasValidRevenue()){B.warn("Transaction Service: unable to send transaction with invalid parameters");return}this.Hf.send()}}addItem(t){if(Se(t))throw new $t(Hr[1]);let e=this.D.anonymizeFields(t,["id","name","sku","category"]),i=Im.from(e);i!==null&&csArray.prototype.push.call(this.An,i)}getItems(){return this.An}clear(){this.de=rc.from({revenue:NaN}),this.An=[]}getRequestParameters(){let t={id:this.de.id?`${this.de.id}`:"",revenue:`${this.de.revenue}`};return Z(this.de.tax)&&(t.tax=`${this.de.tax}`),Z(this.de.shipping)&&(t.shipping=`${this.de.shipping}`),Z(this.de.currency)&&(t.cu=`${this.de.currency}`),t.items=window.csJSON.stringify(this.An),t}}return s})(),Om=["ecommerce:addToCart","ec:cart:add"],Yo=["ecommerce:addTransaction","ec:transaction:create"],Hr=["ecommerce:addItem","ec:transaction:items:add"],Xo=["ecommerce:send","ec:transaction:send"],Nm=(()=>{class s{constructor(t,e,i,n,o,c,l){this.E=t,this.Et=e,this.N=i,this.S=n,this.D=o,this.V=c,this.C=l}init(){let t=new Zs(this.E.getTrackerUri(),"transaction"),e=new Zs(this.E.getTrackerUri(),"addtocart");this.Ue=new Pm(this.D,t,this.V),this.pr=new Cm(e,this.V);let i=new Ni(this.Et,this.N,this.C,this.Ue);t.setRequestParametersProviders(i),t.after(()=>{this.Ue.clear()});let n=new Ni(this.Et,this.N,this.C,this.pr);e.setRequestParametersProviders(n),e.after(()=>{this.pr.clear()}),this.S.register(Yo,o=>{this.Ue.addTransaction(o)}),this.S.register(Hr,o=>this.Ue.addItem(o)),this.S.register(Xo,()=>this.Ue.sendTransaction()),this.S.register(Om,o=>{this.pr.addToCart(o)})}onStartTracking(){this.Ue.start(),this.pr.start()}onArtificialPageViewEnd(t){t&&(this.Ue.stop(),this.pr.stop())}onAfterArtificialPageView(t){t&&(this.Ue.start(),this.pr.start())}}return s})(),Mm=(()=>{class s extends Tt{validateArgs(t){return K(t)?I(t.transactionId)&&At(t.revenue)&&I(t.currency)&&I(t.name)&&I(t.sku)&&I(t.category)&&At(t.price)&&At(t.quantity):!1}execute(t){this.xS({id:t.transactionId,revenue:t.revenue,currency:t.currency}),this.LS({id:t.transactionId,name:t.name,sku:t.sku,category:t.category,price:t.price,quantity:t.quantity}),this.Ea()}xS(t){this.commandsService.applyFromImplementation(Yo[0],[t],"EcTransactionAllTemplate")}LS(t){this.commandsService.applyFromImplementation(Hr[0],[t],"EcTransactionAllTemplate")}Ea(){this.commandsService.applyFromImplementation(Xo[0],[],"EcTransactionAllTemplate")}}return s})(),Dm=(()=>{class s extends Tt{validateArgs(t){return K(t)?I(t.id)&&At(t.revenue)&&I(t.currency):!1}execute(t){this.commandsService.applyFromImplementation(Yo[0],[t],"EcTransactionCreateTemplate")}}return s})(),km=(()=>{class s extends Tt{validateArgs(t){return K(t)?I(t.id)&&I(t.name)&&I(t.sku)&&I(t.category)&&At(t.price)&&At(t.quantity):!1}execute(t){this.commandsService.applyFromImplementation(Hr[0],[t],"EcTransactionItemsAddTemplate")}}return s})(),xm=(()=>{class s extends Tt{validateArgs(t){return!!K(t)}execute(){this.commandsService.applyFromImplementation(Xo[0],[],"EcTransactionSendTemplate")}}return s})(),Lm=(()=>{class s extends Hi{validateArgs(t){return K(t)?vt(t)&&I(t.selector):!1}execute(t,e){if(!vt(t)||!I(t==null?void 0:t.selector))return;let i=Zn(t.selector,e);i!==null&&this.commandsService.applyFromImplementation(Yl[0],[i],"ElementUnmaskingTemplate")}}return s})(),ks;(function(s){s.ContentSquare="CONTENTSQUARE",s.LoadedByClicktale="LOADED_BY_CLICKTALE",s.LoadClicktalePtc="LOAD_CLICKTALE_PTC",s.DualCollectionReview="DUAL_COLLECTION_REVIEW",s.DualCollection="DUAL_COLLECTION",s.ContentSquareTagClickTaleEndpoints="CONTENTSQUARE_TAG_CLICKTALE_ENDPOINTS"})(ks||(ks={}));var nc=(()=>{let s;return function(r){function t(){return window.ClickTaleIsRecording&&window.ClickTaleIsRecording()}r.isRecording=t;function e(){window.ClickTaleStop&&window.ClickTaleStop()}r.stopRecording=e;function i(c){window.ClickTaleLogicalWithUploadPage&&window.ClickTaleLogicalWithUploadPage(c)}r.triggerLogicalPageView=i;function n(c){window.ClickTaleEvent&&window.ClickTaleEvent(c)}r.sendPageEvent=n;function o(c){window.ClickTaleEventTrigger&&window.ClickTaleEventTrigger(c)}r.sendEventTriggerRecording=o}(s||(s={})),s})();function so(s){return s.tagDeploymentMode===ks.DualCollectionReview||s.tagDeploymentMode===ks.DualCollection}function Vm(s){return so(s)||s.tagDeploymentMode===ks.LoadClicktalePtc}var Um="@ETP@",oc="@user-identifier@",jm=(()=>{class s extends zt{constructor(t,e,i,n){super(),this.E=t,this.VS=e,this.ue=i,this.J=n,this.Dl=[],this.Di=[]}onStart(){csArray.prototype.forEach.call(this.Dl,t=>this.Bf(t)),this.Dl=[],csArray.prototype.forEach.call(this.Di,t=>this.Ff(t)),this.Di=[]}onStop(){}Bf(t){this.US(t)?_i.isSupported()&&this.jS(t):this.HS(t)}trackPageEvent(t){if(!s.$f(t))throw new $t(Ko[0]);this.isStarted?this.Bf(t):csArray.prototype.push.call(this.Dl,t)}US(t){return Yn(t,oc)}jS(t){return Q(this,null,function*(){if(!this.E.customHashIdEnabled)return;let e=csString.prototype.slice.call(t,oc.length);if(e.length>_i.MAX_DIGEST_INPUT_SIZE){B.warn("UserIdentifier event: invalid user identifier");return}let i=yield _i.digest(e);i?(this.gr={eventName:i,isETR:!1,isCustomHashId:!0},this.va()):B.warn("Page event: unable to compute customHashId"),this.E.encryptionEnabled&&this.J.emitUserIdentifierEvent(e)})}HS(t){this.J.emitPageEvent(t),this.gr={eventName:t,isETR:!1,isCustomHashId:!1},this.va(),this.E.tagDeploymentMode===ks.LoadClicktalePtc&&nc.sendPageEvent(t)}Ff(t){this.E.malkaEtrEnabled?this.BS(t):this.FS(t)}trackEventTriggerRecording(t){if(!s.$f(t))throw new $t(Bi[0]);this.isStarted?this.Ff(t):csArray.prototype.push.call(this.Di,t)}BS(t){Yn(t,Um)?this.J.emitEventTriggerRecording(t,us.ETR_PAGE):this.J.emitEventTriggerRecording(t,us.ETR_SESSION),this.gr={eventName:t,isETR:!0,isCustomHashId:!1},this.va()}FS(t){Vm(this.E)&&(this.J.emitEventTriggerRecording(t,us.ETR_LEGACY),this.gr={eventName:t,isETR:!0,isCustomHashId:!1},this.va(),this.E.tagDeploymentMode===ks.LoadClicktalePtc&&nc.sendEventTriggerRecording(t))}getRequestParameters(){return{value:this.ue.compressSync(this.gr.eventName,"base64"),ct:this.ue.algorithm,isETR:`${this.gr.isETR}`,isCustomHashId:`${this.gr.isCustomHashId}`}}va(){this.VS.send()}static $f(t){return I(t)&&!!csString.prototype.trim.call(t)}}return s})(),Ko=["trackPageEvent"],Bi=["trackEventTriggerRecording"],Hm=(()=>{class s{constructor(t,e,i,n,o){this.E=t,this.S=e,this.ue=i,this.Ve=n,this.J=o}init(){let t=new Zs(this.E.getTrackerUri(),"pageEvent");this.mr=new jm(this.E,t,this.ue,this.J),t.setRequestParametersProviders(this.mr,this.Ve),this.S.register(Ko,e=>{this.mr.trackPageEvent(e)}),this.S.register(Bi,e=>{this.mr.trackEventTriggerRecording(e)})}onStartTracking(){this.mr.start()}onArtificialPageViewEnd(t){t&&this.mr.stop()}onAfterArtificialPageView(t){t&&this.mr.start()}}return s})(),Bm=(()=>{class s extends Tt{validateArgs(t){return K(t)?I(t.eventName):!1}execute(t){this.commandsService.applyFromImplementation(Bi[0],[`@ETP@${t.eventName}`],"EventTriggerRecordingPageTemplate")}}return s})(),Fm=(()=>{class s extends Tt{validateArgs(t){return K(t)?I(t.eventName):!1}execute(t){this.commandsService.applyFromImplementation(Bi[0],[`@ETS@${t.eventName}`],"EventTriggerRecordingSessionTemplate")}}return s})(),$m=(()=>{class s extends Tt{validateArgs(t){return K(t)?I(t.eventName):!1}execute(t){this.commandsService.applyFromImplementation(Ko[0],[t.eventName],"PageEventTemplate")}}return s})(),zm=(()=>{class s extends Hi{validateArgs(t){if(K(t)){let e=csArray.isArray(t.cssSelectors),i=csArray.isArray(t.attributes);return e&&i}return!1}execute(t,e){let i=csArray.prototype.filter.call(csArray.prototype.map.call(t.cssSelectors,c=>Zn(c,e)),c=>!!c),n=csArray.prototype.filter.call(csArray.prototype.map.call(t.attributes,c=>{let l=ei(c.attrName,e),h=Zn(c.selector,e);return{attrName:l,selector:h}}),c=>!!c.attrName&&!!c.selector),o={PIISelectors:[...i],Attributes:[...n]};this.commandsService.applyFromImplementation(qo[0],[o],"PIIMaskingTemplate")}}return s})(),Gm=(()=>{class s extends Tt{validateArgs(t){return K(t)?I(t.eventName):!1}execute(t){this.commandsService.applyFromImplementation(Bi[0],[`${t.eventName}`],"RecordingEventTriggerTemplate")}}return s})(),qm=(()=>{class s extends Tt{validateArgs(t){return K(t)?I(t.path):!1}execute(t){let e=[t.path],i=$o(t.decodeURI),n=zo(t.lifespan),o=j(j({},i),n);Object.keys(o).length&&e.push(o),this.commandsService.applyFromImplementation(to[0],e,"SetPathTemplate")}}return s})(),Wm=(()=>{class s extends Tt{validateArgs(t){return K(t)?I(t.query):!1}execute(t){let e=[t.query],i=$o(t.decodeURI),n=zo(t.lifespan),o=j(j({},i),n);Object.keys(o).length&&e.push(o),this.commandsService.applyFromImplementation(eo[0],e,"SetQueryTemplate")}}return s})();function Ve(s,r,t,e){var i=arguments.length,n=i<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,t):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,r,t,e);else for(var c=s.length-1;c>=0;c--)(o=s[c])&&(n=(i<3?o(n):i>3?o(r,t,n):o(r,t))||n);return i>3&&n&&Object.defineProperty(r,t,n),n}var vi=s=>s instanceof HTMLFormElement?"form":s.localName,ac=new Map,vn=!xi&&document.implementation.createHTMLDocument("");function Kl(s){var r,t;return(t=(r=s.sheet)===null||r===void 0?void 0:r.href)!==null&&t!==void 0?t:s.getAttribute("href")}function Ym(s){if(!xr(s))return null;let r=Jl(s);if(r===null||r.length===0)return null;let t="";if(Ao(s.textContent))J(r,e=>t+=e.cssText);else{let e=Xm(s);if(e===r.length||e>r.length)return null;let i=new csArray(r.length-e);for(let n=e,o=0;n<r.length;n+=1,o+=1)i[o]=r[n];J(i,n=>t+=n.cssText)}return t}function Xm(s){if(!vn)return 0;let r=ac.get(s.textContent);if(r)return r;let t=s.cloneNode(!0);t.textContent=s.textContent,vn.head.appendChild(t);let e=Jl(t);return r=e?e.length:0,ac.set(s.textContent,r),vn.head.removeChild(t),r}function Jl(s){try{if(s.disabled)return null;let r=s.sheet;return r?r.cssRules||r.rules:null}catch(r){if(r.name!=="SecurityError"&&r.name!=="InvalidAccessError")throw r;return null}}var ds={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,STYLESHEET:50};var Us=(()=>{class s{constructor(t){this.csId=W(t),this.props=hs.getAll(t)}}return s})(),Ql=(()=>{class s extends Us{constructor(t){super(t),this.nodeType=3,this.data=t.data}}return s})(),ke=(()=>{class s extends Us{constructor(t){var e,i,n;super(t),this.attributes=[],this.nodeType=ds.ELEMENT_NODE,this.localName=vi(t),this.namespaceURI=(e=t.namespaceURI)!==null&&e!==void 0?e:void 0,this.children=[];let o=Ym(t);if(o){this.children=new csArray(csNodechildNodes.apply(t).length);let c=document.createTextNode(o),l=new Ql(c);csArray.prototype.push.call(this.children,l)}(xr(t)||Po(t))&&(this.disabledSheet=(n=(i=t.sheet)===null||i===void 0?void 0:i.disabled)!==null&&n!==void 0?n:!1)}static isElement(t){return t.nodeType===ds.ELEMENT_NODE}static getAttribute(t,e){return ri(t.attributes,i=>i.name===e)}static getAttributeValue(t,e){var i;return(i=this.getAttribute(t,e))===null||i===void 0?void 0:i.value}}return s})();function Km(s,r){let t=!1,e=function(){if(!t)return s.apply(r,arguments)};return e.cancel=()=>t=!0,e}function Jm(){let s=new Error,r=s.stack?csArray.prototype.filter.call(csString.prototype.split.call(s.stack,`
`),e=>e!=="Error"&&csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(e),"promise ")===-1&&csString.prototype.indexOf.call(e,"[native code]")===-1&&csString.prototype.indexOf.call(e,"(<anonymous>)")===-1):[];if(r.length===0)return"";let t=Zm(r);return t===""||(r=ty(r,t),r.length===0)?"":Zl(r[0])}function Qm(s){return csString.prototype.indexOf.call(s,"@")!==-1}function Zm(s){return s.length>0?Zl(s[0]):""}function ty(s,r){return csArray.prototype.filter.call(s,t=>csString.prototype.indexOf.call(t,r)===-1)}function Zl(s){let r="",t;Qm(s)?t=new csRegExp("@(.+):(\\d+):(\\d+)$"):t=new csRegExp("\\((.+):(\\d+):(\\d+)\\)");let e=t.exec(s);return e&&(r=e[1]),r}var ey=s=>s;function sy(s,r,t,e){let i=csSymbol.for("propertyProxy");Object.defineProperty(s,r,{get(){var n;if(this[i])return this[i];let o=(n=t.get)===null||n===void 0?void 0:n.apply(this);return typeof o!="object"?o:(typeof Proxy=="function"?this[i]=new Proxy(o,{get(c,l){let h=Reflect.get(c,l);return typeof h=="function"?h.bind(c):h},set:(c,l,h)=>{let d=c[l],p=Reflect.set(c,l,h);return e.forEach(y=>y(this,h,d,"subproperty")),p}}):this[i]=o,this[i])},set(){var n;let o=arguments,c=this[r],l=(n=t.set)===null||n===void 0?void 0:n.apply(this,o);delete this[i];try{e.forEach(h=>h(this,o[0],c,"property"))}catch(h){ht.error(h)}return l}})}function iy(s,r,t){let e=ry(s,r);if(!e)return null;let i=(n,o,c,l)=>t(n,o,c,l);return{activate:()=>{e.add(i)},deactivate:()=>{e.delete(i)}}}function ry(s,r){let t=csSymbol.for(r);if(s[t])return s[t];let e=new Set,i=Object.getOwnPropertyDescriptor(s,r);return i?i.configurable?(s[t]=e,sy(s,r,i,e),e):(ht.warn(`Cannot intercept non configurable property '${csString(r)}' of object '${s}'`),null):(ht.warn(`Cannot intercept property '${csString(r)}' because it does not exist directly on the target object '${s}'`),null)}function ny(s,r){let t=csSymbol.for(r);if(s[t])return s[t];let e=Object.getOwnPropertyDescriptor(s,r);if(!(e!=null&&e.writable)&&!(e!=null&&e.set))return ht.warn(`Cannot intercept read only function '${csString(r)}' of object '${s}'`),null;let i=new Set;s[t]=i;let n=s[r];if(typeof n=="function"){let o=function(){let c=arguments,l=[];try{l=csArray.prototype.map.call(gs(i),d=>d(c))}catch(d){ht.critical(d)}let h=n.apply(this,c);return Ls(()=>{let d={result:h,context:this,args:c};csArray.prototype.forEach.call(l,p=>p(d))},[_e.MonkeyPatch,`${csString(r)}`]),h};cy(o,n),s[r]=o}return i}function Ne({target:s,methodName:r,hook:t,hookPrepareArgs:e=ey,options:i}){let n=ny(s,r);if(!n)return null;let o=c=>{let l=e(c),h=i!=null&&i.withCallerName?{callerName:Jm()}:{};return d=>t(ct(j(j({},d),h),{args:l}))};return{activate:()=>{n.add(o)},deactivate:()=>{n.delete(o)}}}function oy(s,r){return th(s,r,!1)}function th(s,r,t=!0){let e=csSymbol.for(r);if(t?s[e]:s.hasOwnProperty(e))return s[e];let i=new Set,n=Object.getOwnPropertyDescriptor(s,r);if(!n)return ht.warn(`Cannot intercept property '${csString(r)}' because it does not exist directly on the target object '${s}'`),null;if(!n.configurable)return ht.warn(`Cannot intercept read only property '${csString(r)}' of object '${s}'`),null;s[e]=i;let o=`${csString(r)}-setter`;return Object.defineProperty(s,r,{set(){var c;let l=this[r],h=arguments;return Ls(()=>{i.forEach(d=>d(this,h[0],l,"property"))},[_e.MonkeyPatch,o]),(c=n.set)===null||c===void 0?void 0:c.apply(this,h)}}),i}function ay(s,r,t){return Mi(s,r,t,!0)}function Mi(s,r,t,e=!1){let i=e?oy(s,r):th(s,r);if(!i)return null;let n=(o,c,l)=>t(o,c,l,"property");return{activate:()=>{i.add(n)},deactivate:()=>{i.delete(n)}}}function cy(s,r){s.prototype=r.prototype,Object.defineProperty(s,"toString",{value:()=>r.toString()})}var Br=(()=>{class s{constructor(){this.set=new Set}add(t){this.set.add(t),this.set.size===1&&csSetTimeout(()=>{this.set.clear()})}has(t){return this.set.has(t)}del(t){this.set.delete(t)}clear(){this.set.clear()}values(){return gs(this.set)}get count(){return this.set.size}}return s})(),ly=(()=>{class s extends Br{constructor(t="high"){super(),this.$S=t}add(t){this.set.add(t),this.set.size===1&&Yt(()=>{this.set.clear()},this.$S)}}return s})();function Fr(s,r=!1){let t=new Br;return{push(e){t.count===0&&(r?Yt:csSetTimeout)(()=>{s(t.values()),t.clear()}),t.add(e)}}}var Me=csSymbol(),Jo=(()=>{class s{constructor(t){var e,i,n,o,c,l,h,d,p,y,m,v,b;this.A=t,this.kl=null,this.xl=null,this.Ll=null,this.Vl=null,this.Ul=null,this.zS=Fr(C=>this.processUpdateRulesInATick(C)),this.jl=null,this.Hl=null,this.Bl=null,this.A=C=>Yt(()=>t(C)),typeof((i=(e=window.CSSStyleSheet)===null||e===void 0?void 0:e.prototype)===null||i===void 0?void 0:i.insertRule)=="function"&&(this.kl=Ne({target:window.CSSStyleSheet.prototype,methodName:"insertRule",hook:({context:C,args:_})=>{this.processInsertRule(C,_)}})),typeof((o=(n=window.CSSStyleSheet)===null||n===void 0?void 0:n.prototype)===null||o===void 0?void 0:o.deleteRule)=="function"&&(this.xl=Ne({target:window.CSSStyleSheet.prototype,methodName:"deleteRule",hook:({context:C,args:_})=>{this.processDeleteRule(C,_)}})),typeof((l=(c=window.CSSGroupingRule)===null||c===void 0?void 0:c.prototype)===null||l===void 0?void 0:l.insertRule)=="function"&&(this.Ll=Ne({target:window.CSSGroupingRule.prototype,methodName:"insertRule",hook:({context:C})=>this.processUpdateRule(C)})),typeof((d=(h=window.CSSGroupingRule)===null||h===void 0?void 0:h.prototype)===null||d===void 0?void 0:d.deleteRule)=="function"&&(this.Vl=Ne({target:window.CSSGroupingRule.prototype,methodName:"deleteRule",hook:({context:C})=>this.processUpdateRule(C)})),!((p=window.StyleSheet)===null||p===void 0)&&p.prototype&&"disabled"in window.StyleSheet.prototype&&(this.Ul=Mi(window.StyleSheet.prototype,"disabled",(C,_,T)=>{_!==T&&this.GS(C,_)})),typeof((m=(y=window.CSSStyleDeclaration)===null||y===void 0?void 0:y.prototype)===null||m===void 0?void 0:m.setProperty)=="function"&&(this.jl=Ne({target:window.CSSStyleDeclaration.prototype,methodName:"setProperty",hook:({context:C})=>{let _=C.parentRule;_ instanceof CSSStyleRule&&this.processUpdateRule(_)}})),typeof((b=(v=window.CSSStyleDeclaration)===null||v===void 0?void 0:v.prototype)===null||b===void 0?void 0:b.removeProperty)=="function"&&(this.Hl=Ne({target:window.CSSStyleDeclaration.prototype,methodName:"removeProperty",hook:({context:C})=>{let _=C.parentRule;_ instanceof CSSStyleRule&&this.processUpdateRule(_)}})),Object.getOwnPropertyDescriptor(window.CSSStyleRule.prototype,"style")&&(this.Bl=iy(window.CSSStyleRule.prototype,"style",C=>{this.processUpdateRule(C)}))}observe(){var t,e,i,n,o,c,l,h;(t=this.kl)===null||t===void 0||t.activate(),(e=this.xl)===null||e===void 0||e.activate(),(i=this.Ll)===null||i===void 0||i.activate(),(n=this.Vl)===null||n===void 0||n.activate(),(o=this.Ul)===null||o===void 0||o.activate(),(c=this.jl)===null||c===void 0||c.activate(),(l=this.Hl)===null||l===void 0||l.activate(),(h=this.Bl)===null||h===void 0||h.activate()}disconnect(){var t,e,i,n,o,c,l,h;(t=this.kl)===null||t===void 0||t.deactivate(),(e=this.xl)===null||e===void 0||e.deactivate(),(i=this.Ll)===null||i===void 0||i.deactivate(),(n=this.Vl)===null||n===void 0||n.deactivate(),(o=this.Ul)===null||o===void 0||o.deactivate(),(c=this.jl)===null||c===void 0||c.deactivate(),(l=this.Hl)===null||l===void 0||l.deactivate(),(h=this.Bl)===null||h===void 0||h.deactivate()}processInsertRule(t,[e,i]){if(t[Me]==null&&!t.ownerNode)return;let n={type:"cssRuleInserted",sheet:t,rule:e,index:i};this.A(n)}processUpdateRule(t){let e=t;for(;e.parentRule!==null;)e=e.parentRule;e.parentStyleSheet!==null&&this.zS.push(e)}processUpdateRulesInATick(t){for(let e of t){if(e.parentStyleSheet===null)return;let i=e.parentStyleSheet,n=csArray.prototype.indexOf.call(Ii(i.cssRules),e);if(n===-1)return;let o={type:"cssRuleUpdated",sheet:i,rule:e.cssText,index:n};this.A(o)}}processDeleteRule(t,[e]){if(t[Me]==null&&!t.ownerNode)return;let i={type:"cssRuleDeleted",sheet:t,index:e};this.A(i)}GS(t,e){if(t[Me]==null&&!t.ownerNode)return;let i={type:"cssStyleSheetDisabled",sheet:t,disabled:e};this.A(i)}}return rt([N()],s.prototype,"observe",null),rt([N()],s.prototype,"disconnect",null),rt([N()],s.prototype,"processInsertRule",null),rt([N()],s.prototype,"processUpdateRule",null),rt([N()],s.prototype,"processUpdateRulesInATick",null),rt([N()],s.prototype,"processDeleteRule",null),s})(),ai=(()=>{var s;class r{static qS(e){this.si.forEach(i=>{e(i,"initial")})}static Tn(e){if(this.U||(this.U=new csMutationObserver(i=>{for(let n of i)n.target.isConnected&&J(n.addedNodes,this.WS),J(n.removedNodes,this.YS)})),csArray.prototype.push.call(this.Ie,e),!this.Y){this.Y=!0,this.U.observe(document,this.bn);for(let i of Is.getAllShadowHosts(document)){let n=csElementshadowRoot.apply(i);this.si.add(n),this.U.observe(n,this.bn)}this.Fl||(this.Fl=Ne({target:Element.prototype,methodName:"attachShadow",hook:i=>this.yr(i.result)&&this.zf(i.result)})),this.Fl.activate()}this.qS(e)}static yr(e){return e.isConnected&&e.ownerDocument===document}static Rn(e){var i,n;this.Ie=csArray.prototype.filter.call(this.Ie,o=>o!==e),this.Ie.length===0&&(this.Ie=[],this.Y=!1,(i=this.U)===null||i===void 0||i.disconnect(),(n=this.Fl)===null||n===void 0||n.deactivate(),this.si.clear())}constructor(e){this.A=e,this.A=ps("DocumentShadowRootObserver:callback",(i,n)=>e(i,n))}get shadowRoots(){return gs(s.si)}takeRecords(){var e,i;return(i=(e=s.U)===null||e===void 0?void 0:e.takeRecords())!==null&&i!==void 0?i:[]}observe(){Is.isSupported()&&s.Tn(this.A)}disconnect(){Is.isSupported()&&s.Rn(this.A)}}return s=r,r.Ie=[],r.si=new Set,r.Y=!1,r.bn={childList:!0,subtree:!0},r.zf=t=>{s.si.has(t)||(s.U.observe(t,s.bn),s.si.add(t),J(s.Ie,e=>e(t,"added")))},r.WS=t=>{ae(t,NodeFilter.SHOW_DOCUMENT_FRAGMENT).visitAll(s.zf)},r.YS=t=>{t.isConnected||ae(t,NodeFilter.SHOW_DOCUMENT_FRAGMENT).visitAll(e=>{s.si.has(e)&&(s.si.delete(e),J(s.Ie,i=>i(e,"removed")))})},rt([N()],r.prototype,"observe",null),rt([N()],r.prototype,"disconnect",null),r})(),hy=(()=>{class s{constructor(t){this.XS=1,this.Sa=new Set,this.$l=null,this.zl=null,this.Gl=(e,i)=>{(i==="initial"||i==="added")&&this.setStyleSheets(e,e.adoptedStyleSheets)},this.KS=e=>{let i=e.sheet;if(this.Sa.has(i)){if(e.type==="cssRuleInserted"){let n={type:"adoptedStyleSheetRuleInserted",sheetId:i[Me],rule:e.rule,index:e.index};this.A(n)}else if(e.type==="cssRuleDeleted"){let n={type:"adoptedStyleSheetRuleDeleted",sheetId:i[Me],index:e.index};this.A(n)}else if(e.type==="cssRuleUpdated"){let n={type:"adoptedStyleSheetRuleUpdated",sheetId:i[Me],rule:e.rule,index:e.index};this.A(n)}else if(e.type==="cssStyleSheetDisabled"){let n={type:"adoptedStyleSheetDisabled",sheetId:i[Me],disabled:e.disabled};this.A(n)}}},this.A=e=>Yt(()=>Q(this,null,function*(){yield sl(2),t(e)})),this.fe=new ai(this.Gl),"adoptedStyleSheets"in Document.prototype&&(this.$l=Mi(window.Document.prototype,"adoptedStyleSheets",(e,i)=>{this.setStyleSheets(e,i)})),"ShadowRoot"in window&&"adoptedStyleSheets"in window.ShadowRoot.prototype&&(this.zl=Mi(window.ShadowRoot.prototype,"adoptedStyleSheets",(e,i)=>{this.setStyleSheets(e,i)})),this.Gf=new Jo(this.KS)}observe(){var t,e;this.setStyleSheets(document,document.adoptedStyleSheets),this.fe.observe(),(t=this.$l)===null||t===void 0||t.activate(),(e=this.zl)===null||e===void 0||e.activate(),this.Gf.observe()}disconnect(){var t,e;this.Sa.clear(),this.fe.disconnect(),(t=this.$l)===null||t===void 0||t.deactivate(),(e=this.zl)===null||e===void 0||e.deactivate(),this.Gf.disconnect()}setStyleSheets(t,e){if(!e.length)return;this.JS(e);let i=xe(e,o=>o[Me]),n={type:"adoptedStyleSheetsSet",target:t,sheetsIds:i};this.A(n)}JS(t){J(t,e=>{if(this.Sa.has(e))return;let i=this.XS++;e[Me]=i,this.Sa.add(e);let n=this.QS(e),o={type:"adoptedStyleSheetRegistered",sheetId:i,cssRules:n,disabled:e==null?void 0:e.disabled};this.A(o)})}QS(t){let e=[];try{e=xe(t.cssRules,i=>i.cssText)}catch(i){}return e}}return rt([N()],s.prototype,"observe",null),rt([N()],s.prototype,"disconnect",null),rt([N()],s.prototype,"setStyleSheets",null),s})(),uy=Vs(gy,"optimizeMutations"),dy=csSymbol.for("ignoreNextSerialization");function fy(){let s=new Set,r=new Set,t=new Set,e=new Set,i=new Map,n=new Map,o=new Map,c=new Set,l=new Set,h=new Map,d=new Set;return{isMovedNode(p){return s.has(p)},markAsMovedNode(p){d.delete(p),s.add(p)},isDetachedMove(p){return!!lt.findAncestor(p,y=>d.has(y),!0)},isAddedNode(p){let y=lt.findAncestor(p,m=>r.has(m)||l.has(m)||s.has(m),!0);return!!y&&!s.has(y)},isMovedNodeIntoAddedNode(p){return s.has(p)&&!!lt.findAncestor(p,y=>r.has(y)||l.has(y),!0)},markAsAddedNode(p){d.delete(p),l.delete(p),r.add(p)},markAsPendingInsert(p){l.add(p)},isPendingInsert(p){return l.has(p)},isRemovedNode(p){return!!lt.findAncestor(p,y=>t.has(y),!0)},markAsRemovedNode(p){t.add(p)},isUselessNode(p){return e.has(p)},markAsUselessNode(p){e.add(p)},getPlaceholder(p,y){let m=y==="previous"?n:i;return p&&m.has(p)?m.get(p)||null:p},getSiblings(p){let y=p.addedNodes.length,m=this.getPlaceholder(p.previousSibling,"previous"),v=this.getPlaceholder(p.nextSibling,"next");if(y){let b=m,C=v,_=p.previousSibling!==m,T=p.nextSibling!==v;for(let x=0;x<y;x++){let O=p.addedNodes[x],w=p.addedNodes[y-x-1];this.isLatestNodeMutation(O,p)?(n.delete(O),p.previousSibling&&_&&(i.set(p.previousSibling,O),_=!1),b=O):n.set(O,b),this.isLatestNodeMutation(w,p)?(i.delete(w),p.nextSibling&&T&&(n.set(p.nextSibling,w),T=!1),C=w):i.set(w,C)}}else p.previousSibling&&p.previousSibling!==m&&i.set(p.previousSibling,v),p.nextSibling&&p.nextSibling!==v&&n.set(p.nextSibling,m);return{previousSibling:m,nextSibling:v}},setAttributeMutation(p,y){let m=o.get(p)||new Set;m.add(y),o.set(p,m)},isAttributeMutated(p,y){var m;return!!(!((m=o.get(p))===null||m===void 0)&&m.has(y))},setLatestNodeMutation(p,y){h.set(p,y)},isLatestNodeMutation(p,y){return h.get(p)===y},markAsFutureAddedNode(p){h.has(p)||d.add(p)},isTextMutated(p){return c.has(p)},setTextMutated(p){return c.add(p)}}}function py(s,r){for(let t=0;t<s.addedNodes.length;t++){let e=s.addedNodes[t];r.markAsFutureAddedNode(e),r.setLatestNodeMutation(e,s)}for(let t=0;t<s.removedNodes.length;t++){let e=s.removedNodes[t];r.setLatestNodeMutation(e,s)}}function gy(s){let r=fy(),t=[];for(let e of s)e.type==="childList"&&py(e,r);for(let e of s)switch(e.type){case"attributes":yy(e,r,t);break;case"characterData":my(e,r,t);break;case"childList":Sy(e,r,t);break}return t}function my(s,r,t=[]){let e=s.target;return lt.isConnected(e)&&!r.isTextMutated(e)&&!r.isAddedNode(e)&&!vy(e,"characterData")&&(r.setTextMutated(e),csArray.prototype.push.call(t,s)),t}function yy(s,r,t=[]){let e=s.target,i=`${s.attributeNamespace}/${s.attributeName}`;return lt.isConnected(e)&&!r.isAttributeMutated(e,i)&&!r.isAddedNode(e)&&(r.setAttributeMutation(e,i),csArray.prototype.push.call(t,s)),t}var Ey=30;function vy(s,r,t){let e=csSymbol.for(t?`${r}:${t}`:r),i=k.now(),n=s[e];return n&&i<n?!0:(s[e]=i+Ey,!1)}function Sy(s,r,t=[]){let e=lt.isConnected(s.target),i=!e&&r.isRemovedNode(s.target),n=e&&r.isAddedNode(s.target),o=r.getSiblings(s),c=o.nextSibling,l=o.previousSibling,h=null,d=()=>{if(h){let m=h,{childListType:v,movedNodes:b}=m,C=sn(m,["childListType","movedNodes"]);csArray.prototype.push.call(t,v==="added"?C:ct(j({},C),{movedNodes:b})),h=null}},p=m=>m===(h==null?void 0:h.childListType)?h:(d(),{childListType:m,type:"childList",target:s.target,addedNodes:[],removedNodes:[],movedNodes:[],previousSibling:l,nextSibling:c});if(e){for(let m=0;m<s.addedNodes.length;m++){let v=s.addedNodes[m];r.isLatestNodeMutation(v,s)?(r.isMovedNode(v)?(h=p("moved"),csArray.prototype.push.call(h.movedNodes,v)):(r.markAsAddedNode(v),n||(h=p("added"),csArray.prototype.push.call(h.addedNodes,v))),l=v):lt.isConnected(v)?r.isMovedNode(v)||r.markAsPendingInsert(v):r.markAsUselessNode(v)}d()}let y=Rr(s.removedNodes,m=>{if(lt.isConnected(m)){if(!i&&!r.isPendingInsert(m)){if(r.isDetachedMove(m))return!0;r.markAsMovedNode(m),r.isMovedNodeIntoAddedNode(m)&&(m[dy]=!0)}return!1}return r.isUselessNode(m)?!1:(r.markAsRemovedNode(m),!0)});return y.length&&csArray.prototype.push.call(t,{type:"childList",removedNodes:y,addedNodes:[],movedNodes:[],target:s.target,nextSibling:c,previousSibling:l}),t}var cc={childList:!0,subtree:!0,attributes:!0,characterData:!0,characterDataOldValue:!0,attributeOldValue:!0},Te=(()=>{var s;class r{static setShadowRootFilter(e){csArray.prototype.push.call(s.shadowRootFilters,e)}static ql(e){if(s.shadowRootFilters.length>0&&Pi(e))for(let i=0;i<s.shadowRootFilters.length;i++){let n=s.shadowRootFilters[i];if(n(e))return}this.observedTargets.add(e),this.mutationObserver.observe(e,cc)}static disconnectShadowRoot(e){this.observedTargets.has(e)&&(this.observedTargets.delete(e),this.isRefreshing||(this.isRefreshing=!0,Yt(()=>{this.isRefreshing=!1;let i=this.mutationObserver.takeRecords();i.length&&s.mutationCallback(i),this.mutationObserver.disconnect(),this.observedTargets.forEach(n=>{this.mutationObserver.observe(n,cc)})})))}static observe(e,i){csArray.prototype.push.call(this.callbacks,e),i&&csArray.prototype.push.call(this.shadowRootCallbacks,i),this.started?i&&csArray.prototype.forEach.call(Is.getAllShadowHosts(document),n=>i(csElementshadowRoot.apply(n),"initial")):(this.mutationObserver=new csMutationObserver(this.mutationCallback),this.ql(document),this.shadowRootObserver=new ai(this.onShadowRoot),this.shadowRootObserver.observe(),this.started=!0,J(this.shadowRootObserver.shadowRoots,n=>{this.ql(n)}))}static disconnect(e,i){var n,o;this.callbacks=csArray.prototype.filter.call(this.callbacks,c=>c!==e),i&&(this.shadowRootCallbacks=csArray.prototype.filter.call(this.shadowRootCallbacks,c=>c!==i)),this.callbacks.length===0&&(this.callbacks=[],this.shadowRootCallbacks=[],s.shadowRootFilters=[],(n=this.shadowRootObserver)===null||n===void 0||n.disconnect(),(o=this.mutationObserver)===null||o===void 0||o.disconnect(),this.observedTargets.clear(),this.started=!1)}constructor(e,i){this.A=e,this.qf=i;let n=Fr(o=>e(o,this),!0);this.A=ps("DocumentMutationObserver:callback",o=>{J(o,c=>n.push(c))})}get shadowRoots(){var e,i;return(i=(e=s.shadowRootObserver)===null||e===void 0?void 0:e.shadowRoots)!==null&&i!==void 0?i:[]}takeRecords(){var e;let i=(e=s.mutationObserver)===null||e===void 0?void 0:e.takeRecords(),n=s.shadowRootObserver.takeRecords();return i!=null&&i.length&&n.length?Ed(i,n):i!=null?i:n}observe(){s.observe(this.A,this.qf)}disconnect(){s.disconnect(this.A,this.qf)}}return s=r,r.callbacks=[],r.shadowRootCallbacks=[],r.started=!1,r.observedTargets=new Set,r.shadowRootFilters=[],r.mutationCallback=t=>{_t.mutations.count.increase(t.length),csArray.prototype.forEach.call(s.callbacks,e=>e(t,s.mutationObserver))},r.onShadowRoot=(t,e)=>{J(s.shadowRootCallbacks,i=>i(t,e)),e!=="removed"?s.ql(t):s.disconnectShadowRoot(t)},r.isRefreshing=!1,rt([N()],r.prototype,"observe",null),rt([N()],r.prototype,"disconnect",null),r})(),_y=(()=>{class s{constructor(t){this.A=t,this.Wl=!1,this.ZS=e=>{e.sheet.ownerNode&&(e.type==="cssRuleInserted"?this.A({type:e.type,target:e.sheet.ownerNode,rule:e.rule,index:e.index}):e.type==="cssRuleDeleted"?this.A({type:e.type,target:e.sheet.ownerNode,index:e.index}):e.type==="cssRuleUpdated"?this.A({type:e.type,target:e.sheet.ownerNode,rule:e.rule,index:e.index}):e.type==="cssStyleSheetDisabled"&&this.A({type:e.type,target:e.sheet.ownerNode,disabled:e.disabled}))},this.A=e=>Yt(()=>t(e)),this.Wf=new Jo(e=>Yt(()=>Q(this,null,function*(){yield sl(),this.ZS(e)}))),"adoptedStyleSheets"in Document.prototype&&(this.Yf=new hy(t))}observe(){var t;this.Wl=!1,this.U=new Te(e=>this.t_(e),(e,i)=>{i==="added"&&this.e_(e)}),this.U.observe(),this.Wf.observe(),(t=this.Yf)===null||t===void 0||t.observe()}disconnect(){var t,e;(t=this.U)===null||t===void 0||t.disconnect(),this.Wf.disconnect(),(e=this.Yf)===null||e===void 0||e.disconnect(),this.Wl=!0}t_(t){if(this.Wl)return;let e=uy(t);for(let i=0;i<e.length;i++){let n=e[i];if(!n){ht.error("processRawMutations: empty record");continue}switch(n.type){case"attributes":this.processAttributeChanged(n);break;case"characterData":this.processCharacterDataChanged(n);break;case"childList":this.processChildListChanged(n);break;default:ht.error(`processRawMutations: unknown record type '${n.type}'`);break}}}processAttributeChanged(t){let e={type:"attributeChanged",target:t.target,attribute:t.attributeName,namespace:t.attributeNamespace,oldValue:t.oldValue,newValue:lt.getAttributeNS(t.target,t.attributeNamespace,t.attributeName)};this.A(e)}processCharacterDataChanged(t){let e={type:"characterDataChanged",target:t.target,oldValue:t.oldValue,newValue:t.target.data};this.A(e)}processChildListChanged(t){var e,i,n;if(!((e=t.movedNodes)===null||e===void 0)&&e.length){let o={type:"nodesMoved",target:t.target,nodes:t.movedNodes,previousSibling:t.previousSibling,nextSibling:t.nextSibling};this.A(o)}if(!((i=t.addedNodes)===null||i===void 0)&&i.length){let o={type:"nodesAdded",target:t.target,previousSibling:t.previousSibling,nextSibling:t.nextSibling,nodes:Ii(t.addedNodes)};this.A(o)}if(!((n=t.removedNodes)===null||n===void 0)&&n.length){let o={type:"nodesRemoved",target:t.target,nodes:xe(t.removedNodes,c=>c)};this.A(o)}}e_(t){let e={type:"shadowRootAttached",target:t.host,shadowRoot:t};this.A(e)}}return rt([N()],s.prototype,"processAttributeChanged",null),rt([N()],s.prototype,"processCharacterDataChanged",null),rt([N()],s.prototype,"processChildListChanged",null),s})(),wy=(()=>{class s extends Us{constructor(t){super(t),this.nodeType=4,this.data=t.data}}return s})(),Ay=(()=>{class s extends Us{constructor(t){super(t),this.nodeType=8,this.data=t.data}}return s})(),Ty=(()=>{class s extends Us{constructor(t){super(t),this.nodeType=10,this.name=t.name,this.publicId=t.publicId,this.systemId=t.systemId}}return s})(),by=(()=>{class s extends Us{constructor(t){super(t),this.nodeType=9,this.baseURI=s.getBaseURI(t),this.children=[]}static getBaseURI(t){let e=t.baseURI;if(e==null){let i=t.getElementsByTagName("base");e=i.length!==0?i[0].href:t.URL}return e}}return s})(),Ry=(()=>{class s extends Us{constructor(t){super(t),this.nodeType=11,this.mode=t.mode,this.children=[]}}return s})(),Cy=(()=>{class s{constructor(t,e,i){var n;typeof t=="string"?(this.name=t,this.value=e,this.namespaceURI=i!=null?i:""):(this.name=t.name,this.value=t.value,this.namespaceURI=(n=t.namespaceURI)!==null&&n!==void 0?n:"")}static create(t){let e=t.attributes,i=new csArray(e.length);for(let n=0;n<i.length;n++){let o=e[n];i[n]=new s(o.name,o.value,o.namespaceURI),o.name==="href"&&Po(t)&&(i[n].value=Kl(t))}return i}}return s})(),lc={workTime:40,async:!0,initialDOM:!0};var Ai=csSymbol("InitialDom"),hc=csSymbol.for("ignoreNextSerialization");function eh(s){return s[hc]?(delete s[hc],!0):!1}function Iy(s=lc){return function(t,e){var i;(i=s.workTime)!==null&&i!==void 0||(s.workTime=lc.workTime);let n=ps("serialize:callback",y=>e(y)),o=new Li,c=(y,m)=>{y.hasChildNodes()&&o.push({node:y,serializedNode:m});let v=y instanceof Element&&csElementshadowRoot.apply(y);if(v){let b=m.shadowRoot=Ti(v);s.async&&s.initialDOM&&at.setProperty(v,Ai,!0),c(v,b)}},l,h=!0,d=8,p=ps("work",()=>{var y;if(h)l=Ti(t),s.async&&s.initialDOM&&at.setProperty(t,Ai,!0),c(t,l),h=!1;else if(o.isEmpty)return;let m=Ny(100);for(;!o.isEmpty;){if(s.async&&m.elapsed()>=s.workTime){--d<=0&&csSetTimeout(p);return}let{node:v,serializedNode:b}=o.pop(),C=(y=b.children)!==null&&y!==void 0?y:[];if(Vr(v))continue;let _=0;for(let T=csNodefirstChild.apply(v);T;T=csNodenextSibling.apply(T)){if(eh(T))continue;let x=Ti(T);s.async&&s.initialDOM&&at.setProperty(T,Ai,!0),C[_++]=x,c(T,x)}}s.async?csSetTimeout(()=>n(l)):e(l)});if(!s.async)s.workTime=1/0,p();else for(let y=0;y<d;y++)csSetTimeout(p,1)}}function Py(s){let r=Ti(s),t=r;if(Vr(s))return r;let e=0;for(let n=csNodefirstChild.apply(s);n;n=csNodenextSibling.apply(n))eh(n)||(t.children[e++]=io(n));let i=s.shadowRoot;return i&&(t.shadowRoot=io(i)),r}var io=Vs(Py,"serializeSync");function Ti(s){let r,t;switch(csNodenodeType.apply(s)){case 1:t=r=new ke(s),r.attributes=My(s);break;case 3:t=new Ql(s);break;case 4:t=new wy(s);break;case 8:t=new Ay(s);break;case 10:t=new Ty(s);break;case 9:t=new by(s);break;case 11:t=new Ry(s);break;default:throw new Error("Node type not supported: "+csNodenodeType.apply(s))}return t}function Oy(){Ai=csSymbol("InitialDom")}function Ny(s){if(s<1)throw new Error("Precision should be >= 1");let r=0,t=k.elapsed();return{started:t,elapsed(){return++r%s===0&&(t=k.elapsed()),t-this.started}}}function My(s){return Vr(s)?[]:Cy.create(s)}var Qo=(()=>{class s{constructor(t){this.type="asyncEvent",this.Yl=!1,t&&t(e=>this.resolve(e))}resolve(t){if(this.Yl)throw new Error("AsyncEvent already resolve.");t.timestamp==null&&(t=ct(j({},t),{timestamp:this.timestamp})),this.ii=t,this.Yl=!0,this.A&&this.A(this.ii)}complete(t){this.Yl&&t(this.ii),this.A=t}wait(){return new Promise(t=>this.complete(t))}}return s})(),fe=(()=>{class s{constructor(){this.Pt=[],this.isStarted=!1}produceEvent(t){return Q(this,null,function*(){var e;this.isStarted&&(t.timestamp=(e=t.timestamp)!==null&&e!==void 0?e:k.now(),t.timestamp==null&&(t.timestamp=k.now()),csArray.prototype.forEach.call(this.Pt,i=>i(t)))})}onStop(){}start(){this.isStarted||(this.isStarted=!0,this.onStart())}stop(){this.isStarted&&(this.isStarted=!1,this.onStop(),this.Pt=[])}stopForInactivity(){this.isStarted&&(this.isStarted=!1,this.onStop())}subscribe(t){return csArray.prototype.push.call(this.Pt,t),()=>{let e=csArray.prototype.indexOf.call(this.Pt,t);csArray.prototype.splice.call(this.Pt,e,1)}}}return s})(),Dy=Iy(),ky=(()=>{class s extends fe{constructor(){super(...arguments),this._a=!1}onStart(){this._a=!0,this.A=Km(this.s_,this),this.G=new _y(this.A),this.G.observe();let t=_t.mutations.initialDOM.asyncMeasure(),e=()=>{this._a=!1,Oy(),t()};this.produceEvent(new Qo(i=>Dy(document,n=>{e(),i({type:"DomEvent",domEvent:"initialDOM",initialDOM:n})})))}onStop(){var t,e;this._a=!1,(t=this.A)===null||t===void 0||t.cancel(),(e=this.G)===null||e===void 0||e.disconnect()}Xt(t,e){let i={type:"DomEvent",domEvent:e.type,target:0,targetProps:{}};return"target"in e&&(i.target=W(e.target),i.targetProps=at.getProperties(e.target)),[e,i]}s_(t){if(!this.i_(t))switch(t.type){case"attributeChanged":{let[e,i]=this.Xt(t.type,t);i.attribute=e.attribute,i.isSvg=ni(e.target),i.namespace=e.namespace,i.newValue=e.newValue,i.oldValue=e.oldValue,i.localName=vi(e.target),i.linkRel=cl(e.target)?e.target.rel:null,i.parentLocalName=e.target.parentElement?vi(e.target.parentElement):void 0,i.localName==="input"&&(i.inputType=e.target.getAttribute("type")),this.produceEvent(i)}break;case"characterDataChanged":{let[e,i]=this.Xt(t.type,t);i.newValue=e.newValue,i.oldValue=e.oldValue,i.targetNodeType=csNodenodeType.apply(e.target),i.parentLocalName=e.target.parentElement?vi(e.target.parentElement):null,i.parentProps=e.target.parentElement?at.getProperties(e.target.parentElement):void 0,this.produceEvent(i)}break;case"nodesAdded":{let[e,i]=this.Xt(t.type,t);i.targetLocalName=pt(e.target)?vi(e.target):null,i.nextSibling=e.nextSibling?W(e.nextSibling):null,i.previousSibling=e.previousSibling?W(e.previousSibling):null,_t.mutations.serializedMutations.measure(()=>{i.nodes=xe(e.nodes,io)}),this.produceEvent(i);break}case"nodesMoved":{let[e,i]=this.Xt(t.type,t);i.previousSibling=e.previousSibling?W(e.previousSibling):null,i.nextSibling=e.nextSibling?W(e.nextSibling):null,i.nodesIds=xe(e.nodes,W),this.produceEvent(i);break}case"nodesRemoved":{let[e,i]=this.Xt(t.type,t);i.nodesIds=xe(e.nodes,W),this.produceEvent(i);break}case"shadowRootAttached":{let[e,i]=this.Xt(t.type,t);i.shadowRoot=Ti(e.shadowRoot),this.produceEvent(i);break}case"cssRuleInserted":{let[e,i]=this.Xt(t.type,t);i.index=e.index,i.rule=e.rule,this.produceEvent(i);break}case"cssRuleDeleted":{let[e,i]=this.Xt(t.type,t);i.index=e.index,this.produceEvent(i);break}case"cssRuleUpdated":{let[e,i]=this.Xt(t.type,t);i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"cssStyleSheetDisabled":{let[e,i]=this.Xt(t.type,t);i.disabled=e.disabled,this.produceEvent(i);break}case"adoptedStyleSheetRegistered":{let[e,i]=this.Xt(t.type,t);i.sheetId=e.sheetId,i.cssRules=e.cssRules,i.disabled=e.disabled,this.produceEvent(i);break}case"adoptedStyleSheetsSet":{let[e,i]=this.Xt(t.type,t);i.sheetsIds=e.sheetsIds,this.produceEvent(i);break}case"adoptedStyleSheetRuleInserted":{let[e,i]=this.Xt(t.type,t);i.sheetId=e.sheetId,i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetRuleDeleted":{let[e,i]=this.Xt(t.type,t);i.sheetId=e.sheetId,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetRuleUpdated":{let[e,i]=this.Xt(t.type,t);i.sheetId=e.sheetId,i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetDisabled":{let[e,i]=this.Xt(t.type,t);i.sheetId=e.sheetId,i.disabled=e.disabled,this.produceEvent(i);break}}}wa(t){return this._a&&!at.getProperty(t,Ai)}i_(t){switch(t.type){case"nodesAdded":case"nodesMoved":case"nodesRemoved":case"shadowRootAttached":return this.wa(t.target)||D.isMaskedElement(t.target)||D.isMaskedElementChild(t.target);case"characterDataChanged":{let e=t.target.parentElement;return e!==null&&(this.wa(e)||D.isMaskedElement(e)||D.isMaskedElementChild(e))}case"attributeChanged":return this.wa(t.target)||D.isMaskedElementChild(t.target)||D.isMaskedAttribute(t.target,t.attribute);case"cssRuleInserted":case"cssRuleDeleted":case"cssRuleUpdated":case"cssStyleSheetDisabled":return this.wa(t.target)||D.isMaskedElementChild(t.target);default:return!1}}}return s})(),si=(()=>{let s;return function(r){function t(e){return e.type==="DomEvent"}r.isDOMEvent=t}(s||(s={})),s})(),ci=(()=>{class s{constructor(){this.Pt=[]}start(){}stop(){this.Pt.length=0,this.Pt=[]}pushEvent(t){if(s.pendingEvents++,this.isListening(t)){let e=this.Pt;csSetTimeout(()=>{let n=ps("Processor:processEvent",o=>this.processEvent(o))(t);n!=null&&csArray.prototype.forEach.call(e,o=>o(n)),s.pendingEvents--})}else csSetTimeout(()=>{csArray.prototype.forEach.call(this.Pt,e=>e(t))})}subscribe(t){return csArray.prototype.push.call(this.Pt,t),()=>{this.Pt=csArray.prototype.filter.call(this.Pt,e=>e!==t)}}emitEvent(t){Yt(()=>csArray.prototype.forEach.call(this.Pt,e=>e(t)))}}return s.pendingEvents=0,s})(),xy=(()=>{class s extends ci{isListening(t){return t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE"||si.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded")}processEvent(t){if(t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE")return this.processFastDOM(t),t;let e=0,i=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes;for(let n of i){if(n instanceof ke){let c=D.getMaskedAttributeDetails(n);n.attributes=this.Aa(n,c)}if(D.getMaskedElementDetails(n).state===D.MaskedElementState.Child){if(t.domEvent==="initialDOM")return null;t.nodes=csArray.prototype.filter.call(t.nodes,c=>c!==n);continue}at.traverse(n,c=>{if(c instanceof ke){let l=D.getMaskedAttributeDetails(c);c.attributes=this.Aa(c,l);let h=D.getMaskedElementDetails(c);h.state===D.MaskedElementState.Parent&&(this.Ta(c,h),e++)}})}return e>0&&q.counters.sensitiveElements.count("masked-elements",e),t}processFastDOM(t){var e;let{MaskedElementState:i}=D,n=t.type==="DOM_PATCH"?t.diff:t.state,o=t.state;for(let c in n){let l=n[c],h=o[c],d=D.getMaskedElementDetails(h);if(d.state===i.Child){delete n[c];continue}else if(h.type!==1)continue;let p=D.getMaskedAttributeDetails(h);for(let y of(e=p.attributes)!==null&&e!==void 0?e:[])l.attributes&&delete l.attributes[y];d.state===i.Parent&&this.Ta(l,d)}}Aa(t,e){return e.attributes.length===0?t.attributes:csArray.prototype.filter.call(t.attributes,i=>csArray.prototype.indexOf.call(e.attributes,i.name)===-1)}Ta(t,e){var i;let n=`width: ${e.width}px !important; height: ${e.height}px !important;`;"nodeType"in t?(t.children=[],t.shadowRoot=void 0,csArray.prototype.push.call(t.attributes,{name:"style",value:n,namespaceURI:""}),ke.getAttribute(t,"data-cs-mask")||csArray.prototype.push.call(t.attributes,{name:"data-cs-mask",value:"",namespaceURI:""})):((i=t.attributes)!==null&&i!==void 0||(t.attributes={}),delete t.firstChild,delete t.shadowRoot,t.attributes.style=n,t.attributes["data-cs-mask"]||(t.attributes["data-cs-mask"]=""))}}return Ve([Nt("MaskedElementProcessor.processEvent")],s.prototype,"processEvent",null),s})(),Ee=(()=>{let s;return function(r){r.ANONYMIZED_TEXT_STATUS_PROP="anonymizationStatus",r.WHITELISTED_STATUS="whitelisted";function t(n){return at.getProperty(n,r.ANONYMIZED_TEXT_STATUS_PROP)===r.WHITELISTED_STATUS}r.isWhitelistedElement=t;function e(n){at.setProperty(n,r.ANONYMIZED_TEXT_STATUS_PROP,r.WHITELISTED_STATUS)}r.whitelistElement=e;function i(n){at.setProperty(n,r.ANONYMIZED_TEXT_STATUS_PROP,void 0)}r.removeWhitelistElement=i}(s||(s={})),s})(),Ly=/[\u4E00-\u9FFF]|[\u3000-\u303F]|[\u3040-\u309F]|[\u30A0-\u30FF]|[\uFF00-\uFFEF]/g,Vy="\uFF41",Uy=/[^\s]/g,jy="a";function Sn(s){let r=csString.prototype.replace.call(s,Ly,Vy);return csString.prototype.replace.call(r,Uy,jy)}function Hy(s,r){let t=r==="number"?"0":"\u2022";return csString.prototype.replace.call(s,/\S/g,t)}var By=(()=>{class s{constructor(t,e,i,n=null,o=!1){this.us=t,this.Cn=e,this.D=i,this.ba=n,this.r_=o,this.In=Lo(this.Cn)}sanitize(t,e){return at.traverse(t,(i,n)=>{if(i.anonymized=this.us,i.nodeType===ds.TEXT_NODE){let o=i,{anonymizedValue:c,withAnonymization:l}=this.getAnonymizedValue(o.data,n?n==null?void 0:n.localName:e==null?void 0:e.targetLocalName,n?at.getProperties(n):e==null?void 0:e.targetProps);i.anonymized=l,o.data=c;return}if(ke.isElement(i))return this.n_(i);if(i.nodeType===ds.CDATA_SECTION_NODE){let o=i;o.data=this.us?Sn(o.data):this.D.checkAndAnonymizePII(o.data,this.ba);return}}),t}setAnonymization(t){this.us=t}getAnonymizedValue(t,e,i){if(e==="style")return{anonymizedValue:t,withAnonymization:!1};let n=(i==null?void 0:i[Ee.ANONYMIZED_TEXT_STATUS_PROP])===Ee.WHITELISTED_STATUS;return this.us&&!n?{anonymizedValue:Sn(t),withAnonymization:!0}:{anonymizedValue:this.D.checkAndAnonymizePII(t,this.ba),withAnonymization:!1}}n_(t){let e=ri(t.attributes,n=>n.name==="type"),i=e==null?void 0:e.value;t.attributes=csArray.prototype.map.call(t.attributes,n=>(n.anonymized=this.us,n.value=this.getAnonymizedAttributeValue(t.namespaceURI,t.localName,n.name,n.value,i),n))}getAnonymizedAttributeValue(t,e,i,n,o){if(t==="http://www.w3.org/2000/svg"||t==="svg"||this.o_(e,i,o))return n;if(Kf(i))return Jf(e,i,n)?this.D.anonymizePII(n):n;let c=this.r_&&i==="placeholder";return this.us&&(Qf(e,i,o)||c)?Sn(n):this.us?"":this.D.checkAndAnonymizePII(n,null)}o_(t,e,i){return Xf(t,e,i)||this.In.has(e)}}return s})(),uc=(()=>{class s{static create(t,e){if(!s.isSupported())throw new Error("IntersectionObserver is not supported");if(e&&e.delay&&e.delay<100)throw new Error("Visibility delay should be > 100ms");return e!=null&&e.trackVisibility&&(t=s.a_(t)),new csIntersectionObserver(t,e)}static isSupported(){return!!window.csIntersectionObserver&&!!window.IntersectionObserverEntry}static a_(t){return(e,i)=>t(xe(e,Fy),i)}}return s})();function Fy(s){return s.isVisible||!lt.isVisibleInViewportInForeground(s.target)?s:{boundingClientRect:s.boundingClientRect,intersectionRatio:s.intersectionRatio,intersectionRect:s.intersectionRect,isIntersecting:s.isIntersecting,rootBounds:s.rootBounds,target:s.target,time:s.time,isVisible:!0}}var ro=()=>(s,r,t)=>{t.value=$y(t.value)};function $y(s){let r=csSymbol("oncePerTickSymbol"),t=null,e={},i=function(){var n;let o=(n=this)!==null&&n!==void 0?n:e;if(t=arguments,o[r])return;o[r]=!0,Ro(()=>{o[r]=!1,s.apply(o,t)})};return i.oncePerTickSymbol=r,i}ro.isScheduled=(s,r)=>{let t=r.oncePerTickSymbol;return s[t]};var zy=(()=>{class s{constructor(t){this.A=t,this.ni=new Map,this.Xf=e=>{let i=e.target;if(this.ni.has(i))return!0;let n=!1;return this.ni.forEach((o,c)=>{n||!this.ni.get(c).subtree||(n=c.contains(i))}),n},_t.general.nbOfMutationObservers.increase(),this.U=new csMutationObserver(e=>{ro.isScheduled(this,this.garbageCollect)&&(e=Rr(e,this.Xf)),e.length&&Yt(()=>t(e,this))})}disconnect(){_t.general.nbOfMutationObservers.decrease(),this.U.disconnect(),this.ni=new Map}takeRecords(){return this.U.takeRecords()}observe(t,e){return _t.mutations.elementMutationObserved.increase(),this.ni.set(t,e),this.U.observe(t,e)}unobserve(t){this.ni.has(t)&&(_t.mutations.elementMutationObserved.decrease(),this.ni.delete(t),this.garbageCollect())}garbageCollect(){_t.mutations.unobserveGarbageCollection.measure(()=>{let t=Rr(this.takeRecords(),this.Xf);t.length&&this.A(t,this),this.U.disconnect(),this.ni.forEach((e,i)=>this.U.observe(i,e))})}}return rt([ro()],s.prototype,"garbageCollect",null),s})(),Gy=(()=>{class s{constructor(t){this.A=t,this.Os=new Set}onMutations(t){if(rl(t,e=>{var i;return!!(!((i=e.removedNodes)===null||i===void 0)&&i.length)}))for(let e of this.Os.values())lt.isConnected(e)||(this.Os.delete(e),this.A(e))}observe(t){this.G||(this.G=new Te(e=>csSetTimeout(()=>this.onMutations(e))),this.G.observe()),this.Os.add(t)}disconnect(){var t;(t=this.G)===null||t===void 0||t.disconnect(),this.Os.clear(),this.G=void 0}}return rt([N("NodeDisconnectedObserver.onMutations")],s.prototype,"onMutations",null),s})(),qy=300,Dr=(()=>{class s{constructor(t){this.Ra=new Set,this.c_=new Gy(e=>this.Kf(e)),this.Y=!1,this.Ot=t?j(j({},dc),t):dc}stop(){var t,e;this.Y=!1,(t=this.Pn)===null||t===void 0||t.disconnect(),(e=this.U)===null||e===void 0||e.disconnect()}start(t){if(this.Y)throw new Error("VisibilityObserver is already started");this.A=ps("VisibilityObserver:callback",(i,n)=>t(i,n));let e={root:null,rootMargin:"0px",threshold:.5,trackVisibility:!0,delay:qy};this.Pn=uc.create(i=>this.handleIntersection(i),e),this.U=new zy(i=>csSetTimeout(()=>{J(i,n=>this.Kf(n.target))})),this.Xl(),this.Y=!0}observe(t){if(!this.Y)throw new Error("Observer is stopped.");this.Ot.reobserve===!1&&t[this.Kl]||(_t.visibilityObserver.nbElements.increase(),t[this.Kl]=!0,this.watchIntersection(t))}Xl(){this.Ca=csSymbol("isVisible"),this.Kl=csSymbol("ObservedElement"),this.Jl=csSymbol("LinkedElement"),this.Jf=csSymbol("Tracked")}Kf(t){this.Ra.add(t);for(let e of this.l_(t))this.Ra.add(e);this.recheckCssVisibilityAll()}recheckCssVisibilityAll(){J(this.Ra.keys(),t=>{!t.isConnected||lt.areAncestorsHiddenByCSS(t)||t[this.Kl]&&this.watchIntersection(t)}),this.Ra.clear()}watchIntersection(t){this.U.unobserve(t),this.Pn.unobserve(t);let e=lt.getTopAncestorHiddenByCSS(t);e?(e!==t&&(this.Qf(e,t),this.watchMutation(e)),this.watchMutation(t)):this.Pn.observe(t)}watchMutation(t,e=!0){e&&delete t[this.Ca],this.Pn.unobserve(t);let i={attributeFilter:["style","class","hidden"]};this.U.observe(t,i)}handleIntersection(t){for(let e of t){let i=e.target;if(!e.isVisible){lt.isVisibleInDocument(i)||this.h_(i);continue}let n=this.Ot.allowSameMatch||!e.target[this.Ca];e.target[this.Ca]=!0,n&&!this.Ot.delay&&this.onVisibilityChanged(e.target,bi.VisibleInViewPort)}this.Ot.delay&&csSetTimeout(()=>{for(let e of t){let i=e.isIntersecting&&e.isVisible;e.target[this.Ca]&&i&&this.onVisibilityChanged(e.target,bi.VisibleInViewPort)}},this.Ot.delay)}h_(t){_t.visibilityObserver.hiddenElements.increase();let e=lt.getTopElement(t);this.watchMutation(t),e&&(this.c_.observe(e),this.Qf(e,t),this.watchMutation(e,!1))}Qf(t,e){var i;(t[this.Jl]=(i=t[this.Jl])!==null&&i!==void 0?i:new Set).add(e)}l_(t){var e,i;let n=[],o=(i=(e=t[this.Jl])===null||e===void 0?void 0:e.values())!==null&&i!==void 0?i:[];return J(o,c=>csArray.prototype.push.call(n,c)),n}onVisibilityChanged(t,e){if(e===bi.VisibleInViewPort&&this.Ot.trackOnce){if(this.Pn.unobserve(t),this.U.unobserve(t),t[this.Jf])return;t[this.Jf]=!0}this.A(t,e)}static isSupported(){return uc.isSupported()}}return rt([N()],s.prototype,"observe",null),rt([ji({wait:50}),N(),Nt("recheckCssVisibilityAll")],s.prototype,"recheckCssVisibilityAll",null),rt([N()],s.prototype,"watchIntersection",null),rt([N()],s.prototype,"watchMutation",null),rt([N(),Nt("VisibilityObserver.handleIntersection")],s.prototype,"handleIntersection",null),rt([N()],s.prototype,"onVisibilityChanged",null),s})(),bi=(()=>{let s;return function(r){r.VisibleInViewPort="VisibleInViewPort",r.HiddenByAnother="HiddenByAnother",r.Hidden="Hidden"}(s||(s={})),s})(),dc={delay:1e3,trackOnce:!0,reobserve:!1};var Wy=(()=>{let s;return function(r){r.ENCRYPTED_NODE_PROP="encrypted";function t(n){return at.getProperty(n,r.ENCRYPTED_NODE_PROP)===!0}r.shouldEncrypt=t;function e(n){at.setProperty(n,r.ENCRYPTED_NODE_PROP,!0)}r.markEncryptedNode=e;function i(n){at.setProperty(n,r.ENCRYPTED_NODE_PROP,void 0)}r.unmarkEncryptedNode=i}(s||(s={})),s})(),is=(()=>{let s;return function(r){r.EDITABLE_NODE_PROP="editableNode";function t(n){var o;return"nodeType"in n?at.getProperty(n,r.EDITABLE_NODE_PROP)===!0:((o=n.metadata)===null||o===void 0?void 0:o[r.EDITABLE_NODE_PROP])===!0}r.isEditableNode=t;function e(n){at.setProperty(n,r.EDITABLE_NODE_PROP,!0)}r.markEditableNode=e;function i(n){at.setProperty(n,r.EDITABLE_NODE_PROP,void 0)}r.unmarkEditableNode=i}(s||(s={})),s})();var fc=(()=>{let s;return function(r){function t(e){return e.type==="TextVisibility"}r.isTextVisibilityEvent=t}(s||(s={})),s})();function pc(s){var r;let t=(r=s.attributes)===null||r===void 0?void 0:r.type;if(t!=null)return csString.prototype.trim.call(csString.prototype.toLowerCase.call(t))}var Yy=(()=>{class s extends ci{constructor(t,e,i=new oi,n=null,o=!1){super(),this.D=i,this.ba=n,this.captureAnonymizedPlaceholders=o,this.Er=new By(t,e,i,n,o)}setAnonymization(t){this.Er.setAnonymization(t)}isListening(t){return t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE"||fc.isTextVisibilityEvent(t)||si.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="attributeChanged"||t.domEvent==="characterDataChanged")}processEvent(t){if(t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE")return this.d_(t);if(fc.isTextVisibilityEvent(t))return t.text=this.D.checkAndAnonymizePII(t.text,this.ba),t;switch(t.domEvent){case"initialDOM":case"nodesAdded":this.th(t);break;case"attributeChanged":this.f_(t);break;case"characterDataChanged":this.p_(t);break}return t}d_(t){var e,i;let n=t.type==="DOM_PATCH"?t.diff:t.state,o=t.state;for(let c in n){let l=o[c],h=o[l.parent];switch(l.type){case ds.TEXT_NODE:case ds.COMMENT_NODE:{let d=n[c];if(Z(d.data)){if(h.localName==="script"){d.data="";continue}}else continue;let{anonymizedValue:p,withAnonymization:y}=this.Er.getAnonymizedValue((e=d.data)!==null&&e!==void 0?e:"",h.localName,h.metadata);d.anonymized=y,d.data=p;break}case ds.ELEMENT_NODE:{let d=n[c];if(d.attributes)for(let p in d.attributes){let y=d.attributes[p],m=pc(l);d.attributes[p]=this.Er.getAnonymizedAttributeValue(l.namespaceURI,l.localName,p,y,m)}!((i=d.state)===null||i===void 0)&&i.value&&(d.state.value=Hy(d.state.value,pc(l)));break}}}return t}th(t){let e=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes,i;t.domEvent==="nodesAdded"&&(i={targetLocalName:t.targetLocalName,targetProps:t.targetProps});for(let n of e)this.Er.sanitize(n,i)}f_(t){if(!t.isSvg&&t.newValue){if(t.localName===null){t.newValue="";return}t.newValue=this.Er.getAnonymizedAttributeValue(t.namespace,t.localName,t.attribute,t.newValue,t.inputType)}}p_(t){t.newValue=this.Er.getAnonymizedValue(t.newValue,t.parentLocalName,t.parentProps).anonymizedValue}}return Ve([Nt("AnonymizedTextProcessor.processEvent")],s.prototype,"processEvent",null),s})();var it=(()=>{let s;return function(r){r[r.ELEMENT_NODE=1]="ELEMENT_NODE",r[r.ATTRIBUTE_NODE=2]="ATTRIBUTE_NODE",r[r.TEXT_NODE=3]="TEXT_NODE",r[r.CDATA_SECTION_NODE=4]="CDATA_SECTION_NODE",r[r.COMMENT_NODE=8]="COMMENT_NODE",r[r.DOCUMENT_NODE=9]="DOCUMENT_NODE",r[r.DOCUMENT_TYPE_NODE=10]="DOCUMENT_TYPE_NODE",r[r.DOCUMENT_FRAGMENT_NODE=11]="DOCUMENT_FRAGMENT_NODE",r[r.CSS_STYLESHEET_NODE=50]="CSS_STYLESHEET_NODE"}(s||(s={})),s})();function Zo(s){let r=csString.prototype.trim.call(s);if(s==="")return[];let[t,e]=Xy(r);return e?(ii(t,",")||(e=Ky(e)),[gc(t),...Zo(e)]):[gc(t)]}function Xy(s){return csString.prototype.split.call(s,/\s(.+)/)}function gc(s){return csString.prototype.split.call(s,/,$/)[0]}function Ky(s){return csString.prototype.split.call(s,/,(.+)/)[1]||""}var Jy=/(@import\s*("([^"]+)"|'([^']+)'))|(url\s*\(\s*((("([^"\]]+)"|'([^'\]]+)')\s*)|([^)\]]+))\)(?!\\))/g;function Qy(s,r){return csString.prototype.replace.call(s,Jy,(...e)=>{let i=e[3]||e[4],n=e[9]||e[10]||e[11],o=tE((i||n).trim()),c=i?"@import ":"",l=r(o)||o;return`${c}url(${Zy(l)})`})}function Zy(s){return csString.prototype.indexOf.call(s,'"')===-1?`"${s}"`:csString.prototype.indexOf.call(s,"'")===-1?`'${s}'`:s}function Ri(s){let r=new Set;return Qy(s,t=>{var e,i;return r.add((i=(e=csString.prototype.match.call(t,/^["|'](.*)?["|']$/))===null||e===void 0?void 0:e[1])!==null&&i!==void 0?i:t),t}),gs(r)}function tE(s){let r=/(\\)*\\(?:([a-fA-F0-9]{1,6})|(.))[\n\t\x20]?/g;return csString.prototype.replace.call(s,r,(t,e,i,n)=>{if(e==="\\")return csString.prototype.slice.call(t,1);if(n)return n;let o=parseInt(i,16);return 55296<=o&&o<=57343||o===0||o>1114111?"\uFFFD":csString.fromCodePoint(o)})}var mc=(()=>{class s{static toStaticResourceEvent(t,e,i){return Q(this,null,function*(){let n=yield s.y_(t);if(!n)return null;let o=yield s.sp(n),c=re(t)?void 0:t,l={type:"StaticResourceManagerEvent",timestamp:i,resourceId:e,resource:{hash:o,data:n}};return c&&(l.originalResourceName=c),l})}static toCSSStaticResourceEvent(t,e,i,n){return Q(this,null,function*(){let o=yield s.E_(t,n),c=De(t),l=o.get(c);if(!l)return null;let h={type:"StaticResourceManagerEvent",timestamp:i,resourceId:e,resource:{hash:l.hash,data:l.data}};return o.delete(c),o.size&&(h.nestedResources=[],o.forEach(d=>{d&&csArray.prototype.push.call(h.nestedResources,{hash:d.hash,data:d.data})})),h})}static sp(t){return Q(this,null,function*(){let e=yield t.arrayBuffer(),i=yield crypto.subtle.digest(this.ip,e);return Bn(i)})}static y_(t){return Q(this,null,function*(){let e;if(!re(t))e=yield(yield window.fetch(t)).blob();else{let i=Pa(t);if(!i)return null;e=i}return e})}static E_(t,e){return Q(this,null,function*(){let i=new Map,n=De(t),c=[{resourceRawPath:t,resourceAbsolutePath:n}];for(;c.length>0;){let l=csArray.prototype.pop.call(c);if(!e&&l.resourceAbsolutePath!==null&&!re(l.resourceAbsolutePath)){i.set(l.resourceAbsolutePath,null);continue}if(i.get(l.resourceAbsolutePath)===void 0)try{if(l.resourceRawPath===null||csString.prototype.indexOf.call(l.resourceRawPath,".css")>0){if(!l.data){let m=yield fetch(l.resourceAbsolutePath);l.data=yield m.text()}l.nestedResources||(l.nestedResources=Ri(l.data));let p=!1,y=!1;for(let m of l.nestedResources){let v=re(m)?m:l.resourceAbsolutePath?Ef(m,l.resourceAbsolutePath):De(m),b=i.get(v);if(b!==void 0){if(b!==null){let _=s.v_(b,m);l.data=Ot.stringReplaceAll(l.data,m,_)}continue}ri(c,_=>_.resourceAbsolutePath===v)!==void 0||(p=!0,y||(csArray.prototype.push.call(c,l),y=!0),csArray.prototype.push.call(c,{resourceRawPath:m,resourceAbsolutePath:v}))}if(!p){let m=yield s.S_(l.data);i.set(l.resourceAbsolutePath,{hash:m.hash,data:m.data})}}else{let p;if(!re(l.resourceAbsolutePath))p=yield(yield fetch(l.resourceAbsolutePath)).blob();else{let m=Pa(l.resourceAbsolutePath);if(!m){i.set(l.resourceAbsolutePath,null);continue}p=m}let y=yield s.sp(p);i.set(l.resourceAbsolutePath,{hash:y,data:p})}}catch(d){i.set(l.resourceAbsolutePath,null)}}return i})}static v_(t,e){let i=`cs://resources/${t.hash}`;return re(e)||(i+=`?${s.ih}=${e}`),i}static S_(t){return Q(this,null,function*(){let e=new Blob([t],{type:"text/css"}),i=yield e.arrayBuffer(),n=yield crypto.subtle.digest(s.ip,i);return{data:e,hash:Bn(n)}})}}return s.ip="SHA-256",s.ih="original-resource-name",s})(),no=(()=>{class s extends ci{get busy(){return this.rh>0}constructor(){super(),this.__="cssrm://",this.w_=1,this.ds=!1,this.rh=0}isListening(t){if(s.isSupported()){if(t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE")return!0;if(!si.isDOMEvent(t))return!1}else return!1;return t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="attributeChanged"||t.domEvent==="characterDataChanged"}processEvent(t){if(t.type!=="DomEvent")return this.A_(t);switch(t.domEvent){case"initialDOM":case"nodesAdded":this.T_(t);break;case"attributeChanged":this.b_(t);break;case"characterDataChanged":this.R_(t);break}return t}disableOnlineAssets(){this.ds=!1}enableOnlineAssets(){this.ds=!0}isOnlineAssetsActivated(){return this.ds}A_(t){var e;let i=t.type==="DOM_PATCH"?t.diff:t.state;for(let n in i){let o=i[n],c=t.state[n],l=t.state[c.parent];switch(c.type){case it.TEXT_NODE:this.rp(o,l==null?void 0:l.localName);break;case it.CSS_STYLESHEET_NODE:{if(o=o,o.cssRules)for(let h in o.cssRules){let d=o.cssRules[h],p=this.vr(d);p!==null&&(o.cssRules[h]=p)}break}case it.ELEMENT_NODE:{o=o;let h=o.attributes;if(!h)continue;if(h.style&&(h.style=this.vr(h.style)),(this.np(c.localName)||this.op(c.localName,l==null?void 0:l.localName))&&("src"in h&&(h.src=this.nh(h.src)),"srcset"in h&&(h.srcset=this.oh(h.srcset))),this.ds&&c.localName==="link"&&(!((e=h.href)===null||e===void 0)&&e.length)&&h.rel==="stylesheet"){let d=this.ki(De(h.href),!0);h["data-cs-original-href"]=h.href,h.href=d}}}}return t}T_(t){let e=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes;for(let i of e)at.traverse(i,(n,o)=>{if(n.nodeType===ds.TEXT_NODE&&o){this.rp(n,o.localName);return}if(!ke.isElement(n))return;let c=ke.getAttribute(n,"style");if(c!=null&&c.value&&(c.value=this.vr(c.value)),this.np(n.localName)||this.op(n.localName,o==null?void 0:o.localName)){let l=ke.getAttribute(n,"src");l!=null&&l.value&&(l.value=this.nh(l.value));let h=ke.getAttribute(n,"srcset");if(h){h.value=this.oh(h.value);return}}if(this.C_(n)&&this.ds){let l=ri(n.attributes,d=>d.name==="href");if(!l||!l.value)return;let h=this.ki(De(l.value),!0);csArray.prototype.push.call(n.attributes,{name:"data-cs-original-href",namespaceURI:"",value:l.value}),l.value=h}})}rp(t,e){if(!t||e!=="style")return;let i=this.vr(t.data);i!==null&&(t.data=i)}R_(t){if(t.parentLocalName!=="style"||!t.newValue)return;let e=this.vr(t.newValue);e!==null&&(t.newValue=e)}b_(t){if(!t.newValue||t.newValue===t.oldValue)return;let e=t.attribute==="src",i=t.attribute==="srcset";if(t.attribute==="style"){t.newValue=this.vr(t.newValue);return}if(!e&&!i)return;let o=t.localName==="img",c=t.localName==="source"&&t.parentLocalName&&t.parentLocalName==="picture";!o&&!c||(e&&(t.newValue=this.nh(t.newValue)),i&&(t.newValue=this.oh(t.newValue)))}nh(t){return re(t)||this.ds?this.ki(t,!1,k.now()):t}oh(t){if(!this.ds)return t;let e=t,i=Zo(t);for(let n of i){let o=this.ki(De(n),!1);e=csString.prototype.replace.call(e,n,o)}return e}vr(t){let e=Ri(t),i=t,n=k.now();for(let o of e){let c=re(o);if(!(c||this.ds)||this.I_(o))continue;let l=Gf(o),h=o;c?h=this.ki(o,!1,n):this.ds&&(l?h=this.ki(o,!0,n):h=this.ki(De(o),!1,n)),i=csString.prototype.replace.call(i,o,h)}return i}ki(t,e,i=k.now()){let n=this.w_++;this.rh++;let o=e?mc.toCSSStaticResourceEvent:mc.toStaticResourceEvent,c=new Qo(l=>Q(this,null,function*(){try{let h=yield o(t,n,i,this.ds);l(h||{type:"warning",message:`Failed to process static resource: ${t}`})}catch(h){l({type:"warning",message:h})}finally{this.rh--}}));return this.emitEvent(c),this.__+n}np(t){return t==="img"}op(t,e){return t==="source"&&e==="picture"}C_(t){return t.localName==="link"&&csArray.prototype.some.call(t.attributes,e=>e.name==="rel"&&e.value==="stylesheet")}static isSupported(){return tl()&&ld()&&!!csArray.from}I_(t){return csString.prototype.replace.call(t,/['"]+/g,"").length===0}}return Ve([Nt("StaticResourceManagerProcessor.processEvent")],s.prototype,"processEvent",null),s})(),yi=console;var Ps={debug:(...s)=>yi.debug(...s),log:(...s)=>yi.log(...s),info:(...s)=>yi.info(...s),warn:(...s)=>yi.warn(...s),error:(...s)=>yi.error(...s)},oo=(()=>{class s{push(t){let e={value:t};this.Sr?(this.ah.next=e,this.ah=e):(this.Sr=e,this.ah=e)}pushMany(t){for(let e of t)this.push(e)}shift(){if(!this.Sr)return;let t=this.Sr;return this.Sr=t.next,this.Sr||(this.ah=void 0),t.value}isEmpty(){return!this.Sr}}return s})(),Di=(()=>{let s;return function(r){r[r.High=0]="High",r[r.Low=1]="Low"}(s||(s={})),s})(),ta=(()=>{class s{constructor(){this.ap=new oo,this.cp=new oo,this.length=0}push(t,e=Di.Low){return e===Di.High?this.ap.push(t):this.cp.push(t),this.length+=1}shift(){if(this.length!==0)return this.length-=1,this.ap.shift()||this.cp.shift()}isEmpty(){return this.length===0}}return s})(),eE=(()=>{class s{get length(){return this.vt.length}constructor(){this.Nn=[],this.vt=new ta,this.ch=new Set}P_(t){switch(t.type){case"attributes":return`-${t.attributeNamespace}-${t.attributeName}`;default:return""}}O_(t){switch(t.type){case"pointerOverElement":case"customElementRegistration":return}return`${W(t.target)}-${t.type}${this.P_(t)}`}N_(t){switch(t.type){case"state":return Di.High;default:return Di.Low}}M_(t){let e=this.O_(t);if(e){if(this.ch.has(e))return;this.ch.add(e)}return this.vt.push({mutation:t,key:e},this.N_(t))}D_(){this.Nn.length!==0&&(csArray.prototype.forEach.call(csArray.prototype.flat.call(this.Nn),t=>this.M_(t)),this.Nn=[])}push(t){csArray.prototype.push.call(this.Nn,t)}shift(){this.D_();let t=this.vt.shift();if(t)return t.key&&this.ch.delete(t.key),t.mutation}isEmpty(){return this.vt.isEmpty()&&this.Nn.length===0}}return s})(),sE=(()=>{class s{constructor(t){this.pe=t,this.Ia=!1,this.Os=new WeakSet,this.Pa=e=>{let i=e.getRootNode();i&&this.Os.has(i)&&this.pe(e)}}observe(t){this.Os.has(t)||(this.Os.add(t),this.Ia||(hs.subscribe(this.Pa),this.Ia=!0))}disconnect(){this.Ia&&(hs.unsubscribe(this.Pa),this.Ia=!1),this.Os=new WeakSet}}return s})(),_n=new WeakMap,wn=new WeakMap;function yc(s,r){if(!s||typeof s!="object"&&typeof s!="function")return s;if(_n.has(s))return _n.get(s);let t=r();return _n.set(s,t),t}function ao(s,r){return s.prototype=r.prototype,Object.defineProperty(s,"toString",{value:()=>r.toString()}),s}function iE(s,r,t,e,i){Object.defineProperty(s,r,{set(n){var o;let c=(o=t.set)===null||o===void 0?void 0:o.apply(this,[n]);return e(this,[r],[n],c),c},get(){var n;let o=(n=t.get)===null||n===void 0?void 0:n.apply(this);return yc(o,()=>{let c=new Proxy(o,{get(l,h){let d=Reflect.get(l,h);return typeof d!="function"?d:yc(d,()=>i&2?ao(function(...p){let y=wn.get(this)||this,m=Reflect.apply(d,y,p);return e(y,[r,h],p,m),m},d):ao(function(...p){let y=wn.get(this)||this;return Reflect.apply(d,y,p)},d))},set:i&1?(l,h,d)=>{let p=Reflect.set(l,h,d);return e(l,[r,h],[d],p),p}:Reflect.set});return wn.set(c,o),c})}})}function rE(s,r,t,e){let i={};t.get&&(i.get=t.get),t.set&&(i.set=function(n){let o=t.set.call(this,n);return e(this,[r],[n],o),o}),t.value&&(i.value=ao(function(...n){let o=Reflect.apply(t.value,this,n);return e(this,[r],n,o),o},t.value),i.writable=t.writable!==!1),t.configurable!==void 0&&(i.configurable=t.configurable),t.enumerable!==void 0&&(i.enumerable=t.enumerable),Object.defineProperty(s,r,i)}function St(s,r,t,e={}){let i=s&&s.prototype?s.prototype:s;if(!i)return()=>{};let n=csSymbol.for(`fd_spy_${r}`);if(n in i){let h=i[n];return h.add(t),()=>h.delete(t)}let o=i[n]=new Set([t]),c=Object.getOwnPropertyDescriptor(i,r);if(!c)return Ps.warn(`Could not find descriptor for ${r} on target`,i),()=>o.delete(t);let l=(...h)=>{for(let d of o)try{d(...h)}catch(p){Ps.warn(`Error in spy hook for ${r} on target`,i,p)}};return e.mode?iE(i,r,c,l,e.mode):rE(i,r,c,l),()=>o.delete(t)}function Kt(s,r,t){let e=i=>t(i.target);return s.addEventListener(r,e,{capture:!0,passive:!0}),()=>{s.removeEventListener(r,e,{capture:!0})}}var nE=(()=>{class s{constructor(t){this.pe=t,this.Pt=new WeakMap,this.ge=e=>this.pe({type:"state",target:e}),this.lp=e=>this.pe({type:"setAdoptedStyleSheets",target:e}),this._r=e=>this.pe({type:"styleSheetUpdated",target:e}),this.Mn=e=>{var i;let n=(i=this.k_(e))===null||i===void 0?void 0:i.parentStyleSheet;n&&this._r(n)},this.x_=e=>this.pe({type:"styleSheetDisabledChanged",target:e}),this.hp=e=>this.pe({type:"activeElementChanged",target:e.ownerDocument}),this.Pa=e=>this.pe({type:"metadataChanged",target:e})}L_(t){return csNodenodeType.apply(t)===it.DOCUMENT_NODE}V_(t){let e=[Kt(t,"input",this.ge),Kt(t,"change",this.ge),Kt(t,"checked",this.ge),Kt(t,"scroll",this.ge),Kt(t,"toggle",this.ge),Kt(t,"focusin",this.hp),Kt(t,"focusout",this.hp),Kt(t,"pointerover",i=>{this.pe({type:"pointerOverElement",target:i.ownerDocument,element:i})}),Kt(t,"pointerout",i=>{this.pe({type:"pointerOverElement",target:i.ownerDocument,element:null})}),Kt(t,"load",i=>{switch(i.localName){case"iframe":case"link":this.pe({type:"loaded",target:i});break}})];this.Oa(t,()=>{csArray.prototype.forEach.call(e,i=>i())})}U_(t){let e=t.defaultView;if(!e)return;let i=[Kt(e,"resize",()=>this.ge(t)),Kt(t,"visibilitychange",()=>this.ge(t)),Kt(t,"fullscreenchange",()=>this.ge(t)),St(e.Document,"adoptedStyleSheets",this.lp,{mode:2}),St(e.ShadowRoot,"adoptedStyleSheets",this.lp,{mode:2}),St(e.Element,"attachShadow",(n,o,c,l)=>{this.pe({type:"attachShadow",target:n,shadowRoot:l})}),St(e.HTMLInputElement,"value",this.ge),St(e.HTMLInputElement,"checked",this.ge),St(e.HTMLSelectElement,"selectedIndex",this.ge),St(e.CSSStyleSheet,"insertRule",this._r),St(e.CSSStyleSheet,"deleteRule",this._r),St(e.CSSStyleSheet,"replace",this._r),St(e.CSSStyleSheet,"replaceSync",this._r),St(e.CSSStyleSheet,"addRule",this._r),St(e.CSSStyleRule,"style",this.Mn,{mode:1}),St(e.CSSGroupingRule,"insertRule",this.Mn),St(e.CSSGroupingRule,"deleteRule",this.Mn),St(e.CSSStyleDeclaration,"setProperty",this.Mn),St(e.CSSStyleDeclaration,"removeProperty",this.Mn),St(e.StyleSheet,"disabled",this.x_),St(e.HTMLDialogElement,"show",this.ge),St(e.HTMLDialogElement,"showModal",this.ge),St(e.HTMLDialogElement,"close",this.ge),St(e.CustomElementRegistry,"define",(n,o,c)=>{this.pe({type:"customElementRegistration",target:t,name:c[0]})})];this.Oa(t,()=>{csArray.prototype.forEach.call(i,n=>n())})}k_(t){for(;t.parentRule!==null;)t=t.parentRule;return t}j_(t){let e=new csMutationObserver(i=>{this.pe(i)});e.observe(t,{childList:!0,subtree:!0,attributes:!0,characterData:!0}),this.Oa(t,()=>{e.disconnect()})}H_(t){let e=new sE(this.Pa);e.observe(t),this.Oa(t,()=>{e.disconnect()})}Oa(t,e){this.Pt.get(t)==null||csArray.prototype.push.call(this.Pt.get(t),e)}observe(t){this.Pt.has(t)||(this.Pt.set(t,[]),this.V_(t),this.L_(t)&&this.U_(t),this.j_(t),this.H_(t))}disconnect(t){let e=this.Pt.get(t)||[];for(let i of e)try{i()}catch(n){Ps.warn(n)}this.Pt.delete(t)}}return s})(),sh=new ta,dt,oE=40,aE=10;function cE(s){return csSetTimeout(()=>{let r=0,t=0,e=performance.now(),i=!0;s({get hasTimeLeft(){return r%aE===0&&(t=performance.now(),i=t-e<oE),r++,i}})},0)}function Ec(){var s;let r=(s=dt==null?void 0:dt.subTasks)===null||s===void 0?void 0:s.shift();return r?(r.subTasks=dt==null?void 0:dt.subTasks,r):sh.shift()}function ih(){cE(s=>{for(dt||(dt=Ec());s.hasTimeLeft&&dt;){dt.isRunning=!0;try{dt.isEnded=dt.run(s)!==!0}catch(r){Ps.error("Error occurred while running task:",r),dt.isEnded=!0}dt.isRunning=!1,(dt.isEnded||dt.isAborted)&&(dt=Ec())}dt&&ih()})}function Ei(s,r=Di.Low){let t={run:s,isAborted:!1,isEnded:!1,abort:()=>{t.isAborted=!0}};return dt!=null&&dt.isRunning?(dt.subTasks=dt.subTasks||new ta,dt.subTasks.push(t,r)):sh.push(t,r)===1&&!dt&&ih(),t}var lE=40;function vc(s){return csString.prototype.replace.call(s,/[:\\]/g,"\\$&")}function An(s){return csString.prototype.replace.call(s,/\\([:\\\\])/g,"$1")}var Tn=["nextSibling","firstChild","contentDocument","shadowRoot","sheetId"];function bn(s,r){return!!s&&r in s&&!!s[r]}var Sc={"http://www.w3.org/1999/xhtml":void 0,"http://www.w3.org/2000/svg":"svg"},co=(()=>{class s{constructor(t){this.A=t,this.G=new nE(e=>{this.lh.push(e),this.B_()}),this.qe={},this.We=new Map,this.lh=new eE,this.Dn=new Map,this.processedMutationsCount=0,this.serializedNodeCount=0,this.up=0,this.dp=lE}disconnect(){for(let t of this.Dn.values())this.G.disconnect(t);this.Dn.clear()}observe(t){return this.disconnect(),this.Na(t),this}getState(t=!0){let e=this.qe;return this.qe=j({},e),t&&this.fp(),e}getChanges(){let t={};for(let[i,n]of this.We){let o=this.qe[i];if(!(n&&!o))if(o&&!n)t[i]=as(o);else{let c=Cl(n,o);c!==void 0&&(t[i]=c)}}return this.fp(),Rl(t)?t:void 0}setFrameRate(t){return this.dp=t/1e3,this}onChange(t){return this.A=t,()=>{this.A===t&&(this.A=void 0,this.kn&&(csClearTimeout(this.kn),this.kn=void 0))}}getStateAsync(t=!0){return Q(this,null,function*(){return yield this.pp(),this.getState(t)})}getChangesAsync(){return Q(this,null,function*(){return yield this.pp(),this.getChanges()})}pp(){return Q(this,null,function*(){return new Promise(t=>{Ei(()=>t())})})}fp(){this.We.clear()}static*findNodes(t,e){for(let i of Object.values(t))e(i)&&(yield i)}static stringifyAttrKey(t,e){let i=vc(e);return t?`${vc(t)}:${i}`:i}static parseAttrKey(t){let e=!1,i=-1;for(let c=0;c<t.length;c++){let l=t[c];if(e)e=!1;else if(l==="\\")e=!0;else if(l===":"){i=c;break}}if(i===-1)return{namespaceURI:null,name:An(t)};let n=csString.prototype.slice.call(t,0,i),o=csString.prototype.slice.call(t,i+1);return{namespaceURI:An(n),name:An(o)}}static apply(t,e,i){let n=j({},t),o=new Set,c=new Set,l=y=>{c.has(y)?c.delete(y):o.add(y)},h=y=>{o.has(y)?o.delete(y):c.add(y)};function d(y,m){for(let v of Tn)v in m&&(bn(y,v)&&l(y[v]),bn(m,v)&&h(m[v]))}for(let[y,m]of Object.entries(e)){if(m===null)continue;let v=y,b=n[v],C=b===void 0?m:Il(b,m);d(b,m),n[v]=C}let p=y=>{if(c.has(y))return;let m=n[y];if(m){delete n[y],i==null||i(y);for(let{nodeId:v}of s.nodeRelationsEntries(m))p(v)}};for(let y of o)p(y);return n}static nodeRelationsEntries(t,e=!1){let i=e?Tn.filter(o=>o!=="nextSibling"):Tn,n=[];for(let o of i)bn(t,o)&&csArray.prototype.push.call(n,{key:o,nodeId:t[o]});return n}St(t){if(t in this.qe&&!this.We.has(t)){let e=this.qe[t];this.We.set(t,as(e)),this.qe[t]=as(e)}return this.qe[t]}F_(t){try{let e=t.cssRules.length,i={};for(let n=0;n<e;n++){let o=t.cssRules[n];i[n]=o.cssText}return{type:it.CSS_STYLESHEET_NODE,cssRules:i,disabled:t.disabled}}catch(e){return{type:it.CSS_STYLESHEET_NODE,cssRules:{}}}}$_(t){return csArray.prototype.pop.call(csArray.from(window.csquerySelectorAll[t.nodeType].call(t,":hover")))||void 0}z_(t){let e=hs.getAll(t);switch(csNodenodeType.apply(t)){case it.DOCUMENT_NODE:{let i=t,n=i.activeElement||void 0,o=this.$_(i);return ct(j({type:it.DOCUMENT_NODE,baseURI:i.baseURI,activeId:n&&W(n),hoveredId:o&&W(o)},this.gp(t)),{metadata:e})}case it.DOCUMENT_FRAGMENT_NODE:return{type:it.DOCUMENT_FRAGMENT_NODE,mode:t.mode,metadata:e};case it.COMMENT_NODE:return{type:it.COMMENT_NODE,data:void 0,metadata:e};case it.ELEMENT_NODE:{let i=t,n=i.namespaceURI||"";return{type:it.ELEMENT_NODE,namespaceURI:n in Sc?Sc[n]:n,localName:i.localName,attributes:this.G_(i),state:this.mp(i),metadata:e}}case it.TEXT_NODE:return{type:it.TEXT_NODE,data:t.data||"",metadata:e};case it.CDATA_SECTION_NODE:return{type:it.CDATA_SECTION_NODE,data:t.data,metadata:e};case it.DOCUMENT_TYPE_NODE:return{type:it.DOCUMENT_TYPE_NODE,name:t.name,publicId:t.publicId,systemId:t.systemId,metadata:e};default:return null}}G_(t){return csArray.prototype.reduce.call(csArray.from(t.attributes),(e,i)=>{let n=e||{};return n[s.stringifyAttrKey(i.namespaceURI,i.name)]=i.value,n},void 0)}gp(t){let e=t.defaultView,i=e==null?void 0:e.visualViewport;return{state:{scrollX:e==null?void 0:e.scrollX,scrollY:e==null?void 0:e.scrollY,visibility:t.visibilityState},viewport:{width:i==null?void 0:i.width,height:i==null?void 0:i.height},screen:{width:e==null?void 0:e.screen.width,height:e==null?void 0:e.screen.height}}}mp(t){let e={};return"value"in t&&t.value&&(e.value=t.value),"selectedIndex"in t&&t.selectedIndex!==void 0&&t.selectedIndex>=0&&(e.selectedIndex=t.selectedIndex),"checked"in t&&t.checked&&(e.checked=t.checked),t.popover&&t.matches(":popover-open")?e.popover=!0:t.localName==="dialog"&&(e.open=t.open),t.scrollLeft&&(e.scrollX=t.scrollLeft),t.scrollTop&&(e.scrollY=t.scrollTop),e}B_(){var t;((t=this.q_)===null||t===void 0?void 0:t.isEnded)!==!1&&(this.q_=Ei(e=>(this.wr(e),this.yp(),!this.lh.isEmpty())))}yp(){if(!this.A||this.kn)return;let t=performance.now()-this.up,e=Math.max(0,this.dp-t);this.kn=csSetTimeout(()=>{this.kn=void 0;let i=this.getChanges();this.up=performance.now(),i&&this.A(i,this.getState())},e)}W_(t){for(let e=t==null?void 0:t.previousSibling;e;e=e.previousSibling)if(this.fs(e))return W(e)}Y_(t){var e;let i=csNodeparentNode.apply(t)||t.host||((e=t.defaultView)===null||e===void 0?void 0:e.frameElement);if(this.fs(i))return W(i)}Na(t){let e=new oo;e.pushMany(this.Ep(t,!1)),!e.isEmpty()&&Ei(i=>{let n;for(;i.hasTimeLeft&&(n=e.shift());){e.pushMany(this.Ep(n));let o=csNodenextSibling.apply(n);o&&e.push(o)}return!!n})}X_(t){switch(t){case it.DOCUMENT_NODE:return"contentDocument";case it.DOCUMENT_FRAGMENT_NODE:return"shadowRoot";default:return"childList"}}Ar(t){Ei(()=>{let e=t.ownerNode;if(e&&(!this.yr(e)||!this.fs(e)))return!1;if(this.fs(t)||!e||e.localName==="style"?this.vp(t):this.hh(W(t),{type:it.CSS_STYLESHEET_NODE,cssRules:{},disabled:t.disabled}),e&&this.fs(e)){let i=W(e);this.St(i).sheetId=W(t)}return!1})}Sp(t){let e=0,i=W(t),n=t.adoptedStyleSheets||[],o=n.length,c={};Ei(l=>{if(!this.fs(t)||!this.yr(t)||n!==t.adoptedStyleSheets)return!1;for(;l.hasTimeLeft&&e<o;){let d=n[e];c[e]=this.fs(d)?W(d):this.vp(d),e+=1}if(e<o)return!0;let h=this.St(i);return h&&(h.adoptedStyleSheets=c),!1})}vp(t){let e=W(t);return this.hh(e,this.F_(t)),e}hh(t,e){this.serializedNodeCount++,this.qe[t]=e,this.yp(),this.We.has(t)||this.We.set(t,null)}fs(t){return W(t)in this.qe}_p(t){var e;if(!s.trackIframeContent||t.localName!=="iframe")return!1;let i=t;try{return!!i.contentDocument&&!!(!((e=i.contentWindow)===null||e===void 0)&&e.document)}catch(n){return!1}}wp(t){let e=W(t),i=this.qe[e];if(!i){Ps.warn(`No serialized node id ${e}`);return}let n=this.Y_(t);if(!n){Ps.warn("No parent id for node",t);return}let o=this.X_(i.type);if(o==="childList"){let c=this.W_(t);this.uh(e,c,n,!0)}else{let c=this.St(n);c[o]=e,i.parent=n}}*Ep(t,e=!0){var i,n,o,c;if(!this.yr(t))return;if(this.fs(t)){e&&this.wp(t);return}let l=W(t),h=this.z_(t);if(!h){Ps.warn("Node was not serialized",t);return}switch(this.hh(l,h),e&&this.wp(t),h.type){case it.DOCUMENT_NODE:case it.DOCUMENT_FRAGMENT_NODE:{let p=t;this.Dn.set(l,p),this.G.observe(p),!((i=p.adoptedStyleSheets)===null||i===void 0)&&i.length&&this.Sp(p);break}case it.TEXT_NODE:{((n=t.parentElement)===null||n===void 0?void 0:n.localName)==="style"&&(h.data="");break}case it.ELEMENT_NODE:{let p=t;switch(h.localName){case"iframe":this._p(p)&&(yield p.contentDocument);break;case"link":p.rel==="stylesheet"&&p.sheet&&this.Ar(p.sheet);break;case"style":{let y=p.sheet;y&&this.Ar(y);break}default:Dp(h.localName)&&(!((c=(o=t.ownerDocument)===null||o===void 0?void 0:o.defaultView)===null||c===void 0)&&c.customElements.get(h.localName))&&this.Ap(W(t.ownerDocument),h.localName),csElementshadowRoot.apply(p)&&(yield csElementshadowRoot.apply(p));break}break}}let d=csNodefirstChild.apply(t);d&&(yield d)}Ap(t,e){let i=this.St(t),n=i.customElements||(i.customElements={});n[e]=1}fh(t){let e=this.St(t);if(e){switch(e.type){case it.DOCUMENT_NODE:case it.DOCUMENT_FRAGMENT_NODE:this.G.disconnect(this.Dn.get(t)),this.Dn.delete(t)}delete this.qe[t];for(let{nodeId:i}of s.nodeRelationsEntries(e))this.fh(i)}}uh(t,e,i,n){let o;if(e){let c=this.St(e);o=c.nextSibling,c.nextSibling=t}else{let c=this.St(i);o=c.firstChild,c.firstChild=t}if(n&&t&&o!==t){let c=this.St(t);if(c.nextSibling=o,o){let l=this.St(o);l.previousSibling=t}}if(t){let c=this.St(t);c.parent=i,c.previousSibling=e}}K_(t){var e;let i=this.St(t),n=new Set;for(let o=i==null?void 0:i.firstChild;o;o=(e=this.St(o))===null||e===void 0?void 0:e.nextSibling)n.add(o);return n}yr(t){return"isConnected"in t?t.isConnected:!t.ownerNode||t.ownerNode.isConnected}J_(t){let e=this.St(t);e&&(e.parent=void 0,e.nextSibling=void 0,e.previousSibling=void 0)}wr(t){var e,i;let n;for(;t.hasTimeLeft&&(n=this.lh.shift());){if(this.processedMutationsCount++,!this.fs(n.target)||!this.yr(n.target))continue;let o=W(n.target);switch(n.type){case"attachShadow":{this.Na(n.shadowRoot),this.St(o).shadowRoot=W(n.shadowRoot);break}case"childList":{let c,l=this.K_(o);for(let d=csNodefirstChild.apply(n.target);d;d=csNodenextSibling.apply(d)){this.fs(d)||this.Na(d);let p=W(d);l.delete(p),this.uh(p,c,o),c=p}this.uh(void 0,c,o);for(let d of l)this.J_(d),this.fh(d);let h=this.St(o);if(h.type===it.ELEMENT_NODE&&h.localName==="style"){let d=n.target.sheet;d&&this.Ar(d)}break}case"characterData":{let c=this.St(o);if(c.type===it.TEXT_NODE&&(c.data=n.target.data,((e=n.target.parentElement)===null||e===void 0?void 0:e.localName)==="style")){c.data="";let l=(i=n.target.parentElement)===null||i===void 0?void 0:i.sheet;l&&this.Ar(l)}break}case"attributes":{let c=s.stringifyAttrKey(n.attributeNamespace,n.attributeName),l=n.target,h=this.St(o),d=l.getAttributeNS(n.attributeNamespace,n.attributeName);h.attributes=h.attributes||{},d===null?delete h.attributes[c]:h.attributes[c]=d;break}case"state":{let c=this.St(o);c.type===it.DOCUMENT_NODE?Object.assign(c,this.gp(n.target)):c.state=this.mp(n.target);break}case"setAdoptedStyleSheets":{this.Sp(n.target);break}case"styleSheetUpdated":{this.Ar(n.target);break}case"styleSheetDisabledChanged":{let c=this.St(o);c.disabled=n.target.disabled;break}case"loaded":{switch(n.target.localName){case"link":{let c=n.target;c.rel==="stylesheet"&&c.sheet&&this.Ar(c.sheet);break}case"iframe":{let c=n.target,l=this.St(o),h=c.contentDocument,d=h&&W(h);l.contentDocument&&l.contentDocument!==d&&(this.fh(l.contentDocument),delete l.contentDocument),this._p(c)&&this.Na(h);break}}break}case"activeElementChanged":{let c=this.St(o),l=n.target.activeElement||void 0;c.activeId=l&&W(l);break}case"pointerOverElement":{let c=this.St(o),l=n.element||void 0;c.hoveredId=l&&W(l);break}case"customElementRegistration":{this.Ap(o,n.name);break}case"metadataChanged":{let c=this.St(o);c&&(c.metadata=as(hs.getAll(n.target)));break}}}}}return s.trackIframeContent=!1,s.cloneDeep=as,s})(),hE=(()=>{class s extends ci{constructor(t){super(),this.Z=t}isListening(t){return t.type==="DOM_INITIAL_STATE"||si.isDOMEvent(t)&&t.domEvent==="initialDOM"}processEvent(t){if(si.isDOMEvent(t))t.initialDOM.baseURI=this.Z.anonymizeUrl(t.initialDOM.baseURI);else for(let e of co.findNodes(t.state,i=>i.type===it.DOCUMENT_NODE))e&&e.type===it.DOCUMENT_NODE&&(e.baseURI=this.Z.anonymizeUrl(e.baseURI));return t}}return Ve([Nt("UrlAnonymizationProcessor.processEvent")],s.prototype,"processEvent",null),s})(),uE="textarea",dE=(()=>{class s extends ci{isListening(t){return t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE"||si.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="characterDataChanged")}processEvent(t){if(t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE")return this.Q_(t),t;switch(t.domEvent){case"initialDOM":case"nodesAdded":this.Z_(t);break;case"characterDataChanged":this.tw(t);break}return t}Q_(t){let e=t.type==="DOM_PATCH"?t.diff:t.state,i=t.state;for(let n in e){let o=e[n],c=i[n];if(!c.parent||!("data"in o)||c.type!==3)continue;let l=i[c.parent];this.Tp(o,c.metadata,l.localName)}}Z_(t){let e=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes;for(let i of e)at.traverse(i,(n,o)=>{var c;let l=(c=o==null?void 0:o.localName)!==null&&c!==void 0?c:t.targetLocalName,h=n.props;n.nodeType===3&&this.Tp(n,h,l)})}Tp(t,e,i){this.bp(i,e)&&(t.data=this.Rp(t.data))}tw(t){this.bp(t.parentLocalName,t.targetProps)&&(t.newValue=this.Rp(t.newValue))}Rp(t){return csString.prototype.replace.call(t,/\S/g,"\u2022")}bp(t,e){return t===uE||(e==null?void 0:e[is.EDITABLE_NODE_PROP])===!0}}return Ve([Nt("AnonymizedEditableTextProcessor.processEvent")],s.prototype,"processEvent",null),s})(),fE=(()=>{class s extends fe{onStart(){return Q(this,null,function*(){this.Tr&&this.Tr.disconnect(),this.Tr=new co().observe(document);let t=yield this.Tr.getStateAsync();this.produceEvent({type:"DOM_INITIAL_STATE",state:co.cloneDeep(t)}),this.xn=this.Tr.onChange((e,i)=>{this.produceEvent({type:"DOM_PATCH",diff:e,state:i})})})}onStop(){var t;(t=this.xn)===null||t===void 0||t.call(this)}destroy(){var t;(t=this.Tr)===null||t===void 0||t.disconnect(),this.Tr=void 0}}return s})(),rh=!0,wr=csSymbol("safe"),_c=csSymbol("task");function yt(s,r=rh){var t;(t=s[wr])!==null&&t!==void 0||(s[wr]=function(e){let i=arguments;Ls(()=>(e[_c]=Wt,s.listener.apply(s.boundElement,i)),[_e.EventListener,s.type],e[_c])}),s.boundElement.addEventListener(s.type,s[wr],r)}function Et(s,r=rh){s.boundElement.removeEventListener(s.type,s[wr],r)}var pE=(()=>{class s{constructor(t){this.A=t,this.Kt={boundElement:window,type:"resize",listener:()=>this.resizeListener()},this.A=t}observe(){yt(this.Kt),this.ph()}ph(){this.resizeListener()}disconnect(){Et(this.Kt)}resizeListener(){let t={width:Ct.windowWidth(),height:Ct.windowHeight()};this.A(t)}}return rt([N("resize")],s.prototype,"resizeListener",null),s})(),ss=(()=>{let s;return function(r){r.PORTRAIT="Portrait",r.LANDSCAPE="Landscape"}(s||(s={})),s})(),dr=(()=>{let s;return function(r){r.PORTRAIT_PRIMARY="portrait-primary",r.PORTRAIT_SECONDARY="portrait-secondary",r.LANDSCAPE_PRIMARY="landscape-primary",r.LANDSCAPE_SECONDARY="landscape-secondary"}(s||(s={})),s})(),fr=(()=>{let s;return function(r){r[r.PORTRAIT=0]="PORTRAIT",r[r.PORTRAIT_REVERSE=180]="PORTRAIT_REVERSE",r[r.LANDSCAPE=-90]="LANDSCAPE",r[r.LANDSCAPE_REVERSE=90]="LANDSCAPE_REVERSE"}(s||(s={})),s})(),gE=(()=>{let s;return function(r){let t=null;r.isScreenOrientationApiSupported=()=>{var c;return t!=null?t:t=!!(!((c=ot.screen)===null||c===void 0)&&c.orientation)},r.isDeprecatedScreenOrientationApiSupported=()=>"orientation"in ot;function e(){return ss.LANDSCAPE}function i(){var c;switch((c=ot.screen.orientation)===null||c===void 0?void 0:c.type){case dr.PORTRAIT_PRIMARY:case dr.PORTRAIT_SECONDARY:return ss.PORTRAIT;case dr.LANDSCAPE_PRIMARY:case dr.LANDSCAPE_SECONDARY:return ss.LANDSCAPE;default:return ss.PORTRAIT}}function n(){switch(window.orientation){case fr.PORTRAIT:case fr.PORTRAIT_REVERSE:return ss.PORTRAIT;case fr.LANDSCAPE:case fr.LANDSCAPE_REVERSE:return ss.LANDSCAPE;default:return ss.PORTRAIT}}function o(){return r.isScreenOrientationApiSupported()?i():r.isDeprecatedScreenOrientationApiSupported()?n():e()}r.getCurrentOrientation=o}(s||(s={})),s})(),mE=(()=>{class s extends fe{constructor(){super(...arguments),this.gh=null,this.mh=null,this.ai=new pE(t=>{this.produceEvent(ct(j({},t),{type:"viewportResize"})),this.onScreenPotentiallyChanged()})}onScreenPotentiallyChanged(){let t=gE.getCurrentOrientation(),{screenWidth:e,screenHeight:i}=this.ew(t);if(e!==this.gh||i!==this.mh){this.gh=e,this.mh=i;let n={type:"screenResize",width:e,height:i};this.produceEvent(n)}}ew(t){let e,i,n=Ct.screenWidth(),o=Ct.screenHeight();return t===ss.PORTRAIT?(e=n,i=o):(e=Math.max(n,o),i=Math.min(n,o)),{screenWidth:e,screenHeight:i}}onStart(){this.ai.observe()}onStop(){this.gh=null,this.mh=null,this.ai.disconnect()}}return s})();function yE(s){let r=csEventtarget.apply(s);return r&&pt(r)&&csElementshadowRoot.apply(r)&&s.composedPath?s.__csOriginalTarget||s.composedPath()[0]:r}var de=(()=>{class s{get selectors(){return this.Ye===""?null:this.Ye}constructor(t,e={closest:!1}){this.A=t,this.Ot=e,this.Ye="",this.Ln=new Br,this.wr=Vs(i=>{if(this.Ye==="")return;let n=[];for(let o of Co(i,c=>c.addedNodes)){if(!(Fd(o)||this.Ot.closest&&Cr(o)))continue;let c=this.Ot.closest?this.iw(o,this.Ye):this.findMatchingElements(o,this.Ye);ka(c,n)}n.length&&this.A(n,"added")},"SelectorObserver.processMutations"),this.rw=(i,n)=>{if(this.Ye===""||n!=="added")return;let o=this.findMatchingElements(i,this.Ye);o.length&&this.A(o,"added")},this.G=new Te(this.wr,this.rw)}observe(t){this.Ye===""?this.G.observe():this.Ye+=",",this.Ye+=t;let e=this.findMatchingElements(document,t);for(let i of this.G.shadowRoots){let n=this.findMatchingElements(i,t);ka(n,e)}e.length&&(J(e,i=>{this.Ln.add(i)}),this.A(e,"initial"))}processPendingMutations(){this.wr(this.G.takeRecords())}disconnect(){this.G.disconnect(),this.Ln.clear(),this.Ye=""}iw(t,e){let i=[];if(Cr(t)){if(t.parentElement){let n=ti(t.parentElement,e);n&&csArray.prototype.push.call(i,n)}return csArray.prototype.filter.call(i,n=>this.Ln.has(n)===!1)}else{if(fs(t)){let n=ti(t,e);if(n)return csArray.prototype.push.call(i,n),csArray.prototype.filter.call(i,o=>this.Ln.has(o)===!1)}return this.findMatchingElements(t,e)}}findMatchingElements(t,e){let i=Ii(window.csquerySelectorAll[t.nodeType].call(t,e));return pt(t)&&Zt.call(t,e)&&csArray.prototype.push.call(i,t),csArray.prototype.filter.call(i,n=>this.Ln.has(n)===!1)}}return rt([N()],s.prototype,"observe",null),rt([N()],s.prototype,"disconnect",null),rt([Nt("SelectorObserver.findMatchingElements")],s.prototype,"findMatchingElements",null),s})(),EE=(()=>{class s extends fe{constructor(){super(),this.Cp=t=>{let e=yE(t);e&&this.yh(e,t.type)},this.fe=new ai((t,e)=>{switch(e){case"initial":case"added":this.Ip(t);break;case"removed":this.Pp(t);break}}),this.W=new de((t,e)=>{(e==="initial"||e==="added")&&this.nw(t)})}static shouldProcessElement(t){return t.tagName==="VIDEO"&&lt.isConnected(t)&&!D.isMaskedElement(t)&&!D.isMaskedElementChild(t)}static isPlaying(t){return!t.paused&&!t.ended}onStart(){this.Ip(document),this.fe.observe(),this.W.observe("video")}onStop(){this.Pp(document),this.fe.disconnect(),this.W.disconnect()}yh(t,...e){if(this.isStarted&&s.shouldProcessElement(t))for(let i of e){let n=W(t),o={type:"VideoEvent",videoEventType:i,nodeId:n};i==="seeked"&&(o.newTimePositionInSec=t.currentTime),Ro(()=>this.produceEvent(o))}}nw(t){for(let e of t)this.yh(e,"seeked"),s.isPlaying(e)&&this.yh(e,"play")}Ip(t){for(let e of["play","pause","seeked"])yt({type:e,listener:this.Cp,boundElement:t})}Pp(t){for(let e of["play","pause","seeked"])Et({type:e,listener:this.Cp,boundElement:t})}}return s})();function vE(s){return s.nodeName==="SELECT"}function ea(s){return s.nodeName==="INPUT"}function SE(s){return s.nodeName==="TEXTAREA"||ea(s)&&!nh(s)&&!oh(s)}function nh(s){return ea(s)&&s.type==="number"}function oh(s){return ea(s)&&(s.type==="checkbox"||s.type==="radio")}var _E=(()=>{class s extends fe{constructor(t,e=[]){super(),this.ht=t,this.ow=e,this.Eh=new ly("low"),this.br=i=>this.inputHandler(i),this.ci=[],this.vh=new Map,this.aw(),this.lw(),this.W=new de(i=>{for(let n of i){if(n instanceof HTMLInputElement)for(let o of this.ow)this.hw(n,o);this.Sh(n)&&Yt(()=>{this._h(n,W(n))},"low")}}),this.fe=new ai((i,n)=>{switch(n){case"initial":case"added":yt({type:"change",listener:this.br,boundElement:i});break;case"removed":Et({type:"change",boundElement:i,listener:this.br});break}})}hw(t,e){let i=this.vh.get(e);if(!i)i=new WeakSet,this.vh.set(e,i);else if(i.has(t))return;i.add(t);let n=ay(t,e,(o,c,l)=>{l!==c&&lt.isConnected(o)&&this.Op(o)});n&&(this.isStarted&&n.activate(),csArray.prototype.push.call(this.ci,n))}onStart(){yt({type:"keyup",boundElement:document,listener:this.br}),yt({type:"change",boundElement:document,listener:this.br}),J(this.ci,t=>t.activate()),this.W.observe(csArray.prototype.join.call(s.uw,",")),this.fe.observe()}onStop(){Et({type:"keyup",boundElement:document,listener:this.br}),Et({type:"change",boundElement:document,listener:this.br}),J(this.ci,t=>t.deactivate()),this.W.disconnect(),this.fe.disconnect(),this.Eh.clear(),this.vh.clear()}_h(t,e){var i,n,o;if(this.Eh.has(t))return;if(this.Eh.add(t),vE(t)){let h={type:"InputEvent",inputType:"select",target:W(t),selectedIndex:t.selectedIndex,timestamp:k.now()};this.produceEvent(h);return}if(oh(t)){let h={type:"InputEvent",inputType:"checkable",target:W(t),checked:t.checked,timestamp:k.now()};this.produceEvent(h);return}let c=SE(t),l=nh(t);if(c||l){let h=(i=t.value)!==null&&i!==void 0?i:"";if(!((n=this.ht)===null||n===void 0)&&n.shouldEncrypt(t)){(o=this.ht)===null||o===void 0||o.registerInputNodeToEncrypt({targetId:e,targetValue:h,date:k.now()});return}let d=l?"0":"\u2022",p={type:"InputEvent",inputType:"text",target:W(t),value:csString.prototype.replace.call(h,/\S/g,d),timestamp:k.now()};this.produceEvent(p)}}inputHandler(t){if(!this.isStarted)return;let e=Pt(t),i=W(e);!i||!this.Sh(e)||lt.isConnected(e)&&Yt(()=>{this._h(e,i)},"low")}aw(){this.trackChanges(HTMLInputElement,"checked"),this.trackChanges(HTMLInputElement,"value"),this.trackChanges(HTMLTextAreaElement,"value")}lw(){this.trackChanges(HTMLSelectElement,"selectedIndex"),this.trackChanges(HTMLSelectElement,"value"),this.trackChanges(HTMLOptionElement,"selected",!0)}trackChanges(t,e,i=!1){let n=Mi(t.prototype,e,(o,c,l)=>{if(l!==c&&lt.isConnected(o)){let h=i?o.parentElement:o;this.Op(h)}});n&&csArray.prototype.push.call(this.ci,n)}Sh(t){return!D.isMaskedElement(t)&&!D.isMaskedElementChild(t)&&(Lr(t)||No(t)||Oo(t))}Op(t){if(this.isStarted&&lt.isConnected(t)){let e=W(t);e&&this.Sh(t)&&Yt(()=>{this._h(t,e)},"low")}}}return s.uw=["textarea","input:not([type])",'input[type="text"]','input[type="email"]','input[type="search"]','input[type="tel"]','input[type="url"]','input[type="password"]','input[type="number"]','input[type="checkbox"]','input[type="radio"]',"select"],Ve([ft()],s.prototype,"inputHandler",null),Ve([N()],s.prototype,"trackChanges",null),s})();var wE=(()=>{class s{constructor(t=Number.POSITIVE_INFINITY){this.li=[],this.ot=[],this.fw=t}next(t){this.ot.length===this.fw&&csArray.prototype.shift.call(this.ot),csArray.prototype.push.call(this.ot,t),this.ot.length===1&&csSetTimeout(()=>this.clear());for(let e of this.li)e(t)}subscribe(t){if(ri(this.li,i=>t===i))return()=>{this.li=csArray.prototype.filter.call(this.li,i=>i!==t)};csArray.prototype.push.call(this.li,t);for(let i of this.ot)t(i);return()=>{this.li=csArray.prototype.filter.call(this.li,i=>i!==t)}}clear(){this.ot=[]}hasObservers(){return this.li.length>0}}return s})(),ah=(()=>{var s;class r{constructor(e){this.A=e}observe(){this.pw=s.Vn.subscribe(e=>this.A(e)),s.Ma||(s.Ma=!0,s.On.observe(),ae(document,NodeFilter.SHOW_ELEMENT).visitAll(i=>{s.Ns.add(i),s.Vn.next(i)}))}disconnect(){s.Ma&&(this.pw(),s.Vn.hasObservers()||(s.Ma=!1,s.On.disconnect(),s.Vn.clear(),s.Ns.clear()))}}return s=r,r.Ns=new Br,r.Vn=new wE,r.gw=Vs(t=>{Yt(()=>{for(let e of t)e.type==="childList"&&J(e.addedNodes,i=>{ae(i,NodeFilter.SHOW_ELEMENT).visitAll(o=>{s.Ns.has(o)||(s.Ns.add(o),s.Vn.next(o))})})})},"ElementObserver.findAllElements"),r.Ma=!1,r.On=new Te(s.gw),rt([N()],r.prototype,"observe",null),rt([N()],r.prototype,"disconnect",null),r})(),AE=(()=>{class s extends fe{constructor(){super(),this.Ms=typeof window.customElements=="object"&&typeof window.customElements.whenDefined=="function"&&typeof window.Promise=="function",this.mw=ps("CustomElementRegistrationProducer:onElementsFound",e=>{for(let i of e)D.isMaskedElement(i)||D.isMaskedElementChild(i)||zd(i)&&this.register(csString.prototype.toLowerCase.call(i.tagName))});let t=Fr(this.mw);this.Un=new ah(e=>t.push(e)),this.oi=new Set}onStart(){this.Ms&&this.Un.observe()}onStop(){this.oi.clear(),this.Un.disconnect()}register(t){return Q(this,null,function*(){this.oi.has(t)||(this.oi.add(t),yield window.customElements.whenDefined(t),this.produceEvent({type:"CustomElementRegistration",tagName:csString.prototype.toLowerCase.call(t)}))})}}return Ve([N()],s.prototype,"register",null),s})(),wc=(()=>{class s{static isNavigationTimingObserverSupported(){var t,e;return(((t=window.PerformanceObserver)===null||t===void 0?void 0:t.supportedEntryTypes)==null?void 0:csArray.prototype.indexOf.call((e=window.PerformanceObserver)===null||e===void 0?void 0:e.supportedEntryTypes,"navigation"))>=0}static getTimeOrigin(){return window.performance.timeOrigin}static Np(){if(this.isNavigationTimingObserverSupported())return new window.PerformanceObserver(t=>s.yw(t))}static yw(t){let i=t.getEntriesByType("navigation")[0];i&&(this.xi=i,s.Rr(i))}static Tn(t){this.Ew(t),this.xi&&t(this.xi),this.je||this.vw()}static Ew(t){this.Lt.add(t)}static Sw(t){this.Lt.delete(t)}static vw(){if(this.Hn||(this.Hn=this.Np()),!this.Hn){this.xi||(this.xi={requestStart:window.performance.timing.requestStart,domInteractive:window.performance.timing.domInteractive}),this.Rr(this.xi);return}this.Hn.observe({type:"navigation",buffered:!0}),this.je=!0}static Rr(t){this.Lt.forEach(e=>e(t))}static Rn(t){this.Sw(t),this.Lt.size===0&&this.Bn()}static Bn(){var t;this.je&&((t=this.Hn)===null||t===void 0||t.disconnect(),this.je=!1,this.xi=null,this.Hn=this.Np())}constructor(t){this.A=t}observe(){s.Tn(this.A)}disconnect(){s.Rn(this.A)}}return s.je=!1,s.Lt=new Set,s.xi=null,s})(),TE=(()=>{class s extends fe{constructor(){super(...arguments),this.Da=null,this.Mp=new wc(t=>{if(this.Da)return;let e=this._w(t);e&&(this.Da=e,this.produceEvent(e))})}onStart(){if(this.Da){this.produceEvent(this.Da);return}this.Mp.observe()}onStop(){this.Mp.disconnect()}_w(t){let e=wc.getTimeOrigin();return{type:"PerformanceTiming",timings:{timeOrigin:e,requestStart:Math.floor(e+t.requestStart),domInteractive:Math.floor(e+t.domInteractive)},timestamp:k.now()}}}return s})(),Rt=(()=>{let s;return function(r){r[r.TAP=0]="TAP",r[r.LONG_PRESS=1]="LONG_PRESS",r[r.DRAG=2]="DRAG",r[r.FLICK=3]="FLICK",r[r.PINCH_IN=4]="PINCH_IN",r[r.PINCH_OUT=5]="PINCH_OUT"}(s||(s={})),s})(),pr=(()=>{let s;return function(r){r[r.UP=1]="UP",r[r.DOWN=2]="DOWN",r[r.LEFT=3]="LEFT",r[r.RIGHT=4]="RIGHT"}(s||(s={})),s})(),bE=(()=>{class s{compute(t,e){let i=this.hi(e.x)-this.hi(t.x),n=this.hi(e.y)-this.hi(t.y),o=e.time-t.time;return{duration:o,distance:this.Dp(i,n),direction:this.Aw(i,n),velocity:this.Tw(i,n,o)}}computePinchMetrics(t,e){let i=this.hi(e.x)-this.hi(t.x),n=this.hi(e.y)-this.hi(t.y);return{duration:e.time-t.time,distance:this.Dp(i,n)}}getScale(t,e){return Math.abs(e/t-1)}hi(t){return t/window.devicePixelRatio}Dp(t,e){return Math.round(Math.sqrt(t*t+e*e))}Tw(t,e,i){let n=i/1e3,o=t/n,c=e/n;return Math.round(Math.abs(o)+Math.abs(c))}Aw(t,e){return Math.abs(t)>Math.abs(e)?t>0?pr.RIGHT:pr.LEFT:e>0?pr.DOWN:pr.UP}}return s})(),ch=typeof performance!="undefined"&&!!performance.now,Ac=ch?()=>performance.now():()=>csDate.now(),RE=(()=>{var s;return ch?(s=performance.timing)===null||s===void 0?void 0:s.navigationStart:0})(),gr={now(){return Math.round(Ac()+RE)},elapsed(){return Ac()}};function Tc(s,r=0){let t=Math.pow(10,r);return Math.round(s*t)/t}var CE=1e3,IE=100,PE=.1,lo=(()=>{class s{constructor(){this.Jt={},this.Ah=()=>{},this.ka=new bE,this.Pe()}static isGestureDetectionSupported(){return typeof devicePixelRatio!="undefined"}onGesture(t){this.Ah=t}isValidTouchEvent(t){return"touches"in t&&"changedTouches"in t}processActionDown(t){if(!this.bw(t))return;this.Rw(t)&&this.Pe();let e={x:t.touches[0].clientX,y:t.touches[0].clientY,time:gr.now()};if(t.touches.length===1)this.Jt.startPinchTime=e.time,this.Jt.firstTouch=e;else if(t.touches.length===2&&(this.Jt.secondTouch={x:t.touches[1].clientX,y:t.touches[1].clientY,time:gr.now()},this.Jt.firstTouch&&this.Jt.secondTouch)){let i=this.ka.computePinchMetrics(this.Jt.firstTouch,this.Jt.secondTouch);this.Cr=i.distance}csArray.prototype.push.call(this.Fn,e),this.xa=Pt(t)}processActionMove(){this.Th=!0}processActionUp(t){if(this.Cw(t)){if(csArray.prototype.push.call(this.Fn,{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:gr.now()}),this.Iw(t)&&this.Jt.startPinchTime){let e={x:t.touches[0].clientX,y:t.touches[0].clientY,time:this.Jt.startPinchTime},i={x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:gr.now()};this.Jt.firstTouch&&(this.Jt.firstTouch=e,this.Jt.secondTouch=i),this.Pw(t)}this.Cr||this.Ow()&&this.Nw(t)}}Pe(){this.Fn=[],this.xa=null,this.Th=!1,this.Cr=null,this.$n=!0}Nw(t){let e=this.ka.compute(this.Fn[0],this.Fn[1]);this.$n=t.isTrusted;let i=this.Th?this.Mw(e):this.Dw(e);if(this.kw(i.type,t.changedTouches)){let n=t.changedTouches[0];i.pageX=Tc(n.pageX,1),i.pageY=Tc(n.pageY,1)}this.Ah(i,t)}Pw(t){if(!(this.Jt.firstTouch&&this.Jt.secondTouch))return;let e=this.ka.computePinchMetrics(this.Jt.firstTouch,this.Jt.secondTouch);this.$n=t.isTrusted;let i=this.xw(e);i&&this.Ah(i,t)}xw(t){return!this.Cr||this.ka.getScale(this.Cr,t.distance)<PE?void 0:{type:this.Cr>t.distance?Rt.PINCH_IN:Rt.PINCH_OUT,target:this.xa,distance:t.distance,isTrusted:this.$n}}Mw(t){return{type:t.velocity<IE?Rt.DRAG:Rt.FLICK,target:this.xa,velocity:t.velocity,distance:t.distance,direction:t.direction,isTrusted:this.$n}}Dw(t){return{type:t.duration<CE?Rt.TAP:Rt.LONG_PRESS,target:this.xa,isTrusted:this.$n}}kw(t,e){return t===Rt.TAP&&e&&e.length===1}Rw(t){return t.touches.length===1}Ow(){return this.Fn.length===2}bw(t){return t.touches.length>0}Cw(t){return t.changedTouches.length>0}Iw(t){return this.Th&&!!this.Cr&&t.changedTouches.length===1&&t.touches.length===1}}return s})(),OE="touchstart",NE="touchmove",ME="touchend",lh=(()=>{class s{constructor(t){this.A=t}observe(){s.kp&&s.bh(this.A)}disconnect(){s.kp&&s.xn(this.A)}static Lw(t,e){csArray.prototype.forEach.call(gs(s.Lt),i=>i(t,e))}static bh(t){s.Lt.has(t)||(s.Lt.add(t),s.Lt.size===1&&(s.zn.onGesture(s.Lw),csArray.prototype.forEach.call(s.fi,e=>yt(e))))}static xn(t){s.Lt.delete(t),s.Lt.size===0&&csArray.prototype.forEach.call(s.fi,e=>Et(e))}static Rh(t){if(s.zn.isValidTouchEvent(t))switch(t.type){case"touchstart":s.zn.processActionDown(t);break;case"touchmove":s.zn.processActionMove();break;case"touchend":s.zn.processActionUp(t);break}}}return s.fi=[{boundElement:ot.document,type:OE,listener:r=>s.Rh(r)},{boundElement:ot.document,type:NE,listener:r=>s.Rh(r)},{boundElement:ot.document,type:ME,listener:r=>s.Rh(r)}],s.kp=lo.isGestureDetectionSupported(),s.Lt=new Set,s.zn=new lo,s})(),DE=(()=>{class s extends fe{constructor(){super(),this.Gn=new lh(this.Ch.bind(this))}onStart(){this.Gn.observe()}onStop(){this.Gn.disconnect()}Ch(t){let e=this.Vw(t);e&&this.produceEvent(e)}Vw(t){return this.Uw(t)?{type:"Gesture",targetId:W(t.target),data:{type:t.type,direction:t.direction,distance:t.distance,velocity:t.velocity,pageX:t.pageX,pageY:t.pageY}}:null}Uw(t){return t.target!==null&&!(pt(t.target)&&D.isMaskedElementChild(t.target))}}return s})(),hh=(()=>{class s{constructor(t){this.A=t,this.pi=!1,this.Kt={boundElement:ot,type:"error",listener:e=>this.jw(e)}}observe(){yt(this.Kt,this.pi)}disconnect(){Et(this.Kt,this.pi)}jw(t){this.A(t)}}return s})(),kE=(()=>{class s extends fe{constructor(){super(...arguments),this.xp=new hh(t=>this.Hw(t))}Hw({message:t,filename:e,lineno:i,colno:n}){t=t!=null?t:"[NO ERROR MESSAGE]",e=!e||re(e)?"":e,this.produceEvent({type:"JSError",message:t,filename:e,lineno:i,colno:n})}onStart(){this.xp.observe()}onStop(){this.xp.disconnect()}}return s})(),xE=(()=>{class s extends ci{constructor(t){super(),this.Bw=t,this.Ih=1024,this.Ph=150}isListening(t){return t.type==="JSError"}processEvent(t){return t.message=Ot.truncate(t.message,this.Ih,Ot.ELLIPSIS),t.filename=Ot.truncate(t.filename,this.Ph,Ot.ELLIPSIS),this.Bw(t)}}return s})();var Ys=[],ho=!1,uh=Vs(VE,"executeTasks");function LE(s){if(csArray.prototype.push.call(Ys,s),!ho){for(let r=0;r<3;r++)csSetTimeout(uh);ho=!0}}function VE(){let s=csDate.now();for(let r=0;r<Ys.length;r++)if(Ys[r](),csDate.now()-s>=35){Ys=csArray.prototype.slice.call(Ys,r+1),csSetTimeout(uh);return}Ys=[],ho=!1}var Ze=(()=>{let s;return function(r){r[r.Started=0]="Started",r[r.Stopped=1]="Stopped",r[r.Processing=2]="Processing",r[r.Completed=3]="Completed"}(s||(s={})),s})(),dh=(()=>{class s{constructor(){this.vt=new Li,this.Dt=Ze.Stopped,this.A=null,this.Vp=t=>{this.Dt===Ze.Stopped||!t||(this.A(t),this.Up())}}get queueLength(){return this.vt.length}start(t){if(this.A)throw new Error("callback already set");this.Dt=Ze.Started,this.A=t}push(t){this.vt.push(t),this.Gw()}stop(){this.A=null,this.Dt=Ze.Stopped,this.vt.clear()}static pipe(t,e){let i=t,n=new csArray;for(let c of e){let l=new s;l.start(h=>{c.pushEvent(h)}),csArray.prototype.push.call(n,l),J(i,h=>h.subscribe(d=>l.push(d))),i=[c]}let o=new UE(n);return J(i,c=>c.subscribe(l=>o.push(l))),o}jp(){return this.Dt===Ze.Stopped}ps(){return this.Dt===Ze.Processing}Up(){if(!this.jp()){if(this.vt.isEmpty){this.Dt=Ze.Completed;return}this.Dt=Ze.Processing,LE(()=>{let t=this.vt.pop();t instanceof Qo?t.complete(this.Vp):this.Vp(t)})}}Gw(){this.jp()||this.ps()||this.Up()}}return s})(),UE=(()=>{class s extends dh{constructor(t){super(),this.Hp=t}get queueLength(){return csArray.prototype.reduce.call(this.Hp,(t,e)=>t+e.queueLength,0)}stop(){super.stop(),J(this.Hp,t=>t.stop())}}return s})(),jE=(()=>{class s{constructor(t,e=[]){this.producers=t,this.processors=e,this.Y=!1,this.Lt=[]}get pendingEvents(){var t,e;return(e=(t=this.vt)===null||t===void 0?void 0:t.queueLength)!==null&&e!==void 0?e:0}start(){if(this.Y)throw new Error("Recording is already started.");let t=this.Lt;this.vt=dh.pipe(this.producers,this.processors),this.vt.start(e=>csArray.prototype.forEach.call(t,i=>i(e))),J(this.producers,e=>e.start()),J(this.processors,e=>e.start()),this.Y=!0}stop(){this.vt.stop(),this.Lt.length=0;for(let t of this.producers)t.stop();for(let t of this.processors)t.stop();this.Y=!1,this.Lt=[]}subscribe(t){if(this.Y)throw new Error("Recording is already started.");return csArray.prototype.push.call(this.Lt,t),()=>this.Lt=csArray.prototype.filter.call(this.Lt,e=>e!==t)}}return s})(),HE=2,sa=(()=>{class s{constructor(t){this.qw=t,this.La=0}addString(t){this.La+=t.length*HE}addArrayBuffer(t){this.La+=t.byteLength}isThresholdReached(){return this.La>this.qw}reset(){this.La=0}}return s})(),BE=(()=>{class s{constructor(t){this.Va={},this.Oe=new sa(t)}save({key:t,metadata:e,events:i}){this.Oe.isThresholdReached()||(this.Oe.addString(t),typeof i=="string"?this.Oe.addString(i):this.Oe.addArrayBuffer(i),!this.Oe.isThresholdReached()&&(this.Va[t]={metadata:e,events:i}))}recover(t){let e=[];csArray.prototype.forEach.call(this.Ww(),i=>{let n=this.Va[i];n!==void 0&&(delete n.metadata.datatype,csArray.prototype.push.call(e,n),this.Yw(i))}),e.length!==0&&(t(e),this.Oe.reset())}Ww(){return Object.keys(this.Va)}Yw(t){delete this.Va[t]}}return s})(),ts=(()=>{let s;return function(r){r[r.NOT_STARTED=0]="NOT_STARTED",r[r.OPEN_IN_PROGRESS=1]="OPEN_IN_PROGRESS",r[r.OPEN_FAILED=2]="OPEN_FAILED",r[r.READY=3]="READY"}(s||(s={})),s})(),FE=(()=>{class s{constructor(t,e,i){this.Ir=t,this.Xw=i,this.Li=ts.NOT_STARTED,this.Ua=[],this.Dh=0,this.Kw=self.origin,this.Ne=typeof window=="object"?"":"worker-",this.Oe=new sa(e),this.Xl()}Xl(){return Q(this,null,function*(){yield this.Bp(),this.Li===ts.READY?this.Jw():this.Xw(this.Ua)})}Jw(){csArray.prototype.forEach.call(this.Ua,t=>{this.save(t)}),this.Ua=[]}save(t){return Q(this,null,function*(){try{if(this.Li===ts.OPEN_IN_PROGRESS){csArray.prototype.push.call(this.Ua,t);return}if(this.Li!==ts.READY||this.Oe.isThresholdReached())return;let{key:e,metadata:i,events:n}=t;if(this.Oe.addString(e),typeof n=="string"?this.Oe.addString(n):this.Oe.addArrayBuffer(n),this.Oe.isThresholdReached())return;yield this.re.put(`${this.Kw}/${e}`,new Response(n,{headers:i}))}catch(e){}})}recover(t){return Q(this,null,function*(){!this.re&&(yield this.Bp(),this.Li!==ts.READY)||this.Qw(t)})}Bp(){return Q(this,null,function*(){try{this.Li=ts.OPEN_IN_PROGRESS,this.re=yield self.caches.open(`${this.Ne}${this.Ir}`),this.Li=ts.READY}catch(t){this.Li=ts.OPEN_FAILED}})}Qw(t){return Q(this,null,function*(){try{if(this.Dh++,this.Dh>1)return;let e=yield this.re.keys();if(e.length===0)return;let i=yield this.re.matchAll(),n=csArray.prototype.map.call(i,c=>{let l={};c.headers.forEach((d,p)=>{l[p]=d}),delete l["content-type"];let h=l.datatype;return delete l.datatype,h==="json"||h==="base64"?c.text().then(d=>({metadata:l,events:d})):c.arrayBuffer().then(d=>({metadata:l,events:d}))}),o=yield Promise.all(n);yield Promise.all(csArray.prototype.map.call(e,c=>this.re.delete(c))),t(o),this.Oe.reset()}catch(e){}finally{this.Dh--}})}}return s})(),$E=(()=>{class s{constructor(t){try{this.Zw(t)}catch(e){this.kh()}}Zw(t){self.caches?this.tA(t):this.kh()}save(t){this.ja.save(t)}recover(t){this.ja.recover(t)}tA(t){this.ja=new FE(t,s.Fp,e=>{this.kh(e)})}kh(t){this.ja=new BE(s.Fp),t&&csArray.prototype.forEach.call(t,e=>{this.ja.save(e)})}}return s.Fp=1024*1024*16,s})(),$r=(()=>{let s;return function(r){r.UNCOMPRESSED="0",r.GZIP="2"}(s||(s={})),s})(),fh=(()=>{class s{}return s})(),ph=(()=>{class s{constructor(t){this.$p=[],this.zp=[],this.Xe={},this.Ha=t}setQueryParams(t){csArray.prototype.forEach.call(Object.keys(t),e=>{this.Xe[e]=t[e]})}removeQueryParams(t){t?csArray.prototype.forEach.call(t,e=>{delete this.Xe[e]}):this.Xe={}}onBeaconSuccess(t){csArray.prototype.push.call(this.$p,t)}onBeaconFailure(t){csArray.prototype.push.call(this.zp,t)}send(t){let e=Oi.toQuery(ct(j({},this.Xe),{ct:$r.UNCOMPRESSED})),i=this.eA(e,t);return i?csArray.prototype.forEach.call(this.$p,n=>n()):csArray.prototype.forEach.call(this.zp,n=>n(this.Xe)),i}eA(t,e){try{if(typeof csNavigatorsendBeacon!="function")return!1;let i=csNavigatorsendBeacon(`${this.Ha}?${t}`,e||"");if(i)return i}catch(i){}return typeof navigator.sendBeacon!="function"?!1:navigator.sendBeacon(`${this.Ha}?${t}`,e||"")}}return s})(),zE=(()=>{class s{constructor(t,e){this.w=t,this.R=e,this.qn=Qt.ETR_DISABLED,this.Ba=Qt.ETR_PENDING,this.xh=!0}getEtrStatus(t){t===void 0&&(t=this.R.getSession());let e=t==null?void 0:t.etrStatus;return this.Gp()&&e===Qt.ETR_SAVED_SESSION?e:this.qn}onEventTriggerRecording(t,e){switch(e){case us.ETR_PAGE:this.qp(Qt.ETR_SAVED_PAGE);break;case us.ETR_LEGACY:case us.ETR_SESSION:this.qp(Qt.ETR_SAVED_SESSION);break}}onCollectStateChange(t,e){t===M.RECORDING_TEMPORARILY?this.xh=!0:this.xh=!1,t===M.ANALYTICS_ONLY&&e===oe.ETR_ON?this.Wp(this.Ba):this.Wp(Qt.ETR_DISABLED)}Wp(t){this.qn=t,this.Ba=Qt.ETR_PENDING,this.Yp(t),this.w.emitRecordingContextChange()}qp(t){this.xh?Number(t)>Number(this.Ba)&&(this.Ba=t):this.Gp()&&Number(t)>Number(this.qn)&&(this.qn=t,this.Yp(t),this.w.emitRecordingContextChange())}Yp(t){let e=this.R.getSession();e!==null&&e.etrStatus===Qt.ETR_NOT_SAVED_SESSION&&t===Qt.ETR_SAVED_SESSION&&(e.etrStatus=t,this.R.setSession(e))}Gp(){return this.qn!==Qt.ETR_DISABLED}}return s})(),GE=(()=>{class s{constructor(t=100){this.sA=t,this.Fa={},this.Wn=null,this.ih="original-resource-name"}onEvent(t){this.iA=t}processEvent(t){this.rA(t.resourceId,t.resource.hash,t.originalResourceName),this.nA(t)}flushEvents(){this.Wn&&csClearTimeout(this.Wn),this.Xp()}onSendStaticResource(t){this.nA=t}Xp(){if(!Object.keys(this.Fa).length)return;let t={type:L.RESOURCE_HASHES,date:k.now(),args:[this.Fa]};this.Wn=null,this.Fa={},this.iA(t)}rA(t,e,i){let n=e;i&&(n+=`?${this.ih}=${i}`),this.Fa[t]=n,!this.Wn&&(this.Wn=window.csSetTimeout(()=>this.Xp(),this.sA))}}return s})();function qE(s,r,t){let{timestamp:e}=s;switch(s.domEvent){case"initialDOM":{let{initialDOM:i}=s,n={type:L.INITIAL_DOM,date:e,args:[i]};t.emitInitialDomDone(n);break}case"nodesAdded":{csArray.prototype.forEach.call(s.nodes,i=>{r({type:L.MUTATION_INSERT,date:e,args:[s.target,s.nextSibling,i]})});break}case"nodesMoved":{for(let i of s.nodesIds)r({type:L.MUTATION_MOVE,date:e,args:[i,s.nextSibling,s.target]});break}case"nodesRemoved":{csArray.prototype.forEach.call(s.nodesIds,i=>{r({type:L.MUTATION_REMOVE,date:e,args:[i]})});break}case"attributeChanged":{let{target:i,namespace:n,attribute:o,newValue:c}=s;r({type:L.MUTATION_ATTRIBUTE,date:e,args:[i,n,o,c]});break}case"characterDataChanged":{let{target:i,newValue:n}=s;r({type:L.MUTATION_CHARACTER_DATA,date:e,args:[i,n]});break}case"cssRuleInserted":{let{target:i,rule:n,index:o}=s,c=Z(o)?[i,n,o]:[i,n];r({type:L.STYLESHEET_RULE_INSERT,date:e,args:c});break}case"cssRuleDeleted":{let{target:i,index:n}=s;r({type:L.STYLESHEET_RULE_DELETE,date:e,args:[i,n]});break}case"cssRuleUpdated":{let{target:i,rule:n,index:o}=s;r({type:L.STYLESHEET_RULE_UPDATE,date:e,args:[i,n,o]});break}case"cssStyleSheetDisabled":{let{target:i,disabled:n}=s;r({type:L.STYLESHEET_DISABLED,date:e,args:[i,n]});break}case"shadowRootAttached":{let{target:i,shadowRoot:n}=s;r({type:L.ATTACH_SHADOW,date:e,args:[i,n]});break}case"adoptedStyleSheetRegistered":{let{sheetId:i,cssRules:n,disabled:o}=s;r({type:L.REGISTER_ADOPTED_STYLE_SHEET,date:e,args:[i,{cssRules:n,disabled:o}]});break}case"adoptedStyleSheetsSet":{let{target:i,sheetsIds:n}=s;r({type:L.SET_ADOPTED_STYLE_SHEETS,date:e,args:[i,n]});break}case"adoptedStyleSheetRuleInserted":{let{sheetId:i,rule:n,index:o}=s,c=Z(o)?[i,n,o]:[i,n];r({type:L.ADOPTED_STYLESHEET_RULE_INSERT,date:e,args:c});break}case"adoptedStyleSheetRuleDeleted":{let{sheetId:i,index:n}=s;r({type:L.ADOPTED_STYLESHEET_RULE_DELETE,date:e,args:[i,n]});break}case"adoptedStyleSheetRuleUpdated":{let{sheetId:i,rule:n,index:o}=s,c=[i,n,o];r({type:L.ADOPTED_STYLESHEET_RULE_UPDATE,date:e,args:c});break}case"adoptedStyleSheetDisabled":{let{sheetId:i,disabled:n}=s,o=[i,n];r({type:L.ADOPTED_STYLESHEET_DISABLED,date:e,args:o});break}default:B.error("translateDOMEvent: DOMEvent not supported");break}}function WE(s){let r=YE(s.data);return{type:L.GESTURE_RECOGNITION,args:[s.targetId,r],date:s.timestamp}}function YE(s){let r={type:XE(s.type)};for(let t in s){let e=s[t];e!==void 0&&t!=="type"&&(r[t]=e)}return r}function XE(s){switch(s){case Rt.DRAG:case Rt.FLICK:return mi.SWIPE;case Rt.LONG_PRESS:return mi.LONG_PRESS;case Rt.TAP:return mi.TAP;case Rt.PINCH_IN:return mi.PINCH_IN;case Rt.PINCH_OUT:return mi.PINCH_OUT}}function KE(s){switch(s.inputType){case"text":return{type:L.INPUT_TEXT,args:[s.target,s.value],date:s.timestamp};case"select":return{type:L.INPUT_SELECT,args:[s.target,s.selectedIndex],date:s.timestamp};case"checkable":return{type:L.INPUT_CHECKABLE,args:[s.target,s.checked],date:s.timestamp}}}var Rn=(()=>{let s;return function(r){r.REQUEST_START="requestStart",r.DOM_INTERACTIVE="domInteractive",r.TIME_ORIGIN="timeOrigin"}(s||(s={})),s})();function JE(s){return{type:L.PERFORMANCE_TIMINGS,args:[{performanceTiming:Rn.REQUEST_START,timestamp:s.timings.requestStart},{performanceTiming:Rn.DOM_INTERACTIVE,timestamp:s.timings.domInteractive},{performanceTiming:Rn.TIME_ORIGIN,timestamp:s.timings.timeOrigin}],date:s.timestamp}}var QE=500,Cn=0;function ZE(){return{processEvent(s,r){if(s.originalEvent.type===L.PERFORMANCE_RESOURCE_TIMING)return Cn>=QE?null:(Cn+=1,r(ct(j({},s.originalEvent),{date:s.timestamp})));r(s.originalEvent)},reset(){Cn=0}}}function tv(s,r){let t=[],e=!1;return{push(i){if(csArray.prototype.push.call(t,i),t.length===r.batchSize){this.flush();return}r.autoFlushDelay&&r.autoFlushDelay>0&&!e&&(e=!0,csSetTimeout(()=>{e=!1,t.length>0&&this.flush()},r.autoFlushDelay))},flush(){if(!t.length)return;let i=t;t=[],s(i)}}}var ev=20;function sv(s){return tv(r=>{let t={visibleInViewPort:r},e={type:L.TEXT_VISIBILITY,date:k.now(),args:[t]};s(e)},{batchSize:ev,autoFlushDelay:1e3})}function iv(s){switch(s.videoEventType){case"play":return{type:L.VIDEO_PLAY,args:[s.nodeId],date:s.timestamp};case"pause":return{type:L.VIDEO_PAUSE,args:[s.nodeId],date:s.timestamp};case"seeked":{let r=s;return{type:L.VIDEO_SEEK,args:[r.nodeId,r.newTimePositionInSec],date:s.timestamp}}default:return null}}var rv=(()=>{class s{get pendingEvents(){return this.$a.pendingEvents}constructor(t,e,i,n,o){this.$a=t,this.w=e,this.Me=i,this.gs=n,this.Ds=o,this.Qt=()=>{},this.Yn=()=>{},this.Kp=sv(c=>this.Qt(c))}start(){var t,e;this.Jp=ZE(),this.$a.subscribe(i=>{var n,o,c,l,h,d,p;let y=i,{timestamp:m}=y;switch(y.type){case"Legacy":{let v=y.eventType==="user"?(n=this.Yn)!==null&&n!==void 0?n:()=>{}:this.Qt;this.Jp.processEvent(y,v)}break;case"CustomElementRegistration":{this.Qt({type:L.CUSTOM_ELEMENT_REGISTRATION,date:m,args:[y.tagName]});break}case"DomEvent":{qE(y,this.Qt,this.w);break}case"InputEvent":{let v=KE(y);(o=this.Yn)===null||o===void 0||o.call(this,v);break}case"inputEncryptedText":{let{target:v,value:b,encryptedData:C,encryptionMetadata:_}=y;(c=this.Yn)===null||c===void 0||c.call(this,{type:L.INPUT_ENCRYPTED_TEXT,date:m,args:[v,b,C,_]});break}case"encryptedCharacterDataChanged":{let{target:v,rawData:b,encryptedData:C,encryptionMetadata:_}=y;this.Qt({type:L.MUTATION_ENCRYPTED_CHARACTER_DATA,date:m,args:[v,b,C,_]});break}case"StaticResource":{let{url:v}=y;this.Qt({type:L.STATIC_RESOURCE_URL,date:m,args:[v]});break}case"ResizeMaskedElement":{let{target:v,width:b,height:C}=y;this.Qt({type:L.MUTATION_ATTRIBUTE,date:m,args:[v,"","style",`width:${b}px !important;height:${C}px !important;`]});break}case"Gesture":{let v=WE(i);(l=this.Yn)===null||l===void 0||l.call(this,v);break}case"TextVisibility":{this.Kp.push(y.text);break}case"StaticResourceManagerEvent":{(h=this.Me)===null||h===void 0||h.processEvent(y);break}case"screenResize":{let{width:v,height:b}=y,C={type:L.SCREEN_RESIZE,date:m,args:[v,b]};this.Qt(C);break}case"viewportResize":{let{width:v,height:b}=y,C={type:L.RESIZE,date:m,args:[v,b]};this.Qt(C);break}case"PerformanceTiming":{this.Qt(JE(y));break}case"CustomError":{let v=(d=this.Ds)===null||d===void 0?void 0:d.translate(y);v&&this.Qt(v);break}case"JSError":{let v=(p=this.gs)===null||p===void 0?void 0:p.translate(y);v&&this.Qt(v);break}case"VideoEvent":{let v=iv(y);v&&this.Qt(v);break}case"DOM_INITIAL_STATE":{let v={type:L.DOM_INITIAL_STATE,date:m,args:[y.state]};this.w.emitInitialDomDone(v);break}case"DOM_PATCH":{let v={type:L.DOM_PATCH_STATE,date:m,args:[y.diff]};this.Qt(v);break}case"warning":{B.warn(y.message);break}default:B.error(`WebRecorderEventTranslator: Event not supported (${y.type})`);break}}),this.w.emitInitialDomStart(),(t=this.gs)===null||t===void 0||t.start(),(e=this.Ds)===null||e===void 0||e.start(),this.$a.start()}stop(){var t,e,i;this.reset(),this.flush(),this.$a.stop(),(t=this.Me)===null||t===void 0||t.flushEvents(),(e=this.gs)===null||e===void 0||e.stop(),(i=this.Ds)===null||i===void 0||i.stop()}flush(){this.Kp.flush()}onEvent(t,e){var i;this.Qt=t,this.Yn=e,(i=this.Me)===null||i===void 0||i.onEvent(n=>this.Qt(n))}reset(){this.Jp.reset()}}return s})();var nv=(()=>{class s{constructor(t){this.za=t,this.Xn=20,this.Ui=0,this.B=!1}translate(t){if(this.Ui>=this.Xn)return this.za.stop(),null;this.Ui+=1;let{filename:e,message:i,lineno:n,colno:o,timestamp:c}=t;return{type:L.JAVASCRIPT_ERROR,date:c,args:[{errorType:"jsError",message:i,filename:e,lineno:n,colno:o}]}}start(){this.B||(this.Ui=0,this.B=!0)}stop(){this.B=!1}}return s})(),ov=(()=>{class s extends fe{constructor(t){super(),this.He=t}subscribe(t){return super.subscribe(t)}onStart(){J(this.He,t=>{t.onEvent(e=>{var i;return this.Pr(e,(i=t.eventType)!==null&&i!==void 0?i:"browser")})}),J(this.He,t=>{var e;(e=t.start)===null||e===void 0||e.call(t)})}onStop(){J(this.He,t=>{var e;return(e=t.stop)===null||e===void 0?void 0:e.call(t)})}Pr(t,e){this.produceEvent({timestamp:k.now(),type:"Legacy",originalEvent:t,eventType:e})}}return s})(),gh=(()=>{class s{emit(t,e,i,n=document){let c=`${i!==void 0?`${i}`:`${s.oA}`}${t}`,l=s.createEvent(c,{detail:e});l!==null&&n.dispatchEvent(l)}static createEvent(t,e={}){if(typeof CustomEvent=="function")return new CustomEvent(t,e);let i=this.aA();if(i===null)return null;let{bubbles:n=!1,cancelable:o=!1,detail:c}=e;return i.initCustomEvent(t,n,o,c),i}static aA(){try{return document.createEvent("CustomEvent")}catch(t){return null}}}return s.oA="cs.tracking.",s})(),ne=(()=>{let s;return function(r){r.Visible="visible",r.Hidden="hidden",r.Blur="blur",r.PagehideVisible="pagehideVisible",r.PagehideHidden="pagehideHidden",r.ExitPageByNavigate="exitPageByNavigate"}(s||(s={})),s})(),mh=(()=>{class s{constructor(){this.B=!1,this.gi=t=>{try{switch(t.type){case"visibilitychange":return document.visibilityState==="hidden"?this.ne(ne.Hidden):this.ne(ne.Visible);case"pagehide":return document.visibilityState==="hidden"?this.ne(ne.PagehideHidden):this.ne(ne.PagehideVisible);case"blur":return this.ne(ne.Blur);case"navigate":return this.cA(t)?this.ne(ne.ExitPageByNavigate):void 0;default:return}}catch(e){}}}start(){this.B||(this.B=!0,this.Lh(),this.lA(),this.hA(),Ma()&&this.uA())}stop(){this.B&&(this.B=!1,this.Vh(),this.dA(),this.fA(),Ma()&&this.pA())}onEvent(t){this.ne=t}uA(){window.navigation.addEventListener("navigate",this.gi)}pA(){window.navigation.removeEventListener("navigate",this.gi)}Lh(){document.addEventListener("visibilitychange",this.gi)}Vh(){document.removeEventListener("visibilitychange",this.gi)}lA(){window.addEventListener("pagehide",this.gi)}dA(){window.removeEventListener("pagehide",this.gi)}hA(){window.addEventListener("blur",this.gi)}fA(){window.removeEventListener("blur",this.gi)}cA(t){return t instanceof NavigateEvent?!t.hashChange&&!t.downloadRequest&&!t.formData:!1}}return s})(),Ht=(()=>{let s;return function(r){r[r.Active=0]="Active",r[r.Paused=1]="Paused",r[r.Stopped=2]="Stopped"}(s||(s={})),s})(),av=(()=>{class s{constructor(t,e,i=[]){this.Pr=t,this.Uh=e,this.gA=i,this.Ga=null,this.Dt=Ht.Active,this.ot=[]}reset(){this.Ga=null,this.ot=[],this.Dt=Ht.Active}disconnect(){this.Dt=Ht.Stopped}mA(){this.Uh(Ht.Paused),this.Dt=Ht.Paused,csSetTimeout(()=>{this.Dt===Ht.Paused&&this.jh()},s.STOP_TIMEOUT)}yA(){this.Uh(Ht.Active),this.Dt=Ht.Active,J(this.ot,this.Pr),this.ot=[]}jh(){this.ot=[],this.Uh(Ht.Stopped),this.Dt=Ht.Stopped}pushEvent(t,e){if(e.isUserEvent&&(this.Ga=t.date,this.Dt!==Ht.Active)){this.yA(),this.Pr(t);return}if(this.EA(t)){this.Pr(t);return}switch(this.Dt){case Ht.Active:if(this.vA(t,e)){this.mA(),csArray.prototype.push.call(this.ot,t);return}this.Pr(t);break;case Ht.Paused:csArray.prototype.push.call(this.ot,t);break;case Ht.Stopped:break}}vA(t,e){return!e.isUserEvent&&this.Ga!==null&&t.date-this.Ga>s.INACTIVITY_TIMEOUT}EA(t){return csArray.prototype.indexOf.call(this.gA,t.type)>-1}}return s.INACTIVITY_TIMEOUT=5e3,s.STOP_TIMEOUT=5e3,s})(),cv=2e3,lv=(()=>{class s extends zt{constructor(t,e,i,n,o,c,l,h,d,p,y,m,v,b=[],C,_,T,x,O){super(),this.E=t,this.z=e,this.SA=i,this.V=n,this.R=o,this.ye=c,this._t=l,this.Be=h,this.ht=d,this.X=p,this.Vt=y,this.Nt=m,this.Fe=v,this.He=b,this.Qp=C,this.Zt=_,this.Kn=T,this.gs=x,this.Ds=O,this.mi=0,this.yi=new gh,this.Or={allowFromQuotaService:!0,allowFromSerialization:!0},this.Zp=jr(()=>{this.z.eventsCount()>0&&this.tg()},cv),this.ks=w=>this.processBrowserEvent(w),this.Jn=w=>this.Ut(w),this.qa=0,this.Qn=0,this.Ke=new mh,this.Hh=!1,this.eg=50*1024,this.ji=!1,this.Zn=!1,this.Di=[],this.Wa=new av(w=>this.Q(w),w=>{switch(w){case Ht.Active:this._A();break;case Ht.Stopped:this.wA();break}},[L.RESOURCE_HASHES,L.TEXT_VISIBILITY,L.API_ERROR,L.JAVASCRIPT_ERROR]),this.sg=w=>{this.Vt.removeBatchInProgress(`${w.params.sn}.${w.params.pn}.${w.params.ri}`)}}init(){this.Bh(),this.X.onLoad(this.sg),this.X.onError(this.sg)}_A(){csArray.prototype.forEach.call(this.Qp,t=>t.start())}wA(){csArray.prototype.forEach.call(this.Qp,t=>t.stopForInactivity())}Bh(){var t,e,i;this.Fe.onEvent(this.ks,this.Jn),(t=this.ht)===null||t===void 0||t.onInputNodeToEncrypt(this.Jn),(e=this.ht)===null||e===void 0||e.onApiErrorToEncrypt(n=>{this.ig(n)}),(i=this.ht)===null||i===void 0||i.onUserIdentifierToEncrypt(this.ks),this.Ke.onEvent(n=>{if(csSetTimeout(()=>this.Hi("page-state",n)),n!==ne.Visible){if(n===ne.Blur)return this.rg();if(!this.Hh)return this.Hh=!0,csSetTimeout(()=>{this.Hh=!1}),n===ne.Hidden?this.rg():this.AA()}})}isRecording(){return this.R.hasValidSession()&&this.isStarted}rg(){if(!this.canSendEvents())return;this.Fe.flush(),this.Vt.saveBatchesInProgress(),J(this.He,c=>{var l,h;return J((h=(l=c.getPendingEvents)===null||l===void 0?void 0:l.call(c))!==null&&h!==void 0?h:[],d=>this.z.addEvent(d))});let t=this.z.getEvents();if(t.length===0)return;this.Hi("pending-events",this.Fe.pendingEvents);let e=this.X.getQueryParams();e.rst=this.getRecordingStartTimestamp(),this.Qn=t[t.length-1].date,e.let=this.getRecordingLastEventTimestamp();let i=this.z.getCurrentRequestIndex(),n=i.getCurrentIndex();e.ri=n.toString(),this.Nt.removeQueryParams(),this.Nt.setQueryParams(e);let o=this.z.stringifyEvents();if(o.length>this.eg){let c=this.ng();if(c.length>0){let l=Ds(c);this.Nt.send(l)||this.Vt.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:ct(j({},e),{datatype:"json"}),events:l}),i.increment()}if(this.z.eventsCount()>0){e.ri=i.getCurrentIndex().toString();let l=this.z.stringifyEvents();this.Vt.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:ct(j({},e),{datatype:"json"}),events:l}),i.increment()}}else this.Nt.send(o)||this.Vt.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:ct(j({},e),{datatype:"json"}),events:o}),i.increment();this.Nt.removeQueryParams(),this.z.clearEvents()}AA(){if(!this.canSendEvents())return;this.Fe.flush();let t=this.X.getQueryParams();this.Vt.saveBatchesInProgress(),t.rst=this.getRecordingStartTimestamp(),delete t.ri,t.hlm="true",this.Nt.removeQueryParams(),J(this.He,n=>{var o,c;return J((c=(o=n.getPendingEvents)===null||o===void 0?void 0:o.call(n))!==null&&c!==void 0?c:[],l=>this.z.addEvent(l))});let e=this.z.getEvents();if(e.length===0){delete t.let,delete t.rst,this.Nt.setQueryParams(t),this.Nt.send(),this.Nt.removeQueryParams();return}this.Hi("pending-events",this.Fe.pendingEvents),this.Qn=e[e.length-1].date,t.let=this.getRecordingLastEventTimestamp(),this.Nt.setQueryParams(t);let i=this.z.stringifyEvents();if(i.length>this.eg){let n=this.ng();if(n.length>0){let o=Ds(n);this.Nt.send(o)||this.Vt.save({key:`${t.sn}.${t.pn}.last`,metadata:ct(j({},t),{datatype:"json"}),events:o})}else delete t.let,delete t.rst,delete t.ri,this.Nt.removeQueryParams(),this.Nt.setQueryParams(t),this.Nt.send(),this.Nt.removeQueryParams();if(this.z.eventsCount()>0){t.rst=this.getRecordingStartTimestamp(),t.let=this.getRecordingLastEventTimestamp();let o=this.z.getCurrentRequestIndex(),c=o.getCurrentIndex();t.ri=c.toString();let l=this.z.stringifyEvents();this.Vt.save({key:`${t.sn}.${t.pn}.${t.ri}.last`,metadata:ct(j({},t),{datatype:"json"}),events:l}),o.increment()}}else this.Nt.send(i)||(this.Vt.save({key:`${t.sn}.${t.pn}.${t.ri}.last`,metadata:ct(j({},t),{datatype:"json"}),events:i}),this.z.getCurrentRequestIndex().increment());this.Nt.removeQueryParams(),this.z.clearEvents()}blockSendingEventsFromQuotaService(){this.Or.allowFromQuotaService=!1}allowSendingEventsFromQuotaService(){this.Or.allowFromQuotaService=!0}blockSendingEventsFromSerialization(){this.Or.allowFromSerialization=!1}allowSendingEventsFromSerialization(){this.Or.allowFromSerialization=!0}canSendEvents(){return this.Or.allowFromQuotaService&&this.Or.allowFromSerialization}onIframeJavascriptError(t){var e;if(this.ye&&this.gs){(e=this.ye)===null||e===void 0||e.anonymize(t);let i=this.gs.translate({message:t.message,colno:t.colno,lineno:t.lineno,filename:t.filename,timestamp:k.now(),type:"JSError"});i&&this.ks(i)}}onIframeCustomError(t){if(this.Ds){let e=this.Ds.translate(ct(j({},t),{timestamp:k.now(),type:"CustomError"}));e&&this.ks(e)}}onIframeDetailedApiError(t){this.og(t)}onIframeRecordingUserEvent(t){for(let e of t)this.Ut(e)}onIframeRecordingBrowserEvent(t){if(this.isStarted)for(let e of t)this.processBrowserEvent(e)}processBrowserEvent(t){this.V.isCurrentPageviewValid()&&this.Wa.pushEvent(t,{isUserEvent:!1})}Ut(t){this.V.refreshSession(),this.V.isSessionValid()&&this.Wa.pushEvent(t,{isUserEvent:!0})}Q(t){_t.general.nbEvents.increase(),this.z.addEvent(t),this.z.isThresholdReached()?this.pushEvents():this.z.isFull()&&this.Zp(),this.ag(t)}ag(t){this.E.emitDebugEvents&&this.yi.emit("recordingEvent",ct(j({},t),{typeName:L[t.type]}))}onStart(){var t;this.Hi("tag-version","15.163.0"),this.Hi("page-state",document.visibilityState),this.Wa.reset(),this.Ke.start(),this.initStates(),this.Fe.start(),this._t&&this.Be&&this._t.subscribe(s.jt,e=>this.og(e),{detailedEvent:!0}),this.E.emitDebugEvents&&this.yi.emit("replayRecordingStarted"),csArray.prototype.forEach.call(this.Di,e=>this.cg(e)),this.Di=[],this.ji&&((t=this.Zt)===null||t===void 0||t.enableOnlineAssets(),this.ji=!1)}onStop(){var t;this.Ke.stop(),this._t&&this._t.unsubscribe(s.jt),this.Fe.stop(),this.Wa.disconnect(),(t=this.Zt)===null||t===void 0||t.disableOnlineAssets()}clearStates(){this.Fe.flush(),this.Zp.cancel(),this.pushEvents(),this.X.removeQueryParams()}initStates(){this.qa=k.now(),this.z.getCurrentRequestIndex().reset(),this.mi=0,this.X.setQueryParams(this.SA.getRequestParameters())}pushEvents(){J(this.He,t=>{var e;return(e=t.flushEvents)===null||e===void 0?void 0:e.call(t)}),this.z.eventsCount()>0&&(this.isStarted?this.tg():this.z.clearEvents())}tg(){if(!this.canSendEvents())return;let t=this.z.getOrderedBatchSlots();for(let e of t){let i=e.batch.getEvents();if(!i.length)continue;this.Qn=i[i.length-1].date;let n=e.metadata.requestIndex,o=n.getCurrentIndex(),c=this.qa>this.Qn?i[0].date:this.qa;this.X.setQueryParams({pn:csString(e.metadata.pageNumber),ri:o.toString(),rst:c.toString(),let:this.getRecordingLastEventTimestamp()});let l=this.X.getQueryParams();this.Vt.addBatchInProgress(`${l.sn}.${l.pn}.${o}`,j({},this.X.getQueryParams()),i),this.X.send(i),n.increment(),e.batch.clearEvents(),this.lg&&this.lg()}this.z.clearEmptyBatchSlots()}addInitialDom(t){this.z.addEventByTimestamp(t),this.ag(t)}og(t){if(this.Kn&&(t.plainCustomRequestHeaders||t.plainCustomResponseHeaders||t.requestBodyAttributes||t.responseBodyAttributes||t.customRequestHeaders||t.customResponseHeaders||t.queryParameters||t.requestBody||t.responseBody)){if(this.Kn.truncate(t),this.ht){this.ht.registerApiErrorToEncrypt(t);return}t.customRequestHeaders="",t.customResponseHeaders="",t.requestBodyAttributes="",t.responseBodyAttributes="",t.queryParameters="",t.requestBody="",t.responseBody=""}this.ig(t)}ig(t){if(this.mi<s.TA){let e={type:L.API_ERROR,date:k.now(),args:[this.Be.anonymize(t)]};this.ks(e),this.mi=this.mi+1,q.counters.networkRequests.count("collected")}}bA(t){t===us.ETR_SESSION?this.X.setQueryParams({[s.RA]:s.hg}):t===us.ETR_PAGE&&this.X.setQueryParams({[s.CA]:s.hg})}clearEvents(){this.z.clearEvents()}onCustomJavaScriptErrorEvent(t){var e;let i=(e=this.gs)===null||e===void 0?void 0:e.translate({type:"JSError",timestamp:k.now(),message:t.message,colno:t.colno,lineno:t.lineno,filename:t.filename});i&&this.ks(i)}onCustomErrorEvent(t){var e;let i=(e=this.Ds)===null||e===void 0?void 0:e.translate({type:"CustomError",timestamp:k.now(),message:t.message,attributes:t.attributes});i&&this.ks(i)}onPageEvent(t){this.ug(t)}onUserIdentifierEvent(t){var e;let i={userIdentifier:t,date:k.now(),keyId:this.E.encryptionPublicKeyId};(e=this.ht)===null||e===void 0||e.registerUserIdentifierToEncrypt(i)}onEventTriggerRecording(t,e){this.isStarted?this.cg({eventName:t,eventType:e}):csArray.prototype.push.call(this.Di,{eventName:t,eventType:e})}cg(t){this.bA(t.eventType),this.ug(t.eventName),this.pushEvents()}ug(t){let e={type:L.PAGE_EVENT,date:k.now(),args:[{eventName:csString.prototype.slice.call(t,0,s.IA)}]};this.z.addEvent(e)}triggerUnanonymizationConsentGranted(){let t={date:k.now(),type:L.UNANONYMIZED_CONSENT_GRANTED};this.z.addEvent(t)}triggerUnanonymizationConsentWithdrawn(){let t={date:k.now(),type:L.UNANONYMIZED_CONSENT_WITHDRAWN};this.z.addEvent(t)}triggerRecordingForSessionGranted(){this.Hi("consent-granted")}triggerRecordingForSessionWithdrawn(){this.Hi("consent-withdrawn")}activateOnlineAssetsOnNextPageview(){this.Zn=!0}getStaticResourceManagerStatus(){return this.Zt?{isStarted:this.E.useStaticResourceManager&&no.isSupported(),onlineAssets:{activated:this.Zt.isOnlineAssetsActivated(),enabledOnNextPageview:this.Zn}}:null}resetOnlineAssetsOnPageview(){this.ji=!1,this.Zn=!1}updateOnlineAssetsOnPageview(){this.Zt&&this.Zn&&(this.ji=!0,this.Zn=!1)}onRecordingRequestSent(t){this.lg=t}getRecordingStartTimestamp(){return this.qa.toString()}getRecordingLastEventTimestamp(){return this.Qn.toString()}onOptOut(){J(this.He,t=>{var e;return(e=t.releaseResources)===null||e===void 0?void 0:e.call(t)})}Hi(t,e){if(!this.E.emitRecordInfoEvents)return;let i={date:k.now(),type:L.RECORDING_INFO_EVENT,args:e==null?[t]:[t,e]};this.z.addEvent(i)}ng(){return this.z.extractEvents(L.API_ERROR,L.JAVASCRIPT_ERROR,L.CUSTOM_ERROR,L.TEXT_VISIBILITY,L.POINTER_DOWN)}}return s.jt="RecordingService",s.IA=255,s.TA=20,s.CA="etrp",s.RA="etrs",s.hg="1",F([Nt("addInitialDom")],s.prototype,"addInitialDom",null),s})(),hv=(()=>{class s extends zt{constructor(t,e,i){super(),this.oe=t,this.Nt=e,this.X=i,this.Fh=!1,this.to={},this.PA=n=>{if(n.length!==0)for(let o of n){let{metadata:c,events:l}=o;this.OA(c.rt)&&this.X.send(l,c)}},window.addEventListener("focus",()=>{this.recover()})}onStart(){this.to={}}onStop(){}recover(){this.oe.recover(this.PA)}addBatchInProgress(t,e,i){this.to[t]={metadata:j({},e),events:i}}removeBatchInProgress(t){delete this.to[t]}blockSendingLastMessage(){this.Fh=!1}allowSendingLastMessage(){this.Fh=!0}sendLastMessageBeacon(){if(this.Fh){let t=this.X.getQueryParams(),{ri:e,rst:i,let:n}=t,o=sn(t,["ri","rst","let"]);o.hlm="true",this.Nt.setQueryParams(o),this.Nt.send()}}OA(t){return!!t&&csString.prototype.indexOf.call(t,M.RECORDING_TEMPORARILY)===-1}saveBatchesInProgress(){csArray.prototype.forEach.call(Object.keys(this.to),t=>{let{metadata:e,events:i}=this.to[t];this.oe.save({key:`${e.sn}.${e.pn}.${e.ri}`,metadata:ct(j({},e),{datatype:"json"}),events:csJSON.stringify(i)})})}save(t){this.oe.save(t)}}return F([N("RecordingRecovery")],s.prototype,"recover",null),s})(),uv=(()=>{let s;return function(r){r[r.NOT_EXIST=2]="NOT_EXIST"}(s||(s={})),s})(),dv=8*1024*1024,fv=(()=>{class s extends zt{constructor(t,e,i){super(),this.Me=t,this.dg=e,this.Et=i,this.$h={},this.fg=new Set,this.ps=!1}initState(){tl()&&(this.Ve=this.Et.getRequestParameters(),this.NA=`${this.dg}/exist?${Oi.toQuery(this.Ve)}`,this.MA=`${this.dg}/putTag?${Oi.toQuery(this.Ve)}`,this.pg=Ci(()=>Q(this,null,function*(){if(this.ps){this.pg();return}this.ps=!0;try{yield this.DA()}finally{this.ps=!1}}),300),this.Me.onSendStaticResource(t=>{this.gg(t)}))}onStart(){}onStop(){}onIframeStaticResource(t){this.gg(t)}gg(t){this.mg(t.resource.hash,t.resource.data),t.nestedResources&&t.nestedResources.length>0&&csArray.prototype.forEach.call(t.nestedResources,e=>{this.mg(e.hash,e.data)})}mg(t,e){this.fg.has(t)||(this.fg.add(t),this.$h[t]=e,this.pg())}DA(){return Q(this,null,function*(){let t=this.$h;this.$h={};let e=yield this.kA(t);if(!e.length)return;let i=this.xA(e);yield Promise.all(csArray.prototype.map.call(i,n=>window.fetch(this.MA,{method:"POST",body:n})))})}LA(t){return Q(this,null,function*(){try{let e=Object.keys(t);if(!e.length)return[];let i={projectId:this.Ve.pid,filter:uv.NOT_EXIST,hashes:e,touch:!0};return yield(yield window.fetch(this.NA,{method:"POST",body:csJSON.stringify(i)})).json()}catch(e){return[]}})}kA(t){return Q(this,null,function*(){let e=[],i=yield this.LA(t);return csArray.prototype.forEach.call(i,n=>{let o=t[n];o?csArray.prototype.push.call(e,{hash:n,data:o}):B.warn("SRM: received unknown hash: "+n)}),e})}xA(t){let e=0,i=[new FormData];for(let n of t){let{data:o,hash:c}=n,l=i.length-1;if(e=e+o.size,e<dv)i[l].append("",o,c);else{let h=new FormData;h.append("",o,c),e=o.size,csArray.prototype.push.call(i,h)}}return i}}return s})(),yh=2*1e3*1024,pv=200,bc=(()=>{class s{constructor(t=yh){this.Ht=[],this.zh=new sa(t)}addEvent(t){this.zh.addString(Ds(t)),csArray.prototype.push.call(this.Ht,t)}addEventByTimestamp(t){let e=0;for(;e<this.Ht.length&&!(this.Ht[e].date>=t.date);e+=1);csArray.prototype.splice.call(this.Ht,e,0,t)}eventsCount(){return this.Ht.length}clearEvents(){this.zh.reset(),this.Ht=[]}isFull(){return this.eventsCount()>=pv}isThresholdReached(){return this.zh.isThresholdReached()}getEvents(){return this.Ht}extractEvents(...t){let e=[],i=[];return csArray.prototype.forEach.call(this.Ht,n=>{csArray.prototype.indexOf.call(t,n.type)!==-1?csArray.prototype.push.call(e,n):csArray.prototype.push.call(i,n)}),this.Ht=i,e}stringifyEvents(){return Ds(this.Ht)}_O(t){t.type===L.INITIAL_DOM&&(window.CSDomSerialized=window.CSDomSerialized?window.CSDomSerialized+1:1)}}return F([Nt("RecordingBatch.addEvent")],s.prototype,"addEvent",null),s})();function gv(s){if(typeof Object.values=="function")return Object.values(s);let r=[];for(let t in s)s.hasOwnProperty(t)&&csArray.prototype.push.call(r,s[t]);return r}var Rc=(()=>{class s{constructor(){this.Ya=1}getCurrentIndex(){return this.Ya}increment(){this.Ya+=1}reset(){this.Ya=1}getRequestParameters(){return{ri:`${this.Ya}`}}}return s})(),mv=3,yv=8,Ev=(()=>{class s{constructor(t,e=yh,i=mv){this.VA=t,this.yg=e,this.Gh=i,this.Xa={}}addEvent(t){this.Eg().addEvent(t)}addEventByTimestamp(t){this.Eg().addEventByTimestamp(t)}eventsCount(){return csArray.prototype.reduce.call(this.Bi(),(t,e)=>t+e.batch.eventsCount(),0)}isFull(){return csArray.prototype.some.call(this.Bi(),t=>t.batch.isFull())}isThresholdReached(){let t=this.Bi();return t.length>=this.Gh||csArray.prototype.some.call(t,e=>e.batch.isThresholdReached())}getEvents(){return csArray.prototype.reduce.call(this.getOrderedBatchSlots(),(t,e)=>csArray.prototype.concat.call(t,e.batch.getEvents()),[])}extractEvents(...t){return csArray.prototype.reduce.call(this.getOrderedBatchSlots(),(e,i)=>csArray.prototype.concat.call(e,i.batch.extractEvents(...t)),[])}stringifyEvents(){return Ds(this.getEvents())}clearEvents(){csArray.prototype.forEach.call(this.Bi(),t=>t.batch.clearEvents())}clearEmptyBatchSlots(){let t=this.getOrderedBatchSlots();for(let e=0;e<t.length-1;e++)t[e].batch.eventsCount()===0&&delete this.Xa[t[e].metadata.pageNumber]}Bi(){return gv(this.Xa)}getOrderedBatchSlots(){return csArray.prototype.sort.call(this.Bi(),vv)}vg(){let t=this.VA();if(t<=0)return{batch:new bc(this.yg),metadata:{pageNumber:0,requestIndex:new Rc}};let e=this.Xa[t];if(e)return e;let i={batch:new bc(this.yg),metadata:{pageNumber:t,requestIndex:new Rc}};return this.Xa[t]=i,this.Bi().length>Math.max(this.Gh,yv)&&B.warn(`RecordingBatchGroup: max number of slots overflowed(${this.Bi().length}/${this.Gh})`),i}Eg(){return this.vg().batch}getCurrentRequestIndex(){return this.vg().metadata.requestIndex}}return s})();function vv(s,r){return s.metadata.pageNumber-r.metadata.pageNumber}function qt(s,r=0){let t=Math.pow(10,r);return Math.round(s*t)/t}var Sv=(()=>{class s{constructor(t,e){this.xt=t,this.D=e,this.fi=[{boundElement:window,type:"hashchange",listener:()=>this.hashChangeListener()},{boundElement:document,type:"visibilitychange",listener:()=>this.visibilityChangeListener()}]}onEvent(t){this.j=t}start(){this.Fi(),this.triggerInitialEvents()}stop(){this.$i()}Fi(){csArray.prototype.forEach.call(this.fi,t=>yt(t))}$i(){csArray.prototype.forEach.call(this.fi,t=>Et(t))}triggerInitialEvents(){this.hashChangeListener()}hashChangeListener(){let t={type:L.HASH_CHANGE,args:[this.D.anonymizePII(this.xt.href)],date:k.now()};this.j(t)}visibilityChangeListener(){let t={type:L.VISIBILITY_CHANGE,args:[document.visibilityState],date:k.now()};this.j(t)}}return F([N("hashChange")],s.prototype,"hashChangeListener",null),F([N("visibilityChange")],s.prototype,"visibilityChangeListener",null),s})(),Ks=(()=>{let s;return function(r){r[r.COPY=0]="COPY",r[r.CUT=1]="CUT",r[r.PASTE=2]="PASTE"}(s||(s={})),s})(),X=(()=>{let s;return function(r){r[r.SPACE=0]="SPACE",r[r.ENTER=1]="ENTER",r[r.BACKSPACE=2]="BACKSPACE",r[r.DELETE=3]="DELETE",r[r.ARROWUP=4]="ARROWUP",r[r.ARROWDOWN=5]="ARROWDOWN",r[r.ARROWLEFT=6]="ARROWLEFT",r[r.ARROWRIGHT=7]="ARROWRIGHT",r[r.CAPSLOCK=8]="CAPSLOCK",r[r.SHIFT=9]="SHIFT",r[r.TAB=10]="TAB",r[r.ALPHANUMERICAL=11]="ALPHANUMERICAL",r[r.ESCAPE=12]="ESCAPE",r[r.END=13]="END",r[r.ALT=14]="ALT",r[r.CTRL=15]="CTRL",r[r.META=16]="META"}(s||(s={})),s})();function _v(s){if(!I(s))return null;let t=/iP(ad|hone|od).+Version\/(\d+)\..*Safari/i.exec(s);return t?Number(t[2]):null}var Cc="data-cs-scroll-container";function wv(s){try{if(vt(csEventtarget.apply(s)))return!0}catch(r){}return!1}var Js=(()=>{let s;return function(r){function t(i){return!!(vt(i)&&wv(i)&&fs(csEventtarget.apply(i))&&csEventtarget.apply(i).getAttribute(Cc)!==null)}r.isEventOnScrollContainer=t;function e(){return window.csquerySelector[document.nodeType].call(document,`[${Cc}]`)}r.getScrollContainer=e}(s||(s={})),s})(),Av=33,Tv=(()=>{class s{constructor(){this.eventType="user",this.Wh=[],this.GA=[{type:"pointerup",listener:e=>this.pointerUpListener(e),boundElement:document},{type:"pointermove",listener:e=>this.pointerMoveListener(e),boundElement:document},{type:"pointerdown",listener:e=>this.pointerDownListener(e),boundElement:document}],this.qA=[{type:"touchstart",listener:e=>this.touchStartListener(e),boundElement:document},{type:"touchmove",listener:e=>this.touchMoveListener(e),boundElement:document},{type:"touchend",listener:e=>this.touchEndCancelListener(e),boundElement:document},{type:"touchcancel",listener:e=>this.touchEndCancelListener(e),boundElement:document}],this.Ja=[{type:"click",listener:e=>this.clickListener(e),boundElement:document},{type:"keyup",listener:e=>this.keyUpListener(e),boundElement:document},{type:"keydown",listener:e=>this.keyDownListener(e),boundElement:document},{type:"copy",listener:e=>this.copyListener(e),boundElement:document},{type:"cut",listener:e=>this.cutListener(e),boundElement:document},{type:"paste",listener:e=>this.pasteListener(e),boundElement:document},{type:"scroll",listener:e=>this.scrollListener(csEventtarget.apply(e)),boundElement:document},{type:"mouseover",listener:e=>this.mouseOverListener(e),boundElement:document}],this.Yh=[{type:"scroll",listener:e=>this.scrollListener(csEventtarget.apply(e))}];let t=_v(window.navigator.userAgent);(t===null||t&&t>=16)&&csArray.prototype.push.call(this.Yh,{type:"mouseover",listener:e=>this.mouseOverListener(e)}),this.fe=new ai((e,i)=>{switch(i){case"initial":case"added":this.Fi(e);break;case"removed":this.$i(e);break}})}init(){this.WA(),this.YA(),this.Xh()}onEvent(t){csArray.prototype.push.call(this.Wh,t)}ae(t,e=!1){csArray.prototype.forEach.call(this.Wh,i=>i(t,e))}start(){this.ph(),this.Fi(document),this.fe.observe()}stop(){this.$i(document),this.fe.disconnect(),this.Wh=[]}YA(){this.KA()&&csArray.prototype.push.call(this.Ja,...this.GA)}WA(){this.JA()&&csArray.prototype.push.call(this.Ja,...this.qA)}Fi(t){Ir(t)?csArray.prototype.forEach.call(this.Ja,e=>yt(e)):csArray.prototype.forEach.call(this.Yh,e=>{let i={type:e.type,listener:e.listener,boundElement:t};yt(i)})}$i(t){Ir(t)?csArray.prototype.forEach.call(this.Ja,e=>Et(e)):csArray.prototype.forEach.call(this.Yh,e=>{let i={type:e.type,listener:e.listener,boundElement:t};Et(i)})}KA(){return"PointerEvent"in window&&typeof window.PointerEvent=="function"}JA(){return"TouchEvent"in window&&typeof window.TouchEvent=="function"}ph(){this.QA()}QA(){let t=Js.getScrollContainer()||document,e=W(t),i=this.Sg(t);if(i.top!==0||i.left!==0){let n={type:L.SCROLL,args:[e,i.left,i.top],date:k.now()};this.ae(n,!0)}}Sg(t){return t===document?{top:window.pageYOffset,left:window.pageXOffset}:{top:t.scrollTop,left:t.scrollLeft}}scrollListener(t){if(D.isMaskedElement(t)||D.isMaskedElementChild(t))return;let e=W(t),i=this.Sg(t),n={type:L.SCROLL,args:[e,i.left,i.top],date:k.now()};this.ae(n)}mouseOverListener(t){if(D.isMaskedElementChild(t.target))return;let e=W(t.target),i={type:L.MOUSE_OVER,args:[e],date:k.now()};this.ae(i)}clickListener(t){let e=Pt(t);if(D.isMaskedElementChild(e))return;let i=W(e),n={type:L.CLICK,args:[i],date:k.now()};this.ae(n)}keyUpListener(t){let e=Pt(t);if(D.isMaskedElementChild(e))return;let i=W(e),n=this.F[t.key];if(n===void 0)return;let o={type:L.KEY_UP,args:[i,n],date:k.now()};this.ae(o)}keyDownListener(t){let e=Pt(t);if(D.isMaskedElementChild(e))return;let i=W(e),n=this.F[t.key];if(n===void 0)return;let o={type:L.KEY_DOWN,args:[i,n],date:k.now()};this.ae(o)}copyListener(t){let e=Pt(t);if(D.isMaskedElementChild(e))return;let i=W(e),n={type:L.CLIPBOARD_COMMAND,args:[i,Ks.COPY],date:k.now()};this.ae(n)}cutListener(t){let e=Pt(t);if(D.isMaskedElementChild(e))return;let i=W(e),n={type:L.CLIPBOARD_COMMAND,args:[i,Ks.CUT],date:k.now()};this.ae(n)}pasteListener(t){let e=Pt(t);if(D.isMaskedElementChild(e))return;let i=W(e),n={type:L.CLIPBOARD_COMMAND,args:[i,Ks.PASTE],date:k.now()};this.ae(n)}pointerUpListener(t){let e=Pt(t);if(D.isMaskedElementChild(e))return;let i=W(e),n={type:L.POINTER_UP,args:[t.pointerId,t.pointerType,qt(t.clientX,1),qt(t.clientY,1),i,t.button],date:k.now()};this.ae(n)}pointerMoveListener(t){let e={type:L.POINTER_MOVE,args:[t.pointerId,t.pointerType,qt(t.clientX,1),qt(t.clientY,1)],date:k.now()};this.ae(e)}pointerDownListener(t){let e=Pt(t);if(D.isMaskedElementChild(e))return;let i=W(e),n={type:L.POINTER_DOWN,args:[t.pointerId,t.pointerType,qt(t.clientX,1),qt(t.clientY,1),i,t.button,{pageX:qt(t.pageX,1),pageY:qt(t.pageY,1)}],date:k.now()};this.ae(n)}touchStartListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let n=e[i],o={type:L.TOUCH_START,args:[n.identifier,qt(n.clientX,1),qt(n.clientY,1)],date:k.now()};this.ae(o)}}touchMoveListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let n=e[i],o={type:L.TOUCH_MOVE,args:[n.identifier,qt(n.clientX,1),qt(n.clientY,1)],date:k.now()};this.ae(o)}}touchEndCancelListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let n=e[i],o={type:t.type==="touchend"?L.TOUCH_END:L.TOUCH_CANCEL,args:[n.identifier,qt(n.clientX,1),qt(n.clientY,1)],date:k.now()};this.ae(o)}}Xh(){this.F={},this.F[" "]=X.SPACE,this.F.Spacebar=X.SPACE,this.F.Backspace=X.BACKSPACE,this.F.Enter=X.ENTER,this.F.Delete=X.DELETE,this.F.ArrowUp=X.ARROWUP,this.F.ArrowDown=X.ARROWDOWN,this.F.ArrowLeft=X.ARROWLEFT,this.F.ArrowRight=X.ARROWRIGHT,this.F.Up=X.ARROWUP,this.F.Down=X.ARROWDOWN,this.F.Left=X.ARROWLEFT,this.F.Right=X.ARROWRIGHT,this.F.CapsLock=X.CAPSLOCK,this.F.Shift=X.SHIFT,this.F.Tab=X.TAB,this.F.Escape=X.ESCAPE,this.F.Esc=X.ESCAPE,this.F.End=X.END,this.F.Alt=X.ALT,this.F.Control=X.CTRL,this.F.Meta=X.META}}return F([Nt("RecordingPageEvents.start")],s.prototype,"start",null),F([N("scroll")],s.prototype,"scrollListener",null),F([N("mouseOver"),ft(),Bp()],s.prototype,"mouseOverListener",null),F([N("click"),ft()],s.prototype,"clickListener",null),F([N("Event handler type: keyup")],s.prototype,"keyUpListener",null),F([N("Event handler type: keydown")],s.prototype,"keyDownListener",null),F([N("Event handler type: copy")],s.prototype,"copyListener",null),F([N("Event handler type: cut")],s.prototype,"cutListener",null),F([N("Event handler type: paste")],s.prototype,"pasteListener",null),F([N("Event handler type: pointerup"),ft()],s.prototype,"pointerUpListener",null),F([N("Event handler type: pointermove"),ft(),ji({wait:Av})],s.prototype,"pointerMoveListener",null),F([N("Event handler type: pointerdown"),ft()],s.prototype,"pointerDownListener",null),F([N("Event handler type: touchstart"),ft()],s.prototype,"touchStartListener",null),F([N("Event handler type: touchmove"),ft()],s.prototype,"touchMoveListener",null),F([N("Event handler type: touchend-cancel"),ft()],s.prototype,"touchEndCancelListener",null),s})(),bv=(()=>{class s{constructor(t={maskingEnabled:!0}){this.ZA=t}onScannedAsset(t){this.Qa=t}Za(){let t=window.location.href,e=csString.prototype.indexOf.call(t,"#");return e===-1?t:csString.prototype.substring.call(t,0,e)}scanCssString(t){this.Kh(Ri(t))}scanElement(t,e){this.ZA.maskingEnabled&&(D.getMaskedElementDetails(t).state!==D.MaskedElementState.NotMasked||e&&D.isMaskedAttribute(t,e))||(xr(t)?this.tT(t):Po(t)?this.eT(t,e):(this.sT(t,e),this.iT(t,e),this.rT(t,e)))}eT(t,e){var i;if((!e||e==="href")&&t.href){let o={assetId:((i=t.sheet)===null||i===void 0?void 0:i.href)||t.href,assetBasePath:this.Za(),assetRawPath:Kl(t)};this.Qa({type:"stylesheet",asset:o})}}tT(t){var e;let i=new Set;if(t.textContent)for(let o of Ri(t.textContent))i.add(o);let n;try{n=(e=t.sheet)===null||e===void 0?void 0:e.cssRules}catch(o){o.name==="SecurityError"||o.name==="InvalidAccessError"||B.error(o.message)}if(n)for(let o=0;o<n.length;o++){let c=n.item(o).cssText;for(let l of Ri(c))i.add(l)}this.Kh(gs(i))}Jh(t){return!this.nT(t)&&!re(t)&&!zf(t)}sT(t,e){if(kd(t)||Dd(t)){if(!e||e==="src"){let i=t.getAttribute("src");if(i&&this.Jh(i)){let n={assetId:t.src,assetRawPath:i,assetBasePath:this.Za()};this.Qa({type:"asset",asset:n})}}(!e||e==="srcset")&&t.srcset&&this.oT(t.srcset)}}iT(t,e){if(csNodenodeType.apply(t)!==1){ht.warn(`StaticResourceUrlTracker: Wrong element nodeType: ${t==null?void 0:t.nodeName}/${csNodenodeType.apply(t)}`);return}if(t.hasAttribute&&(!e||e==="style")&&t.hasAttribute("style")){let i=t.getAttribute("style");if(typeof i=="string")this.scanCssString(i);else throw new Error("Unexpected style: "+t.outerHTML)}}oT(t){this.Kh(Zo(t))}rT(t,e){if((Ud(t)||jd(t)||Hd(t))&&(!e||e==="href"||e==="xlink:href")){let i=t.getAttribute("href")||t.getAttribute("xlink:href");if(i&&this.Jh(i)){let n={assetId:De(i),assetRawPath:i,assetBasePath:this.Za()};this.Qa({type:"asset",asset:n})}}}Kh(t){return csArray.prototype.forEach.call(csArray.prototype.map.call(csArray.prototype.filter.call(t,e=>this.Jh(e)),e=>({rawUrl:e,absoluteUrl:De(e)})),e=>{let i={assetId:e.absoluteUrl,assetBasePath:this.Za(),assetRawPath:e.rawUrl};this.Qa({type:"asset",asset:i})})}nT(t){return/^https:\/\/\w+:\w+@/.test(t)}}return s})(),Rv=30,Cv=0,Eh=(()=>{class s{constructor(t,e=Rv,i=Cv){this.aT=t,this.cT=e,this.lT=i,this.Qe=new Li,this.ze=!1,this.Qh=0,this._g=()=>{for(this.Qh=0;this.Qe.length;){if(this.Qh>=this.cT){csSetTimeout(this._g,this.lT);return}let n=k.elapsed(),o=this.Qe.pop();if(!o)break;this.runTask(o);let c=k.elapsed()-n;this.Qh+=c}this.ze=!1}}schedule(t,e=!1){if(!this.aT||e){t();return}_t.general.pendingTasks.increase(),this.Qe.push(t),this.hT()}hT(){this.ze||(this.ze=!0,csSetTimeout(()=>{this._g()}))}runTask(t){_t.general.pendingTasks.decrease(),t()}runPendingTasks(){this.Qe.forEach(t=>{this.runTask(t)}),this.Qe.clear()}clearQueue(){_t.general.pendingTasks.clear(),_t.mutations.pendingMutations.clear(),this.Qe.clear()}isEmpty(){return this.Qe.length===0}}return F([N("TaskScheduler"),Nt("runTask")],s.prototype,"runTask",null),F([Nt("runPendingTasks")],s.prototype,"runPendingTasks",null),s})(),Iv=(()=>{class s{constructor(){this.Y=!1,this.wg=new Jo(t=>t.type==="cssRuleInserted"&&this.uT(t)),this.dT=Fr(t=>{this.Y&&t.length>0&&this.O.schedule(()=>J(t,e=>this.io.scanElement(e)))}),this.fT=({type:t,asset:e})=>{var i,n,o;t==="stylesheet"&&((i=this.pT)===null||i===void 0||i.call(this,e)),(n=this.gT)===null||n===void 0||n.call(this,e);let c={date:k.now(),type:L.STATIC_RESOURCE_URL,args:[e.assetId]};(o=this.j)===null||o===void 0||o.call(this,c)},this.O=new Eh(!0,30,0),this.Un=new ah(t=>this.mT(t)),this.U=new Te(t=>this.wr(t)),this.io=new bv,this.io.onScannedAsset(this.fT)}onEvent(t){this.j=t}onAsset(t){this.gT=t}onStyleSheetFound(t){this.pT=t}start(){this.Y||(this.Y=!0,this.wg.observe(),this.Un.observe(),this.U.observe())}stop(){this.Y&&(this.wg.disconnect(),this.Un.disconnect(),this.U.disconnect(),this.Y=!1)}uT(t){!t.rule||!this.Y||this.io.scanCssString(t.rule)}mT(t){this.Y&&D.getMaskedElementDetails(t).state===D.MaskedElementState.NotMasked&&this.dT.push(t)}wr(t){csSetTimeout(()=>{for(let e of t)switch(e.type){case"attributes":this.io.scanElement(e.target,e.attributeName);break;case"characterData":this.yT(e.target);break;case"childList":}})}yT(t){Cr(t)&&csNodeparentNode.apply(t)&&xr(csNodeparentNode.apply(t))&&this.io.scanCssString(t.data)}}return s})(),Pv="csPersisted",Ic="v2/recording",Ov=["isRecording"],vh=["replay:resourceManager:enableForOnlineResource:nextPageviewOnly","cssrm:onlineAssets:activateForNextPageview"],Nv=["replay:resourceManager:getStatus","cssrm:getStatus"],Mv=(()=>{class s{constructor(t,e,i,n,o,c,l,h,d,p,y,m,v,b,C,_,T,x,O,w,H,$){this.Ei=t,this.R=e,this.E=i,this.Ve=n,this.S=o,this.D=c,this.V=l,this.Ee=h,this.ye=d,this._t=p,this.Be=y,this.Rt=m,this.w=v,this.vi=b,this.Ag=C,this.qt=_,this.ce=T,this.Z=x,this.Kn=O,this.it=w,this.wO=H,this.ht=$}init(){var t,e,i;let n=[],o=[];csArray.prototype.push.call(o,new xy),this.ro=new Yy(this.it.shouldUseAnonymization(),this.E.whitelistedAttributes,this.D,this.E.anonymizeDigits),this.zi();let c=new $E(Pv);this.ET(c),this.z=new Ev(()=>{var w;return((w=this.R.getSession())===null||w===void 0?void 0:w.pageNumber)||0});let l=new Iv;csArray.prototype.push.call(n,l),this.E.useStaticResourceManager&&no.isSupported()&&(this.Zt=new no,this.Me=new GE,this.Tg=new fv(this.Me,this.E.getStaticResourceManagerUri(),this.Ve),this.Ag.addListener(this.Tg),csArray.prototype.push.call(o,this.Zt));let h=new Ni(this.Ve,{getRequestParameters:()=>({let:this.recordingService.getRecordingLastEventTimestamp()})},{getRequestParameters:()=>({rst:this.recordingService.getRecordingStartTimestamp()})},{getRequestParameters:()=>({rt:csArray.prototype.join.call(this.R.getRecordingTypes(),",")})}),d=new ph(`${this.E.getRecordingUri()}/${Ic}`);csArray.prototype.push.call(o,this.ro),csArray.prototype.push.call(o,new hE(this.Z)),csArray.prototype.push.call(o,new dE),this.Gi=new Tv,this.Gi.init(),csArray.prototype.push.call(n,this.Gi),this.Vt=new hv(c,d,this.X),csArray.prototype.push.call(n,new Sv(window.location,this.D));let p=!1,y=p?new fE:new ky,m=p?null:new mE,v=p?null:new EE,b=p?null:new _E(this.ht,(e=this.E.experimental)===null||e===void 0?void 0:e.trackedCustomInputProperties),C=p?null:new AE,_=csArray.prototype.filter.call([m,this.Ee,y,new ov(csArray.prototype.filter.call(n,w=>w)),C,new TE,new DE,b,v],Boolean);this.E.jsErrorsEnabled&&(this.za=new kE,this.ST=new xE(w=>this.ye.anonymize(w)),this.gs=new nv(this.za),csArray.prototype.push.call(_,this.za),csArray.prototype.push.call(o,this.ST));let T=new jE(_,o),x=new rv(T,this.w,this.Me,this.gs,this.Ds),O=csArray.prototype.filter.call([y,m,v,b,C],Boolean);this.recordingService=new lv(this.E,this.z,h,this.V,this.R,this.ye,this._t,this.Be,this.ht,this.X,this.Vt,d,x,n,O,this.Zt,this.Kn,this.gs,this.Ds),this.vi.addListener(this.recordingService),this.Ag.addListener(this.recordingService),this.recordingService.init(),this.S.register(Ov,()=>this.R.isReplayRecorded()&&!this.qt.isUrlExcludedForSessionReplay()),this.S.register(vh,()=>{this.recordingService.activateOnlineAssetsOnNextPageview(),this.w.emitRecordingContextChange()}),this.S.register(Nv,()=>this.recordingService.getStaticResourceManagerStatus()),this.no=new zE(this.w,this.R),this.vi.addListener(this.no),this.Ei.enableRecordingContext(this.recordingService,this.R,this.no),this.Zh()}onAfterNaturalPageView(){var t;this.qt.isUrlExcludedForSessionReplay()?this.recordingService.resetOnlineAssetsOnPageview():this.recordingService.updateOnlineAssetsOnPageview(),(t=this.Tg)===null||t===void 0||t.initState()}onStartTracking(){this.Vt.recover(),this.zi(),this.R.isReplayRecorded()&&!this.qt.isUrlExcludedForSessionReplay()&&(this.R.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.tc())}onArtificialPageViewEnd(){this.R.isReplayRecorded()&&!this.qt.isUrlExcludedForSessionReplay()&&!this.R.isTemporarilyRecorded()&&this.Vt.sendLastMessageBeacon(),this.recordingService.clearStates(),this.oo()}onAfterArtificialPageView(){this.zi(),this.R.isReplayRecorded()&&!this.qt.isUrlExcludedForSessionReplay()?(this.R.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.recordingService.updateOnlineAssetsOnPageview(),this.tc()):this.recordingService.resetOnlineAssetsOnPageview()}onBeforeSessionRenewal(){this.recordingService.clearStates(),this.oo()}onOptout(){this.oo(),this.recordingService.onOptOut()}onReplayUnanonymizationConsentGranted(){this.zi(),this.recordingService.triggerUnanonymizationConsentGranted(),this.w.emitRecordingContextChange()}onReplayUnanonymizationConsentWithdrawn(){this.zi(),this.recordingService.triggerUnanonymizationConsentWithdrawn(),this.w.emitRecordingContextChange()}onCollectStateChange(t,e){t===M.QUOTA_REACHED||t===M.ANALYTICS_ONLY&&e===oe.ETR_OFF?(this.recordingService.clearEvents(),this.oo()):(this.X.setQueryParams({rt:csArray.prototype.join.call(this.R.getRecordingTypes(),",")}),this.recordingService.allowSendingEventsFromQuotaService(),this.recordingService.pushEvents(),this.no.onCollectStateChange(t,e))}onTargetingRulesMatched(){this.R.isReplayRecorded()&&!this.qt.isUrlExcludedForSessionReplay()&&!this.recordingService.isRecording()&&this.tc()}onInitialDomStart(){this.recordingService.blockSendingEventsFromSerialization(),this.Vt.blockSendingLastMessage()}onInitialDomDone(t){this.recordingService.allowSendingEventsFromSerialization(),this.recordingService.addInitialDom(t),this.Vt.allowSendingLastMessage(),this.Gi.start(),this.recordingService.pushEvents()}onAfterReplayRecordingConsentGranted(){this.R.isReplayRecorded()&&!this.qt.isUrlExcludedForSessionReplay()&&(this.R.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.tc(),this.recordingService.triggerRecordingForSessionGranted())}onAfterReplayRecordingConsentWithdrawn(){this.recordingService.isRecording()&&(this.recordingService.triggerRecordingForSessionWithdrawn(),this.recordingService.clearStates(),this.oo())}Zh(){var t,e,i,n,o,c;if(!((i=(e=(t=this.E.experimental)===null||t===void 0?void 0:t.sessionReplay)===null||e===void 0?void 0:e.shadowRoot)===null||i===void 0)&&i.filterByHostSelector){let l=(c=(o=(n=this.E.experimental)===null||n===void 0?void 0:n.sessionReplay)===null||o===void 0?void 0:o.shadowRoot)===null||c===void 0?void 0:c.filterByHostSelector;J(l,h=>{Ut(h)&&Te.setShadowRootFilter(d=>{try{return Zt.call(d.host,h)}catch(p){return!1}})})}}tc(){this.recordingService.start(),this.Vt.start(),this.w.emitRecordingContextChange()}oo(){this.recordingService.stop(),this.Vt.stop(),this.w.emitRecordingContextChange()}ET(t){let e="byteArray";this.X=this.ce.create(`${this.E.getRecordingUri()}/${Ic}`,e,t)}zi(){var t;let e=this.it.shouldUseAnonymization();this.ro.setAnonymization(e),(t=this.vT)===null||t===void 0||t.setAnonymization(e)}}return F([Nt("Recording.onStartTracking")],s.prototype,"onStartTracking",null),F([Nt("onInitialDomDone")],s.prototype,"onInitialDomDone",null),s})(),Dv=(()=>{class s extends Tt{validateArgs(t){return!!K(t)}execute(){this.commandsService.applyFromImplementation(vh[0],[],"SrmOnlineAssetsTemplate")}}return s})(),kv=1024,xv=512,In=1024,Pn="||",Lv=(()=>{let s;return function(r){function t(c,l){return I(c)&&csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(c),os.CHAMELEON)!==-1?os.CHAMELEON:l}r.handleCustomEventCommandMisuse=t;function e(c,l,h){let d=i(h);return j({type:Y.CUSTOM_EVENT,ts:0,customEventName:Ot.truncate(c,kv,Ot.ELLIPSIS),sourceLibrary:Ap(l)?l:os.WEB},Hn(d)?{}:{properties:d})}r.buildCustomEvent=e;function i(c){let l={};for(let h in c){if(h.length>xv)continue;let d=c[h];if(At(d)||Ar(d))l[h]=csString(d);else if(o(d))l[h]=Ot.truncate(d,In,Ot.ELLIPSIS);else if(vd(d)){let p=n(d);p!==""&&(l[h]=p)}}return l}r.sanitizeCustomEventProperties=i;function n(c){let l="";for(let h=0;h<c.length;h++){let d=c[h];if(!At(d)&&!Ar(d)&&!o(d))continue;let p=csString(d);if(l==="")l=Ot.truncate(p,In,Ot.ELLIPSIS);else if(l.length+Pn.length+p.length<=In)l+=Pn+p;else break}return l}function o(c){return I(c)&&!Ao(c)&&!csString.prototype.includes.call(c,Pn)}}(s||(s={})),s})(),Ft=(()=>{class s{static buildFromCustomEvent(t,e){return this.bg(null,t,e)}static buildFromAnalysisEvent(t,e,i){return this.bg(t,e,i)}static bg(t,e,i){return csArray.prototype.reduce.call(i,(n,o)=>o.enhanceAnalysisEvent(t,n),e)}}return s})();var Vv=(()=>{class s extends zt{constructor(t,e,i,n,o,c,l,h,d,p,y,m,v,b,C,_,T,x,O,w,H){super(),this.E=t,this.Si=e,this.Bt=i,this.Nr=n,this.tu=o,this.Ze=c,this.De=l,this.eu=h,this.V=d,this.oe=p,this.su=y,this.Ke=m,this.X=v,this.Ft=b,this.sc=C,this.xs=_,this.Ls=T,this.iu=x,this.qi=O,this.Wi=w,this.Yi=H,this.yi=new gh,this.ic=!1,this.Xi=[]}init(){var t,e,i,n,o,c,l;this.Si.onEvent(h=>this.Ut(h)),this.Bt.onEvent(h=>this.Ut(h)),this.Nr.onEvent(()=>{let h=this.Nr.getRequestParameters();this.X.setQueryParams(h),this.De.setQueryParams(h)}),this.su.onEvent(h=>this.ve(h)),this.ru(),(t=this.sc)===null||t===void 0||t.onEvent(h=>this.Ut(h)),(e=this.qi)===null||e===void 0||e.onEvent(h=>this.Ut(h)),(i=this.xs)===null||i===void 0||i.onEvent(h=>this.Ut(h)),(n=this.Ls)===null||n===void 0||n.onEvent(h=>this.Ut(h)),this._T(),(o=this.iu)===null||o===void 0||o.onEvent(h=>this.ve(h)),(c=this.Wi)===null||c===void 0||c.onEvent(h=>this.ve(h)),(l=this.Yi)===null||l===void 0||l.onEvent(h=>this.ve(h))}_T(){this.De.onBeaconSuccess(()=>{this.Ze.clearEvents()}),this.De.onBeaconFailure(t=>{this.wT(t)})}initStates(){let t=this.eu.getRequestParameters(),e=this.tu.getRequestParameters(),i=this.Nr.getRequestParameters();this.X.setQueryParams(t),this.X.setQueryParams(e),this.X.setQueryParams(i),this.De.setQueryParams(t),this.De.setQueryParams(e),this.De.setQueryParams(i),this.nu()}clearStates(t){var e,i;this.Si.flushPendingDebouncedListeners(),(e=this.xs)===null||e===void 0||e.flushPendingKeyboardNavigationEvent(),(i=this.Ls)===null||i===void 0||i.flushPendingTextHighlightEvent(),t?(this.ou(),this.sendLastMessageBeacon()):this.sendEvents(),this.Nr.reset(),this.X.removeQueryParams()}onStart(t){var e,i,n,o,c,l,h;t||(e=this.iu)===null||e===void 0||e.start(),this.Ke.start(),this.Si.start(),this.Nr.start(),this.Bt.start(),(i=this.sc)===null||i===void 0||i.start(),(n=this.Ls)===null||n===void 0||n.start(),t||this.su.start(),(o=this.xs)===null||o===void 0||o.start(),(c=this.qi)===null||c===void 0||c.start(),(l=this.Wi)===null||l===void 0||l.start(),(h=this.Yi)===null||h===void 0||h.start(),csArray.prototype.forEach.call(this.Xi,d=>{this.ve(d)}),this.Xi=[]}collectInitialEvents(){var t;(t=this.sc)===null||t===void 0||t.collectInitialEvents()}onIframeAnalysisBrowserEvent(t){this.ve(t)}onIframeAnalysisUserEvent(t){this.Ut(t)}onExternalEvent(t){this.Q(t)}ve(t){this.isStarted&&this.V.isCurrentPageviewValid()&&this.Q(t)}Ut(t){this.isStarted&&(this.V.refreshSession(),this.V.isSessionValid()&&this.Q(t))}Q(t){this.Ze.addEvent(this.AT(t)),this.Ze.isFull()&&this.sendEvents(),this.E.emitDebugEvents&&this.yi.emit("analysisEvent",ct(j({},t),{typeName:Y[t.type]}))}AT(t){return t.ts=this.Ki(),t}ou(){this.De.setQueryParams({hlm:"true"}),this.ic=!0}sendLastMessageBeacon(){this.De.removeQueryParams(["i"]),this.De.setQueryParams(this.eu.getRequestParameters()),this.De.setQueryParams(this.tu.getRequestParameters()),this.De.send(this.Ze.stringifyEvents()),this.De.removeQueryParams(["hlm"]),this.ic=!1}sendEvents(){this.Ze.isEmpty()||(this.De.removeQueryParams(["i"]),this.X.setQueryParams(this.eu.getRequestParameters()),this.X.setQueryParams(this.tu.getRequestParameters()),this.X.send(this.Ze.getEvents()),this.Ze.clearEvents())}onStop(){var t,e,i,n,o,c,l;this.Ke.stop(),this.Si.stop(),this.Nr.stop(),this.Bt.stop(),this.su.stop(),(t=this.sc)===null||t===void 0||t.stop(),(e=this.xs)===null||e===void 0||e.stop(),(i=this.Ls)===null||i===void 0||i.stop(),(n=this.qi)===null||n===void 0||n.stop(),this.Ze.empty(),(o=this.iu)===null||o===void 0||o.stop(),(c=this.Wi)===null||c===void 0||c.stop(),(l=this.Yi)===null||l===void 0||l.stop()}nu(){this.ms=k.now()}Ki(){return k.now()-this.ms}ru(){this.Ke.onEvent(t=>{var e,i;t!==ne.Visible&&((e=this.xs)===null||e===void 0||e.flushPendingKeyboardNavigationEvent(),(i=this.Ls)===null||i===void 0||i.flushPendingTextHighlightEvent(),t===ne.PagehideVisible?this.ou():t===ne.PagehideHidden?(this.ou(),this.sendLastMessageBeacon()):(!this.Ze.isEmpty()||this.ic)&&this.sendLastMessageBeacon())})}wT(t){try{(!this.Ze.isEmpty()||this.ic)&&this.oe.save({requestParameters:t,events:this.Ze.getEvents()})}catch(e){}}pushCustomEvent(t,e,i){if(!(I(t)&&!Ao(t))||i!==void 0&&!K(i))throw new $t(yo[0]);let n=Lv.buildCustomEvent(t,e,i),o=Ft.buildFromCustomEvent(n,this.Ft);this.isStarted?this.ve(o):csArray.prototype.push.call(this.Xi,o)}}return s})(),Fi=(()=>{class s{isEventTypeSupported(t){return csArray.prototype.indexOf.call(this.supportedEventTypes,t)!==-1}enhanceAnalysisEvent(t,e){return this.isEventTypeSupported(e.type)?this.baseEnhanceAnalysisEvent(t,e):e}}return s})(),Uv=(()=>{class s extends Fi{constructor(){super(...arguments),this.supportedEventTypes=[Y.CHANGE],this.TT=["text","email","number","search","tel","url","password"]}baseEnhanceAnalysisEvent(t,e){let i=Pt(t);return Lr(i)&&csArray.prototype.indexOf.call(this.TT,i.type)>=0&&(e.isBlank=i.value===""),e}}return s})();var Jt=(()=>{let s;return function(r){r[r.ANONYMIZED=0]="ANONYMIZED",r[r.CAPTURED=1]="CAPTURED",r[r.MASKED=2]="MASKED",r[r.ENCRYPTED=3]="ENCRYPTED"}(s||(s={})),s})();var Sh=(()=>{class s extends Fi{constructor(t){super(),this.gt=t,this.supportedEventTypes=[Y.MOUSEDOWN,Y.MOUSEUP,Y.CLICK,Y.MOUSEOVER,Y.TAP,Y.DRAG,Y.FLICK,Y.SUBMIT,Y.CHANGE]}baseEnhanceAnalysisEvent(t,e){return e.tgt||(e.tgt=this.gt.getEventTargetPath(t)),e}}return s})(),Pc=65535,jv=(()=>{let s;return function(r){function t(e){let i=Pt(e);if(!i||!pt(i)||!Se(i.getBoundingClientRect)||!vt(e.pageX)||!vt(e.pageY))return{xRel:-1,yRel:-1,valid:!1};let n=i.getBoundingClientRect(),o=e.pageX-n.left-Ct.windowOffsetX(),c=e.pageY-n.top-Ct.windowOffsetY();i!==document.documentElement&&(o+=i.scrollLeft,c+=i.scrollTop);let l=Math.max(i.scrollWidth,n.width),h=Math.max(i.scrollHeight,n.height),d=Math.round(o/l*Pc),p=Math.round(c/h*Pc);return{xRel:d,yRel:p,valid:!0}}r.getRelativePosition=t}(s||(s={})),s})(),Hv=(()=>{class s extends Fi{constructor(t,e){super(),this.Ts=t,this.gt=e,this.supportedEventTypes=[Y.MOUSEMOVE,Y.CLICK],this.hu=""}baseEnhanceAnalysisEvent(t,e){let{valid:i,xRel:n,yRel:o}=jv.getRelativePosition(t);if(i){let c=this.gt.getEventTargetPath(t);c!==ls.INVALID_ELEMENT&&(e.xRel=n,e.yRel=o,e.type===Y.MOUSEMOVE&&(c!==this.hu||this.Ts.iframesTracking?(this.hu=c,e.tgtHM=c,this.Ts.isChild||(e.tgtHMH=bl(e.tgtHM))):e.tgtHM=""))}else e.type===Y.MOUSEMOVE&&(this.hu="");return e}}return s})(),_h=(()=>{class s extends Fi{constructor(t,e){super(),this.gt=t,this.$t=e,this.supportedEventTypes=[Y.CLICK,Y.SUBMIT,Y.CHANGE,Y.TAP]}baseEnhanceAnalysisEvent(t,e){let i=this.$t.getSensitiveStatus().useAnonymization,{path:n,hierarchy:o}=this.gt.getEventTargetPathAndHierarchy(t,i);return e.tgt=n,e.hrchy=o,e}}return s})(),Oc=100,wh=(()=>{class s extends Fi{constructor(t,e,i){super(),this.E=t,this.$t=e,this.D=i,this.supportedEventTypes=[Y.TAP,Y.CLICK,Y.SUBMIT]}UT(t){let e="",i=document.createTreeWalker(t,NodeFilter.SHOW_TEXT),n=i.nextNode();for(;n;){if(e+=n.textContent,No(n.parentElement)||Oo(n.parentElement)||this.$t.getElementSensitiveStatus(n.parentElement)!==Jt.CAPTURED)return!0;if(csString.prototype.trim.call(e).length>=Oc)break;n=i.nextNode()}return!1}jT(t){let e=ti(t,"button,a");return e||(this.E.collectTargetText===Xn.ButtonAndLinkOnly?null:t)}baseEnhanceAnalysisEvent(t,e){if(fs(csEventtarget.apply(t))){let i=this.jT(csEventtarget.apply(t));if(i&&I(i.textContent)&&!this.UT(i)&&!this.D.hasPII(i.textContent,this.E.anonymizeDigits)){let n=Ot.truncate(csString.prototype.trim.call(i.textContent),Oc);n.length>0&&(e.text=n)}}return e}}return s})();function Bv(s,r,t,e,i){let n=[];return csArray.prototype.push.call(n,new Hv(s,r)),s.isCollectTargetTextEnabled()&&csArray.prototype.push.call(n,new wh(s,t,new oi)),s.collectHierarchy&&csArray.prototype.push.call(n,new _h(r,t)),csArray.prototype.push.call(n,new Uv,new Sh(r)),n}function Fv(s,r,t,e,i){let n=[];return s.isCollectTargetTextEnabled()&&csArray.prototype.push.call(n,new wh(s,t,new oi)),s.collectHierarchy&&csArray.prototype.push.call(n,new _h(r,t)),csArray.prototype.push.call(n,new Sh(r)),n}var $v=(()=>{class s extends zt{constructor(t,e){super(),this.oe=t,this.X=e,this.Og=()=>{document.visibilityState==="visible"&&this.Ng()}}onStart(){this.Ng(),this.Lh()}onStop(){this.Vh()}getRecoveryStorage(){return this.oe}Ng(){let t=this.oe.recover();if(t!==null){let{requestParameters:e,events:i}=t;this.X.send(i,e)}}Lh(){document.addEventListener("visibilitychange",this.Og)}Vh(){document.removeEventListener("visibilitychange",this.Og)}}return s})(),zv=(()=>{class s{constructor(t){this.Ir=t}save(t){localStorage.setItem(this.Ir,csJSON.stringify(t))}clear(){localStorage.removeItem(this.Ir)}recover(){let t=localStorage.getItem(this.Ir);if(t===null)return null;let e=null;try{e=csJSON.parse(t)}catch(i){B.error(`Invalid item in localStorage.
         (key:${this.Ir}; value:${t})`)}finally{this.clear()}return e}}return s})(),Gv=50,qv=(()=>{class s{constructor(t=[]){this.Ht=t}stringifyEvents(){return csJSON.stringify(this.Ht)}addEvent(t){csArray.prototype.push.call(this.Ht,t)}eventsCount(){return this.Ht.length}clearEvents(){this.Ht=[]}empty(){this.clearEvents()}isFull(){return this.eventsCount()>=Gv}isEmpty(){return this.Ht.length===0}getEvents(){return this.Ht}}return s})(),Wv=(()=>{class s{constructor(t,e,i,n=["submit"]){this.Ft=t,this.gt=e,this.zt=i,this.HT=n,this.Mg="select, select *, input, textarea",this.BT="select, select *, input, textarea",this.Dg="a, a *, button, button *, select, select *, input, textarea",this.co="input, select, textarea",this.FT="form",this.oc=150,this.$T=400,this.kg=!1,this.lo=Ci((o,c)=>this.scrollListener(o,c),this.oc),this.xg=Ci(o=>this.resizeListener(o),this.oc),this.zT=jr(o=>this.mouseMoveListener(o),this.$T),this.GT=[{boundElement:window,type:"resize",listener:()=>this.xg()},{boundElement:document,type:"scroll",listener:o=>this.lo(o)},{boundElement:window,type:"mousemove",listener:o=>{this.zT(Hp(o))}},{boundElement:document,type:"mousedown",listener:o=>this.mouseDownListener(o)},{boundElement:document,type:"mouseup",listener:o=>this.mouseUpListener(o)},{boundElement:document,type:"click",listener:o=>this.clickListener(o)}],this.Lg=[{type:"change",listener:this.zt.on(this.BT,o=>this.changeListener(o))},{type:"submit",listener:this.zt.on(this.FT,o=>this.submitListener(o))}],this.qT=[{boundElement:document,type:"mouseover",listener:this.zt.on(this.Dg,o=>this.mouseOverListener(o))},{boundElement:document,type:"mouseout",listener:this.zt.on(this.Dg,o=>this.mouseOutListener(o))},{boundElement:document,type:"focusin",listener:this.zt.on(this.Mg,o=>this.focusInListener(o))},{boundElement:document,type:"focusout",listener:this.zt.on(this.Mg,o=>this.focusOutListener(o))},{boundElement:document,type:"keyup",listener:this.zt.on(this.co,o=>this.keyUpListener(o))},{boundElement:document,type:"keydown",listener:this.zt.on(this.co,o=>this.keyDownListener(o))},{boundElement:document,type:"copy",listener:this.zt.on(this.co,o=>this.copyListener(o))},{boundElement:document,type:"cut",listener:this.zt.on(this.co,o=>this.cutListener(o))},{boundElement:document,type:"paste",listener:this.zt.on(this.co,o=>this.pasteListener(o))},...csArray.prototype.map.call(this.Lg,o=>ct(j({},o),{boundElement:document}))],this.F={},this.Gl=(o,c)=>{switch(c){case"initial":case"added":this.Fi(o);break;case"removed":this.$i(o);break}},this.fe=new ai(this.Gl),this.Xh()}Fi(t){if(Ir(t)){let e=this.Vg();csArray.prototype.forEach.call(e,i=>yt(i))}else{let e=this.Ug();csArray.prototype.forEach.call(e,i=>{yt(ct(j({},i),{boundElement:t}))})}}$i(t){if(Ir(t)){let e=this.Vg();csArray.prototype.forEach.call(e,i=>Et(i))}else{let e=this.Ug();csArray.prototype.forEach.call(e,i=>{Et(ct(j({},i),{boundElement:t}))})}}onEvent(t){this.j=t}start(){this.fe.observe(),this.Fi(document),this.resizeListener()}stop(){this.$i(document),this.fe.disconnect()}flushPendingDebouncedListeners(){this.lo.flushPending(),this.xg.flushPending()}jg(t){return csArray.prototype.some.call(this.HT,e=>e===t)}Ug(){return this.zt.isMatchesSelectorSupported()?csArray.prototype.filter.call(this.Lg,t=>!this.jg(t.type)):(B.warn("Element.matches is not implemented yet"),[])}Vg(){let t=[];return csArray.prototype.push.call(t,...this.GT),this.zt.isMatchesSelectorSupported()?csArray.prototype.push.call(t,...this.qT):B.warn("Element.matches is not implemented yet"),csArray.prototype.filter.call(t,e=>!this.jg(e.type))}resizeListener(t){let e=Js.getScrollContainer(),i=fs(e);i&&(this.kg=!0);let n={type:Y.RESIZE,ts:0,x:i?e.clientWidth:Ct.windowWidth(),y:i?e.clientHeight:Ct.windowHeight()};t!==void 0&&(n.d=t),this.j(n)}scrollListener(t,e){let i=Js.isEventOnScrollContainer(e);!this.kg&&i&&this.resizeListener();let n={type:Y.SCROLL,ts:0,x:i?csEventtarget.apply(e).scrollLeft:Ct.windowOffsetX(),y:i?csEventtarget.apply(e).scrollTop:Ct.windowOffsetY(),d:t},o=Ft.buildFromAnalysisEvent(e,n,this.Ft);this.j(o)}mouseMoveListener(t){let e={type:Y.MOUSEMOVE,ts:0,x:t.pageX,y:t.pageY},i=Ft.buildFromAnalysisEvent(t,e,this.Ft);this.j(i)}mouseDownListener(t){let e={type:Y.MOUSEDOWN,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Ft.buildFromAnalysisEvent(t,e,this.Ft);this.Se(i)}mouseUpListener(t){let e={type:Y.MOUSEUP,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Ft.buildFromAnalysisEvent(t,e,this.Ft);this.Se(i)}clickListener(t){let e={type:Y.CLICK,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Ft.buildFromAnalysisEvent(t,e,this.Ft);this.Se(i)}mouseOverListener(t){let e={type:Y.MOUSEOVER,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Ft.buildFromAnalysisEvent(t,e,this.Ft);this.Se(i)}mouseOutListener(t){let e={type:Y.MOUSEOUT,ts:0,x:t.pageX,y:t.pageY,tgt:this.gt.getEventTargetPath(t)},i=Ft.buildFromAnalysisEvent(t,e,this.Ft);this.Se(i)}focusInListener(t){let e={type:Y.FOCUSIN,ts:0,tgt:this.gt.getEventTargetPath(t)},i=Ft.buildFromAnalysisEvent(t,e,this.Ft);this.Se(i)}focusOutListener(t){let e={type:Y.FOCUSOUT,ts:0,tgt:this.gt.getEventTargetPath(t)},i=Ft.buildFromAnalysisEvent(t,e,this.Ft);this.Se(i)}changeListener(t){let e={type:Y.CHANGE,ts:0,tgt:""},i=Ft.buildFromAnalysisEvent(t,e,this.Ft);this.Se(i)}submitListener(t){let e={type:Y.SUBMIT,ts:0,tgt:""},i=Ft.buildFromAnalysisEvent(t,e,this.Ft);this.Se(i)}copyListener(t){let e={type:Y.COMMAND,ts:0,tgt:this.gt.getEventTargetPath(t),key:Ks.COPY};this.Se(e)}cutListener(t){let e={type:Y.COMMAND,ts:0,tgt:this.gt.getEventTargetPath(t),key:Ks.CUT};this.Se(e)}pasteListener(t){let e={type:Y.COMMAND,ts:0,tgt:this.gt.getEventTargetPath(t),key:Ks.PASTE};this.Se(e)}keyUpListener(t){let e={type:Y.KEYUP,ts:0,tgt:this.gt.getEventTargetPath(t),key:this.Hg(t)};this.Se(e)}keyDownListener(t){let e={type:Y.KEYDOWN,ts:0,tgt:this.gt.getEventTargetPath(t),key:this.Hg(t)};this.Se(e)}Hg(t){let e=this.F[t.key];return e===void 0?X.ALPHANUMERICAL:e}Se(t){Tl(t)&&t.tgt!==ls.INVALID_ELEMENT&&this.j(t)}Xh(){this.F[" "]=X.SPACE,this.F.Spacebar=X.SPACE,this.F.Enter=X.ENTER,this.F.Backspace=X.BACKSPACE,this.F.Delete=X.DELETE,this.F.ArrowUp=X.ARROWUP,this.F.ArrowDown=X.ARROWDOWN,this.F.ArrowLeft=X.ARROWLEFT,this.F.ArrowRight=X.ARROWRIGHT,this.F.Up=X.ARROWUP,this.F.Down=X.ARROWDOWN,this.F.Left=X.ARROWLEFT,this.F.Right=X.ARROWRIGHT,this.F.CapsLock=X.CAPSLOCK,this.F.Shift=X.SHIFT,this.F.Tab=X.TAB}}return F([N("Event handler type: resize")],s.prototype,"resizeListener",null),F([N("Event handler type: scroll")],s.prototype,"scrollListener",null),F([N("Event handler type: mouseMove"),ft()],s.prototype,"mouseMoveListener",null),F([N("Event handler type: mouseDown"),ft()],s.prototype,"mouseDownListener",null),F([N("Event handler type: mouseUp"),ft()],s.prototype,"mouseUpListener",null),F([N("Event handler type: click"),ft()],s.prototype,"clickListener",null),F([N("Event handler type: mouseOver"),ft()],s.prototype,"mouseOverListener",null),F([N("Event handler type: mouseOut"),ft()],s.prototype,"mouseOutListener",null),F([N("Event handler type: focusIn")],s.prototype,"focusInListener",null),F([N("Event handler type: focusOut")],s.prototype,"focusOutListener",null),F([N("Event handler type: change")],s.prototype,"changeListener",null),F([N("Event handler type: submit"),ft()],s.prototype,"submitListener",null),F([N("Event handler type: copy")],s.prototype,"copyListener",null),F([N("Event handler type: cut")],s.prototype,"cutListener",null),F([N("Event handler type: paste")],s.prototype,"pasteListener",null),F([N("Event handler type: keyup")],s.prototype,"keyUpListener",null),F([N("Event handler type: keydown")],s.prototype,"keyDownListener",null),s})(),Yv=(()=>{class s{constructor(t,e,i){this.Ft=t,this.Bt=e,this.Ot=i}processGesture(t,e){switch(t.type){case Rt.TAP:this.WT(e);break;case Rt.FLICK:this.YT(t,e);break;case Rt.DRAG:this.XT(t,e);break;default:break}}WT(t){let e={type:Y.TAP,ts:0,x:0,y:0,tgt:""},i=Ft.buildFromAnalysisEvent(t,e,this.Ft);i.tgt!==ls.INVALID_ELEMENT&&this.j(i)}XT(t,e){var i,n;let o={type:Y.DRAG,ts:0,fd:t.direction,tgt:""};!((i=this.Ot)===null||i===void 0)&&i.collectGestureDistance&&(o.distance=t.distance),!((n=this.Ot)===null||n===void 0)&&n.collectGestureVelocity&&(o.velocity=t.velocity);let c=Ft.buildFromAnalysisEvent(e,o,this.Ft);c.tgt!==ls.INVALID_ELEMENT&&this.j(c)}YT(t,e){var i,n;let o={type:Y.FLICK,ts:0,fd:t.direction,tgt:""};!((i=this.Ot)===null||i===void 0)&&i.collectGestureDistance&&(o.distance=t.distance),!((n=this.Ot)===null||n===void 0)&&n.collectGestureVelocity&&(o.velocity=t.velocity);let c=Ft.buildFromAnalysisEvent(e,o,this.Ft);c.tgt!==ls.INVALID_ELEMENT&&this.j(c)}onEvent(t){this.j=t}start(){this.Bt.subscribe(s.Bg,(t,e)=>this.processGesture(t,e))}stop(){this.Bt.unsubscribe(s.Bg)}}return s.Bg="AnalysisGestureTracker",F([ft()],s.prototype,"processGesture",null),s})();var Xv=(()=>{class s{constructor(){this.Jg=100,this.fo=0,this.po=Ct.documentHeight(),this.Qg={boundElement:document,type:"scroll",listener:t=>this.maxScrollRateListener(t)},this.fo=this.Eu(Js.getScrollContainer()).maxScrollRate}onEvent(t){this.j=t}start(){yt(this.Qg)}stop(){Et(this.Qg)}reset(){let t=Js.getScrollContainer(),{maxScrollRate:e,maxDocumentHeight:i}=this.Eu(t);this.po=i,this.fo=e,this.j()}Eu(t){let e=0,i=0;if(t===null)i=Ct.documentHeight(),e=this.ab(i);else{let n=this.cb(t);i=this.Zg(t,n),e=this.lb(t,n)}return{maxScrollRate:e,maxDocumentHeight:i}}maxScrollRateListener(t){let e=null;Js.isEventOnScrollContainer(t)&&(e=csEventtarget.apply(t));let{maxScrollRate:i,maxDocumentHeight:n}=this.Eu(e);(i>this.fo||n>this.po)&&(this.fo=i,n>this.po&&(this.po=n),this.j())}ab(t){let e=Math.round(this.hb()/t*100);return Math.min(e,this.Jg)}hb(){let t=Ct.windowHeight();return Ct.windowOffsetY()+t}lb(t,e){let i=t.scrollTop+t.clientHeight+t.getBoundingClientRect().top+e,n=this.Zg(t,e),o=Math.round(i/n*100);return Math.min(o,this.Jg)}cb(t){let e=window.getComputedStyle(t).paddingTop||"0px";return parseInt(e,10)}Zg(t,e){return t.scrollHeight+t.getBoundingClientRect().top+e}getRequestParameters(){return{sr:`${this.fo}`,mdh:`${this.po}`}}}return F([N("MaxScrollRate handler")],s.prototype,"maxScrollRateListener",null),s})(),Kv=(()=>{class s{constructor(t){this.go=t,this.mo=e=>this.processMetric(e),this.B=!1}onEvent(t){this.j=t}start(){this.B||(this.B=!0,this.go.onFCP(this.mo),this.go.onCLS(this.mo),this.go.onLCP(this.mo),this.go.onTTFB(this.mo),this.go.onINP(this.mo))}stop(){this.B=!1}processMetric(t){if(!this.B)return;let e={type:Y.PERFORMANCE,name:t.name,val:t.value,ts:0};this.j(e)}}return F([N("Performance metric handler")],s.prototype,"processMetric",null),s})(),Jv=(()=>{class s{constructor(t){this.hc=t.performance}getRequestParameters(){if(this.db())return{};let t=this.fb();return{str:t.startRender,di:t.domInteractive,dc:t.domComplete,fl:t.fullyLoaded}}fb(){let t=this.hc.timing;return{startRender:`${t.domLoading-t.requestStart}`,domInteractive:`${t.domInteractive-t.requestStart}`,domComplete:`${t.domComplete-t.requestStart}`,fullyLoaded:`${t.loadEventEnd-t.requestStart}`}}db(){return!(this.hc&&this.hc.timing&&this.hc.timing.loadEventEnd>0)}}return s})();var Ah=-1,li=s=>{addEventListener("pageshow",r=>{r.persisted&&(Ah=r.timeStamp,s(r))},!0)},we=(s,r,t,e)=>{let i,n;return o=>{r.value>=0&&(o||e)&&(n=r.value-(i!=null?i:0),(n||i===void 0)&&(i=r.value,r.delta=n,r.rating=((c,l)=>c>l[1]?"poor":c>l[0]?"needs-improvement":"good")(r.value,t),s(r)))}},ia=s=>{requestAnimationFrame(()=>requestAnimationFrame(()=>s()))},ra=()=>{let s=performance.getEntriesByType("navigation")[0];if(s&&s.responseStart>0&&s.responseStart<performance.now())return s},$i=()=>{var r;let s=ra();return(r=s==null?void 0:s.activationStart)!=null?r:0},Ae=(s,r=-1)=>{let t=ra(),e="navigate";return Ah>=0?e="back-forward-cache":t&&(document.prerendering||$i()>0?e="prerender":document.wasDiscarded?e="restore":t.type&&(e=t.type.replace(/_/g,"-"))),{name:s,value:r,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:e}},On=new WeakMap;function na(s,r){return On.get(s)||On.set(s,new r),On.get(s)}var uo=class{constructor(){Re(this,"t");Re(this,"i",0);Re(this,"o",[])}h(r){var i;if(r.hadRecentInput)return;let t=this.o[0],e=this.o.at(-1);this.i&&t&&e&&r.startTime-e.startTime<1e3&&r.startTime-t.startTime<5e3?(this.i+=r.value,this.o.push(r)):(this.i=r.value,this.o=[r]),(i=this.t)==null||i.call(this,r)}},zi=(s,r,t={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(s)){let e=new PerformanceObserver(i=>{Promise.resolve().then(()=>{r(i.getEntries())})});return e.observe(j({type:s,buffered:!0},t)),e}}catch(e){}},oa=s=>{let r=!1;return()=>{r||(s(),r=!0)}},Xs=-1,Nc=()=>document.visibilityState!=="hidden"||document.prerendering?1/0:0,kr=s=>{document.visibilityState==="hidden"&&Xs>-1&&(Xs=s.type==="visibilitychange"?s.timeStamp:0,Qv())},Mc=()=>{addEventListener("visibilitychange",kr,!0),addEventListener("prerenderingchange",kr,!0)},Qv=()=>{removeEventListener("visibilitychange",kr,!0),removeEventListener("prerenderingchange",kr,!0)},Th=()=>{var s;if(Xs<0){let r=$i(),t=document.prerendering||(s=globalThis.performance.getEntriesByType("visibility-state").filter(e=>e.name==="hidden"&&e.startTime>r)[0])==null?void 0:s.startTime;Xs=t!=null?t:Nc(),Mc(),li(()=>{setTimeout(()=>{Xs=Nc(),Mc()})})}return{get firstHiddenTime(){return Xs}}},zr=s=>{document.prerendering?addEventListener("prerenderingchange",()=>s(),!0):s()},Dc=[1800,3e3],bh=(s,r={})=>{zr(()=>{let t=Th(),e,i=Ae("FCP"),n=zi("paint",o=>{for(let c of o)c.name==="first-contentful-paint"&&(n.disconnect(),c.startTime<t.firstHiddenTime&&(i.value=Math.max(c.startTime-$i(),0),i.entries.push(c),e(!0)))});n&&(e=we(s,i,Dc,r.reportAllChanges),li(o=>{i=Ae("FCP"),e=we(s,i,Dc,r.reportAllChanges),ia(()=>{i.value=performance.now()-o.timeStamp,e(!0)})}))})},kc=[.1,.25],Zv=(s,r={})=>{bh(oa(()=>{let t,e=Ae("CLS",0),i=na(r,uo),n=c=>{for(let l of c)i.h(l);i.i>e.value&&(e.value=i.i,e.entries=i.o,t())},o=zi("layout-shift",n);o&&(t=we(s,e,kc,r.reportAllChanges),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&(n(o.takeRecords()),t(!0))}),li(()=>{i.i=0,e=Ae("CLS",0),t=we(s,e,kc,r.reportAllChanges),ia(()=>t())}),setTimeout(t))}))},Rh=0,Nn=1/0,mr=0,tS=s=>{for(let r of s)r.interactionId&&(Nn=Math.min(Nn,r.interactionId),mr=Math.max(mr,r.interactionId),Rh=mr?(mr-Nn)/7+1:0)},fo,xc=()=>{var s;return fo?Rh:(s=performance.interactionCount)!=null?s:0},eS=()=>{"interactionCount"in performance||fo||(fo=zi("event",tS,{type:"event",buffered:!0,durationThreshold:0}))},Lc=0,po=class{constructor(){Re(this,"u",[]);Re(this,"l",new Map);Re(this,"m");Re(this,"p")}v(){Lc=xc(),this.u.length=0,this.l.clear()}P(){let r=Math.min(this.u.length-1,Math.floor((xc()-Lc)/50));return this.u[r]}h(r){var i,n;if((i=this.m)==null||i.call(this,r),!r.interactionId&&r.entryType!=="first-input")return;let t=this.u.at(-1),e=this.l.get(r.interactionId);if(e||this.u.length<10||r.duration>t.T){if(e?r.duration>e.T?(e.entries=[r],e.T=r.duration):r.duration===e.T&&r.startTime===e.entries[0].startTime&&e.entries.push(r):(e={id:r.interactionId,entries:[r],T:r.duration},this.l.set(e.id,e),this.u.push(e)),this.u.sort((o,c)=>c.T-o.T),this.u.length>10){let o=this.u.splice(10);for(let c of o)this.l.delete(c.id)}(n=this.p)==null||n.call(this,e)}}},Ch=s=>{let r=globalThis.requestIdleCallback||setTimeout;document.visibilityState==="hidden"?s():(r(s=oa(s)),document.addEventListener("visibilitychange",s,{once:!0}))},Vc=[200,500],sS=(s,r={})=>{globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype&&zr(()=>{var c;eS();let t,e=Ae("INP"),i=na(r,po),n=l=>{Ch(()=>{for(let d of l)i.h(d);let h=i.P();h&&h.T!==e.value&&(e.value=h.T,e.entries=h.entries,t())})},o=zi("event",n,{durationThreshold:(c=r.durationThreshold)!=null?c:40});t=we(s,e,Vc,r.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&(n(o.takeRecords()),t(!0))}),li(()=>{i.v(),e=Ae("INP"),t=we(s,e,Vc,r.reportAllChanges)}))})},go=class{constructor(){Re(this,"m")}h(r){var t;(t=this.m)==null||t.call(this,r)}},Uc=[2500,4e3],iS=(s,r={})=>{zr(()=>{let t=Th(),e,i=Ae("LCP"),n=na(r,go),o=l=>{r.reportAllChanges||(l=l.slice(-1));for(let h of l)n.h(h),h.startTime<t.firstHiddenTime&&(i.value=Math.max(h.startTime-$i(),0),i.entries=[h],e())},c=zi("largest-contentful-paint",o);if(c){e=we(s,i,Uc,r.reportAllChanges);let l=oa(()=>{o(c.takeRecords()),c.disconnect(),e(!0)});for(let h of["keydown","click","visibilitychange"])addEventListener(h,()=>Ch(l),{capture:!0,once:!0});li(h=>{i=Ae("LCP"),e=we(s,i,Uc,r.reportAllChanges),ia(()=>{i.value=performance.now()-h.timeStamp,e(!0)})})}})},jc=[800,1800],mo=s=>{document.prerendering?zr(()=>mo(s)):document.readyState!=="complete"?addEventListener("load",()=>mo(s),!0):setTimeout(s)},rS=(s,r={})=>{let t=Ae("TTFB"),e=we(s,t,jc,r.reportAllChanges);mo(()=>{let i=ra();i&&(t.value=Math.max(i.responseStart-$i(),0),t.entries=[i],e(!0),li(()=>{t=Ae("TTFB",0),e=we(s,t,jc,r.reportAllChanges),e(!0)}))})},nS=(()=>{class s{onFCP(t){try{bh(t,{reportAllChanges:!0})}catch(e){q.counters.webVitalsErrors.count("FCP")}}onCLS(t){try{Zv(t,{reportAllChanges:!0})}catch(e){q.counters.webVitalsErrors.count("CLS")}}onLCP(t){try{iS(t,{reportAllChanges:!0})}catch(e){q.counters.webVitalsErrors.count("LCP")}}onTTFB(t){try{rS(t,{reportAllChanges:!0})}catch(e){q.counters.webVitalsErrors.count("TTFB")}}onINP(t){try{sS(t,{reportAllChanges:!0})}catch(e){q.counters.webVitalsErrors.count("INP")}}}return s})();var oS="csAnalysisEventsPersisted",Hc="v2/events",Ih=["submit"],yo=["trackEvent"];var aS=(()=>{class s{constructor(t,e,i,n,o,c,l,h,d,p,y,m,v,b,C){this.E=t,this.Et=e,this.N=i,this.et=n,this.zt=o,this.S=c,this.V=l,this.Bt=h,this.yt=d,this.ce=p,this.J=y,this.$t=m,this.wt=v,this.es=b,this.ss=C}init(){let t=new qv,e=this.ce.create(`${this.E.getTrackerUri()}/${Hc}`,"base64");this.xr=this.Rb(e),this._e=this.Cb(t,this.xr.getRecoveryStorage(),e),this._e.init(),this.J.addListener(this._e),this.yt.addListener(this._e),this.S.register(Ih,()=>{}),this.S.register(yo,i=>{if(!K(i))throw new $t(yo[0]);this._e.pushCustomEvent(i.name,i.source,i.properties)})}onStartTracking(t){this.xr.start(),this._e.start(t)}onAfterNaturalPageView(){this._e.initStates()}onArtificialPageViewEnd(t){this._e.clearStates(!0),t&&(this._e.stop(),this.xr.stop())}onAfterArtificialPageView(t){this._e.initStates(),t&&(this._e.start(),this.xr.start()),this._e.collectInitialEvents()}onBeforeSessionRenewal(){this._e.clearStates(),this._e.stop(),this.xr.stop()}onOptout(){this._e.stop(),this.xr.stop()}Cb(t,e,i){var n,o;let c=new Jv(window),l=new Xv,h=Bv(this.E,this.et,this.$t,this.es,this.ss),d=[];this.E.collectSubmit||csArray.prototype.push.call(d,"submit");let p=new Wv(h,this.et,this.zt,d),y=Fv(this.E,this.et,this.$t,this.es,this.ss),m=new Yv(y,this.Bt),v=new Kv(new nS),b=new mh,C,_,T,x=new ph(`${this.E.getTrackerUri()}/${Hc}`),O=new Ni(this.Et,this.N),w,H,$,tt;return new Vv(this.E,p,m,l,c,t,x,O,this.V,e,v,b,i,h,C,_,T,w,H,$,tt)}Rb(t){return new $v(new zv(oS),t)}}return s})(),cS=(()=>{class s extends Tt{validateArgs(t){return K(t)?I(t.status)&&I(t.selector):!1}execute(t){if(!Ut(t.selector))return;let e=window.csquerySelector[document.nodeType].call(document,t.selector);e&&this.commandsService.applyFromImplementation(Ih[0],[t.status,e],"SubmitTemplate")}}return s})(),te=(()=>{class s{onEvent(t){this.onEventCallback=t}constructor(t,e,i){this.commandsService=t,this.condition=i,this.isStarted=!1,this.dm=!1,this.args=e}start(){this.dm||(this.onInit(),this.dm=!0),this.isStarted||(this.onStart(),this.isStarted=!0)}stop(){this.isStarted&&(this.onStop(),this.isStarted=!1)}}return F([N()],s.prototype,"start",null),F([N()],s.prototype,"stop",null),s})(),Bc="once per pageview",lS="always",hS=(()=>{class s extends te{constructor(){super(...arguments),this.At=!0}validateArgs(t){if(K(t)){let e=I(t.selector),i=t.frequency?t.frequency===Bc||t.frequency===lS:!0;return e&&i}return!1}onInit(){if(!Ut(this.args.selector)){this.At=!1;return}this.yo=this.args.frequency?this.args.frequency===Bc:!0,this.G=new de((t,e)=>this.A(t,e))}onStart(){this.At&&this.G.observe(this.args.selector)}onStop(){this.At&&(this.G.processPendingMutations(),this.G.disconnect())}A(t,e){e==="added"&&(this.yo?(this.stop(),this.onEventCallback({element:t[0]})):new Set(t).forEach(i=>this.onEventCallback({element:i})))}}return s})(),uS=(()=>{class s extends te{constructor(){super(...arguments),this.At=!0,this.fm=!1}validateArgs(t){return K(t)?I(t.selector):!1}onInit(){if(!Ut(this.args.selector)){this.At=!1;return}this.G=new de((t,e)=>{this.A(t,e)})}onStart(){this.At&&(this.G.observe(this.args.selector),this.fm=!0)}onStop(){this.At&&(this.G.processPendingMutations(),this.G.disconnect())}A(t,e){this.fm?e==="added"&&new Set(t).forEach(i=>this.onEventCallback({element:i})):this.onEventCallback({element:t[0]})}}return s})(),dS=(()=>{class s extends te{constructor(){super(...arguments),this.At=!0}validateArgs(t){return K(t)?I(t.selector):!1}onInit(){if(!Ut(this.args.selector)){this.At=!1;return}this.W=new de(t=>this.Ib(t)),this.U=new Te(t=>this.Pb(t))}onStart(){this.At&&(this.fc=csSymbol("MatchingElement"),this.W.observe(this.args.selector),this.U.observe())}onStop(){this.At&&(this.W.processPendingMutations(),this.W.disconnect(),this.U.disconnect())}Ib(t){new Set(t).forEach(e=>this.Ob(e))}Pb(t){let e=Co(t,n=>n.removedNodes),i=[];for(let n of e)csArray.prototype.push.call(i,...this.Nb(n));new Set(i).forEach(n=>this.onEventCallback({element:n}))}Ob(t){t[this.fc]=!0}Nb(t){let e=[];return ae(t,NodeFilter.SHOW_ELEMENT).visitAll(i=>{i[this.fc]&&(lt.isConnected(i)?Zt.call(i,this.args.selector)||delete i[this.fc]:delete i[this.fc],csArray.prototype.push.call(e,i))}),e}}return s})(),fS=(()=>{class s{static readyStateChangeListener(t){csArray.prototype.forEach.call(gs(s.callbacks),e=>e(t))}static bh(t){s.callbacks.has(t)||(s.callbacks.add(t),s.callbacks.size===1&&yt(s.eventHandler,!1))}static xn(t){s.callbacks.delete(t),s.callbacks.size===0&&Et(s.eventHandler,!1)}constructor(t){this.A=t}observe(){s.bh(this.A)}disconnect(){s.xn(this.A)}}return s.callbacks=new Set,s.eventHandler={boundElement:ot.document,type:"readystatechange",listener:s.readyStateChangeListener},rt([N("readyStateChangeListener"),ft()],s,"readyStateChangeListener",null),s})(),pS=(()=>{class s extends te{constructor(){super(...arguments),this._u={state:"Any"}}validateArgs(t){var e;return K(t)&&I(t.state)||(B.implementation(`PageStateTrigger has wrong argument: ${(e=this.args)===null||e===void 0?void 0:e.state}, fallback to default config.`),this.args=this._u),!0}onInit(){this.Dt=this.args.state.toLowerCase(),this.G=new fS(()=>{this.pm(this.Dt,document.readyState)&&(this.onEventCallback(),this.G.disconnect())})}onStart(){this.pm(this.Dt,document.readyState)?this.onEventCallback():this.G.observe()}onStop(){this.G.disconnect()}pm(t,e){let i=s.gm[e];return s.gm[t]<=i}}return s.gm={complete:3,interactive:2,loading:1,any:0},s})(),cs=(()=>{let s;return function(r){function t(n){return n.replayConsentRequiredForSession}r.isReplayConsentNeeded=t;function e(n){return n.collectState===M.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED||n.collectState===M.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}r.isRecordingBlockedByConsent=e;function i(n){return n.collectState===M.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}r.isRecordingWithDrawn=i}(s||(s={})),s})(),yr=(()=>{let s;return function(r){r[r.NOT_NEEDED=1]="NOT_NEEDED",r[r.NOT_EXPRESSED=2]="NOT_EXPRESSED",r[r.WITHDRAWN=3]="WITHDRAWN",r[r.GRANTED=4]="GRANTED"}(s||(s={})),s})(),gS=(()=>{class s{constructor(t,e,i,n){this.N=t,this.R=e,this.E=i,this.hs=n,this.mm=!1}isNaturalPageViewSent(){return this.mm}setNaturalPageViewSent(t){this.mm=t}getTrackingContext(){let t=this.R.getSession();if(!t)return null;let e=this.getSessionKey();if(!e)return null;let i=this.E.projectId,n=this.E.uxaDomain,o=t.pageNumber,c=this.hs.getPageViewType(),l=this.R.isReplayRecorded(),h=this.Mb(t);return j({projectId:i,sessionKey:e,pageNumber:o,pageViewType:c,isRecording:l,uxaDomain:n,recordingConsentState:h},this.E.smbConfig)}getSessionKey(){let t=this.N.getVisitor();return t?`${t.id}.${t.visitsCount}`:null}Mb(t){return cs.isReplayConsentNeeded(this.E)?t.collectState===M.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED?yr.NOT_EXPRESSED:t.collectState===M.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN?yr.WITHDRAWN:yr.GRANTED:yr.NOT_NEEDED}}return s})(),mS=(()=>{class s{constructor(t){this.kt=t,this.he=[]}handleCommand(t){if(Se(t)&&(this.Eo(t),this.kt.isNaturalPageViewSent())){let e=this.kt.getTrackingContext();e!==null&&this.Gt(t,e)}}Eo(t){csArray.prototype.push.call(this.he,t)}executeRegisteredCallbacks(){let t=this.kt.getTrackingContext();t!==null&&csArray.prototype.map.call(this.he,e=>this.Gt(e,t))}Gt(t,e){csSetTimeout(()=>{t(e)})}}return s})(),yS=(()=>{class s{constructor(t){this.kt=t,this.Qi=[]}handleCommand(t){if(this.kt.isNaturalPageViewSent())return this.Db(t);this.vo(t)}Db(t){let e=this.kt.getSessionKey();return this.ym(t)&&e!==null&&this.Gt(t.callback,e),e}vo(t){this.ym(t)&&csArray.prototype.push.call(this.Qi,t.callback)}flushPendingCallbacks(){let t=this.kt.getSessionKey();t!==null&&csArray.prototype.forEach.call(this.Qi,e=>{this.Gt(e,t)}),this.Qi=[]}ym(t){return t&&typeof t.callback=="function"}Gt(t,e){csSetTimeout(()=>{t(e)})}}return s})();function ES(s,r){let{isRecording:t,pageNumber:e,projectId:i,siteId:n,uxaDomain:o,csLiteDomain:c}=s,l=/^(.+)\.(\d+)$/.exec(s.sessionKey),h;if(t&&l){let[,d,p]=l;n?h=`${c}/sites/${n}/player?uu=${d}&sn=${p}&pn=${e}`:h=`${o}/quick-playback/index.html?pid=${i}&uu=${d}&sn=${p}&pvid=${e}&recordingType=cs`,r.withTimestamp&&(h+=`&t=${k.now()-r.recordingStartTimestamp}`)}return{replayLink:h,isRecording:t}}var vS=(()=>{class s{constructor(t){this.kt=t}handleCommand(t,e){Qs(t)&&Se(e)&&this.Gt(t,e)}Gt(t,e){csSetTimeout(()=>{let i=this.kt.getTrackingContext();if(i){let n=ES(i,t);e(n)}})}}return s})(),SS=(()=>{class s{constructor(){this.he=new Set}handleCommand(t,e){return!Se(t)||this.he.has(t)?null:(this.he.add(t),e&&(this.Ne=e,this.Em(t,e)),()=>this.he.delete(t))}executeCallbacks(t){this.kb(t)&&(this.Ne=t,this.he.forEach(e=>this.Em(e,t)))}Em(t,e){csSetTimeout(()=>{try{t(e)}catch(i){}})}kb(t){let{isRecording:e,recordingStartTimestamp:i,etrState:n,etrStatus:o,collectState:c}=t;return this.Ne&&(this.Ne.isRecording!==e||this.Ne.recordingStartTimestamp!==i||this.Ne.etrState!==n||this.Ne.etrStatus!==o||this.Ne.collectState!==c)}}return s})(),Ph=["afterPageView"],_S=["getSessionKey"],wS=["onRecordingContextChange","onRecordingStateChange"],AS=["replay:link:generate"],TS=(()=>{class s{constructor(t,e,i,n,o,c,l,h){this.N=t,this.R=e,this.S=i,this.yt=n,this.tt=o,this.E=c,this.hs=l,this.Ei=h,this.vm=null}init(){this.kt=new gS(this.N,this.R,this.E,this.hs),this.wu=new mS(this.kt),this.Sm=new yS(this.kt),this.So=new SS,this.xb=new vS(this.kt),this.S.register(_S,t=>this.Sm.handleCommand(t)),this.S.register(Ph,t=>this.wu.handleCommand(t)),this.S.register(wS,t=>this.So.handleCommand(t,this.Ei.getRecordingContext())),this.S.register(AS,(t,e)=>{this.Lr&&this.xb.handleCommand(ct(j({},t),{recordingStartTimestamp:this.Ei.getRecordingContext().recordingStartTimestamp}),e)})}onAfterNaturalPageView(){var t;this.kt.setNaturalPageViewSent(!0),this.Sm.flushPendingCallbacks(),this.wu.executeRegisteredCallbacks(),(t=this.vm)===null||t===void 0||t.sendAfterPageViewCallbackToChildren()}onAfterArtificialPageView(){var t;this.wu.executeRegisteredCallbacks(),(t=this.vm)===null||t===void 0||t.sendAfterPageViewCallbackToChildren()}onCollectStateChange(){this.executeRecordingContextChangeCallbacks()}onRecordingContextChange(){this.executeRecordingContextChangeCallbacks()}executeRecordingContextChangeCallbacks(){this.So.executeCallbacks(this.Ei.getRecordingContext())}setRecordingService(t){this.Lr=t}}return F([ji({wait:0,mode:"trailing"})],s.prototype,"executeRecordingContextChangeCallbacks",null),s})(),bS=(()=>{class s extends te{validateArgs(t){return!!K(t)}Lb(){this.isStarted&&this.onEventCallback()}onInit(){this.commandsService.applyFromImplementation(Ph[0],[()=>this.Lb()],"AfterPageViewTrigger")}onStart(){}onStop(){}}return s})(),RS=(()=>{class s extends te{constructor(){super(...arguments),this.Au=!1,this.At=!0,this.pi=!0,this.wi={boundElement:document,type:"click",listener:t=>{if(this.Au){this.Au=!1;return}this.onClickOrTap(t)}},this.Vb=(t,e)=>{t.type===Rt.TAP&&(this.Au=!0,this.onClickOrTap(e))}}validateArgs(t){return K(t)?I(t.selector):!1}onClickOrTap({target:t}){if(vt(t)&&fs(t)){let e=ti(t,this.args.selector);e&&this.onEventCallback({element:e})}}onInit(){if(!Ut(this.args.selector)){this.At=!1;return}this.Gn=new lh(this.Vb)}onStart(){var t;this.At&&(yt(this.wi,this.pi),(t=this.Gn)===null||t===void 0||t.observe())}onStop(){var t;this.At&&(Et(this.wi,this.pi),(t=this.Gn)===null||t===void 0||t.disconnect())}}return F([N("onClickOrTap"),ft()],s.prototype,"onClickOrTap",null),s})(),CS=(()=>{class s{static Ub(){var t,e,i,n;if("history"in window){let o=Object.getOwnPropertyDescriptors(history);if(!((t=o.pushState)===null||t===void 0)&&t.writable&&(!((e=o.replaceState)===null||e===void 0)&&e.writable))return history}if(History.prototype){let o=Object.getOwnPropertyDescriptors(History.prototype);if(!((i=o.pushState)===null||i===void 0)&&i.writable&&(!((n=o.replaceState)===null||n===void 0)&&n.writable))return History.prototype}ht.warn("Unable to override pushState, replaceState",!0,"HistoryChangeObserver")}static Tu(){let t=s.Ub();s._o===null&&Se(t==null?void 0:t.pushState)&&(s._o=Ne({target:t,methodName:"pushState",hook:({args:e})=>{s._m("pushstate",e)}})),s.wo===null&&Se(t==null?void 0:t.replaceState)&&(s.wo=Ne({target:t,methodName:"replaceState",hook:({args:e})=>{s._m("replacestate",e)}}))}static Tn(t){var e,i;s.Ie.add(t),s.Ie.size===1&&((s._o===null||s.wo===null)&&s.Tu(),(e=s._o)===null||e===void 0||e.activate(),(i=s.wo)===null||i===void 0||i.activate(),yt(s.wm),yt(s.Am))}static Rn(t){var e,i;s.Ie.delete(t),s.Ie.size===0&&((e=s._o)===null||e===void 0||e.deactivate(),(i=s.wo)===null||i===void 0||i.deactivate(),Et(s.wm),Et(s.Am))}static _m(t,e){let i={type:t,state:e[0]};I(e[2])&&(i.url=e[2]),s.Rr(i)}static popstateListener(t){s.Rr({type:"popstate",state:t.state})}static hashchangeListener(t){s.Rr({type:"hashchange",state:null,url:t.newURL})}static Rr(t){csArray.prototype.forEach.call(gs(s.Ie),e=>{e(t)})}constructor(t){this.A=t}observe(){s.Tn(this.A)}disconnect(){s.Rn(this.A)}}return s._o=null,s.wo=null,s.wm={boundElement:ot,type:"popstate",listener:r=>s.popstateListener(r)},s.Am={boundElement:ot,type:"hashchange",listener:r=>s.hashchangeListener(r)},s.Ie=new Set,rt([N("popstateListener"),ft()],s,"popstateListener",null),rt([N("hashchangeListener"),ft()],s,"hashchangeListener",null),s})(),IS=(()=>{class s extends te{validateArgs(t){if(K(t)){let e=I(t.useDebounce),i=t.useDebounce==="yes"?At(t==null?void 0:t.window):!0,n=I(t.listeners);return e&&i&&n}return!1}onInit(){this.args.useDebounce==="yes"?this.ne=Ci(()=>{this.onEventCallback()},this.args.window):this.ne=this.onEventCallback,this.G=new CS(t=>this.jb(t))}Tm(){return window.location.href}jb(t){let e=t.type==="replacestate"&&this.args.listeners.indexOf("replaceState")===-1,i=t.type==="hashchange"&&this.args.listeners.indexOf("hashchange")===-1;if(e||i)return;let n=this.Tm();this.bm!==n&&(this.bm=n,this.ne())}onStart(){this.bm=this.Tm(),this.G.observe()}onStop(){this.G.disconnect()}}return s})(),PS=(()=>{class s extends te{constructor(){super(...arguments),this.At=!0,this.pi=!0,this.wi={boundElement:document,type:"submit",listener:t=>this.submitListener(t)}}validateArgs(t){return K(t)?I(t.selector):!1}submitListener({target:t}){vt(t)&&fs(t)&&Zt.call(t,this.args.selector)&&this.onEventCallback({element:t})}onInit(){Ut(this.args.selector)||(this.At=!1)}onStart(){this.At&&yt(this.wi,this.pi)}onStop(){this.At&&Et(this.wi,this.pi)}}return F([N("submitListener"),ft()],s.prototype,"submitListener",null),s})(),OS=(()=>{class s extends te{constructor(){super(...arguments),this.At=!0,this.Rm={boundElement:document,type:"mouseover",listener:t=>this.mouseoverListener(t)},this.Cm={boundElement:document,type:"mouseleave",listener:t=>this.mouseleaveListener(t)}}validateArgs(t){return K(t)?I(t.selector):!1}onInit(){Ut(this.args.selector)||(this.At=!1)}mouseleaveListener({target:t}){vt(t)&&fs(t)&&t[this.pc]&&delete t[this.pc]}mouseoverListener({target:t}){if(vt(t)&&fs(t)){let e=ti(t,this.args.selector);e!==null&&!e[this.pc]&&(e[this.pc]=!0,this.onEventCallback({element:e}))}}onStart(){this.At&&(this.pc=csSymbol("Hovered"),yt(this.Cm,!0),yt(this.Rm,!0))}onStop(){this.At&&(Et(this.Rm),Et(this.Cm))}}return F([N("mouseleaveListener"),ft()],s.prototype,"mouseleaveListener",null),F([N("mouseoverListener"),ft()],s.prototype,"mouseoverListener",null),s})(),NS=(()=>{class s extends te{constructor(){super(...arguments),this.wi={boundElement:window,type:"hashchange",listener:t=>this.hashChangedListener(t)}}validateArgs(t){return!!K(t)}hashChangedListener(t){t.newURL&&t.newURL===t.oldURL||this.onEventCallback()}onInit(){}onStart(){yt(this.wi)}onStop(){Et(this.wi)}}return F([N("hashChangedListener"),ft()],s.prototype,"hashChangedListener",null),s})(),MS=(()=>{class s extends te{constructor(){super(...arguments),this.gc=!0}validateArgs(t){return K(t)?I(t.selector):!1}onInit(){if(!Ut(this.args.selector)||!Dr.isSupported()){this.gc=!1;return}this.Mt=new Dr({delay:0,trackOnce:!0,reobserve:!0}),this.W=new de(t=>this.bu(t),{closest:!0})}bu(t){for(let e of t)this.Mt.observe(e)}Ru(t,e){if(this.isStarted&&e===bi.VisibleInViewPort){let i=ti(t,this.args.selector);i&&(this.onEventCallback({element:i}),this.stop(),this.gc=!1)}}onStart(){this.gc&&(this.Mt.start((t,e)=>this.Ru(t,e)),this.W.observe(this.args.selector))}onStop(){this.gc&&(this.Mt.stop(),this.W.disconnect())}}return s})();var DS=["api-errors:maskUrl"];var kS=(()=>{class s extends Tt{validateArgs(t){return K(t)?I(t.url):!1}execute(t){this.commandsService.applyFromImplementation(DS[0],[t.url],"ApiErrorsMaskUrlTemplate")}}return s})(),xS=["networkRequest:maskUrls"];var LS=(()=>{class s extends Tt{validateArgs(t){return K(t)?I(t.maskingPattern):!1}execute(t){this.commandsService.applyFromImplementation(xS[0],[t.maskingPattern],"NetworkRequestMaskUrlTemplate")}}return s})(),Fc="once per pageview",VS="always",US=(()=>{class s extends te{constructor(){super(...arguments),this.Pu=!1,this.Je=!1,this.yo=!0}validateArgs(t){if(K(t)){let e=I(t.selector),i=t.frequency?t.frequency===Fc||t.frequency===VS:!0;return e&&i}return!1}onInit(){Dr.isSupported()&&(this.Je=!0,this.yo=this.args.frequency?this.args.frequency===Fc:!0,this.W=new de((t,e)=>{if(e==="initial")for(let i of t)lt.isVisibleInViewportInForeground(i)&&(i[this.Ou]=!0);this.bu(t)},{closest:!0}),this.Mt=new Dr({delay:0,trackOnce:!1,reobserve:!0,allowSameMatch:!0}))}onStart(){!this.Je||this.isStarted||(this.Ou=csSymbol("skipElement"),this.Pu=!1,this.Mt.start((t,e)=>this.Ru(t,e)),this.W.observe(this.args.selector))}onStop(){!this.Je||!this.isStarted||(this.W.disconnect(),this.Mt.stop())}Ru(t,e){if(this.isStarted&&e===bi.VisibleInViewPort){let i=t.closest(this.args.selector);if(i){if(i[this.Ou]){delete i[this.Ou];return}this.yo&&this.stop(),(!this.yo||!this.Pu)&&(this.Pu=!0,this.onEventCallback({element:i}))}}}bu(t){for(let e of t)this.Mt.observe(e)}}return s})(),Eo=(()=>{class s extends te{constructor(){super(...arguments),this._u={pageviewTypes:["natural","artificial"]}}validateArgs(t){var e;return K(t)&&Qs(t)&&csArray.isArray(t.pageviewTypes)&&nl(t.pageviewTypes,n=>I(n))||(B.implementation(`BeforePageViewTrigger has wrong argument: ${(e=this.args)===null||e===void 0?void 0:e.pageviewTypes}, fallback to default config.`),this.args=this._u),!0}onInit(){this.Hb=this.args.pageviewTypes}onPageView(t){this.isStarted&&csArray.prototype.indexOf.call(this.Hb,t)!==-1&&this.onEventCallback()}onStart(){}onStop(){}}return s})(),jS=(()=>{class s extends Tt{constructor(){super(...arguments),this.Nu=!1}validateArgs(t){return K(t)&&I(t.type)&&I(t.urls)&&(t.type==="allow"||t.type==="block")&&csString.prototype.trim.call(t.urls).length>0?(this.Nu=!1,!0):(B.implementation(`BlockAllowListForSRTemplate has wrong argument: ${t}, fallback to default config.`),this.Nu=!0,!0)}execute(t){let e="";this.Nu?e=Ll:e=this.Bb(t.urls,t.type),this.commandsService.applyFromImplementation(xl[0],[e],"BlockAllowListForSRTemplate")}Bb(t,e){let i=e==="allow"?"?!":"";return i+=csArray.prototype.join.call(csArray.prototype.map.call(csString.prototype.split.call(t,","),n=>`.*${csString.prototype.trim.call(n)}`),"|"),`^(${i}).*?`}}return s})(),HS=(()=>{class s{constructor(t){this.S=t,this.Fb={ApiErrorsMaskUrl:kS,NetworkRequestMaskUrls:LS,ArtificialPageview:Gl,BlockAllowListForSr:jS,CustomError:um,CustomVariable:fm,DataCsEncrypt:gm,DataCsOverride:ym,DynamicVariable:bm,EcTransactionAll:Mm,EcTransactionCreate:Dm,EcTransactionItemsAdd:km,EcTransactionSend:xm,ElementUnmasking:Lm,EventTriggerRecordingPage:Bm,EventTriggerRecordingSession:Fm,PageEvent:$m,PiiMasking:zm,RecordingEventTrigger:Gm,SetPath:qm,SetQuery:Wm,SrmOnlineAssets:Dv,Submit:cS},this.Vr={AfterPageView:bS,ElementAdded:hS,ElementBecomesVisible:US,ElementExist:uS,ElementRemoved:dS,ElementVisibility:MS,ElementClick:RS,FormSubmit:PS,HashChange:NS,HistoryChange:IS,Mouseover:OS,PageState:pS,BeforePageView:Eo}}$b(t){let e=this.Fb[t.name];return e?new e(this.S,t.args):(B.error(`Implementations: template ${t.name} does not exist`),null)}zb(t){let e=this.Vr[t.name];return e?new e(this.S,t.args,t.condition):(B.error(`Implementations: trigger ${t.name} does not exist`),null)}parse(t){let e=[];for(let{triggers:i,template:n}of t){let o=this.$b(n);if(!o)continue;if(!o.validateArgs(o.args)){B.implementation(`${n.name} has wrong argument.`);continue}for(let l of i){let h=this.zb(l);if(!h)continue;if(!h.validateArgs(h.args)){B.implementation(`${l.name} has wrong argument.`);continue}csArray.prototype.push.call(e,{name:`${l.name}_${n.name}`,trigger:h,template:o})}}return e}}return s})(),BS=(()=>{class s{constructor(t,e,i){this.Gb=t,this.O=i,this.Ne={window,document,location,cookies:{}},this.Vr=new Set,this.qb=new HS(e)}init(){Object.defineProperty(this.Ne,"cookies",{get:()=>this.Wb()});let t=this.qb.parse(this.Gb);for(let{name:e,trigger:i,template:n}of t)i instanceof Eo&&n instanceof Gl||(this.Vr.add(i),i.onEvent(o=>{this.onTriggerEvent(o,n),q.counters.CSTCSnippetUsed.count(e)}))}start(t=!1){this.Vr.forEach(e=>{e.condition&&!$l(e.condition,this.Ne)||(t?this.O.schedule(()=>{e.start()}):e.start())})}stop(){this.Vr.forEach(t=>{t.stop()})}onBeforePageView(t){this.Vr.forEach(e=>{if(e instanceof Eo){e.onPageView(t);return}})}onTriggerEvent(t,e){let i=this.Yb(t),n=j(j({},this.Ne),i),o=[];if(Tg(e.args)&&I(e.args.iterable)&&e.args.iterable.length>0){let c=Xg(e.args.iterable,n);if(vt(c)){let l=csArray.prototype.map.call(c,h=>ct(j({},n),{$:h}));csArray.prototype.push.call(o,...l)}}else csArray.prototype.push.call(o,n);if(e instanceof Hi){for(let c of o)e.execute(e.args,c);return}for(let c of o){let l=Qn(e.args,c);l&&e.execute(l)}}Wb(){let t;try{t=document.cookie}catch(e){t=""}return csArray.prototype.reduce.call(csString.prototype.split.call(t,"; "),(e,i)=>{let[n,o]=csString.prototype.split.call(i,"=");return o!==void 0&&(e[n]=o),e},{})}Yb(t){let e=j({},t);for(let i in e)pt(e[i])&&(D.isMaskedElement(e[i])||D.isMaskedElementChild(e[i]))&&delete e[i];return e}}return F([Nt("implementationsService.start")],s.prototype,"start",null),F([N()],s.prototype,"onTriggerEvent",null),s})(),FS=(()=>{class s{constructor(t,e,i){this.Bs=new BS(t,e,i)}init(){this.Bs.init()}onInitTracking(){this.Bs.start(!0)}onOptout(){this.Bs.stop()}onBeforeSessionRenewal(){this.Bs.stop(),this.Bs.start()}onArtificialPageViewEnd(){this.Bs.stop()}onBeforeArtificialPageView(){this.Bs.start(),this.Bs.onBeforePageView("artificial")}onBeforeNaturalPageView(){this.Bs.onBeforePageView("natural")}}return s})(),$S=["optout"];var zS=(()=>{class s{constructor(t,e){this.S=t,this.ls=e}init(){this.S.register($S,()=>{this.ls.activate()})}}return s})(),Si="_cs_optout",GS=(()=>{class s{constructor(t,e,i){this.E=t,this.M=e,this.mt=i}get(){return this.E.cookielessTrackingEnabled?this.mt.getItem(Si):this.M.get(Si)}set(t){this.E.cookielessTrackingEnabled?this.mt.setItem(Si,t):this.M.set(Si,t,bo)}}return s})(),$c="1",qS=(()=>{class s{constructor(t,e,i){this.w=t,this.xt=e,this.ft=i}init(){!this.isActive()&&this.Xb()&&this.activate()}isActive(){return this.ft.get()===$c}activate(){this.w.emitOptout(),this.ft.set($c)}Xb(){return csString.prototype.indexOf.call(this.xt.href,Si)>0}}return s})(),WS=(()=>{class s{constructor(){this.yc=null,this.Kb=1}startInterval(){this.yc=window.csSetInterval(()=>{let t=this.Kb++;if(this.flush(`interval.${t}`),t>=5){this.stopInterval();return}},5e3)}flush(t){q.counters.tasks.flush(t),q.counters.longTasks.flush(t)}clear(){q.counters.tasks.reset(),q.counters.longTasks.reset(),this.stopInterval()}stopInterval(){this.yc&&(csClearInterval(this.yc),this.yc=null)}}return s})(),YS=(()=>{class s{constructor(){this.To=!1,this.bo=null,this.Fs=new WS}onStartTracking(){this.Jb()}Jb(){let t=csArray.prototype.filter.call(performance.getEntriesByType("resource"),e=>{var i;if(e.initiatorType!=="script")return!1;let n=csString.prototype.split.call(e.name,"/")[2]||"",o=(i=window.CSCurrentScript)===null||i===void 0?void 0:i.src;return o?o===e.name:n==="t.contentsquare.net"});csArray.prototype.forEach.call(t,e=>{if(e.transferSize===0)return;let i=e.responseEnd-e.responseStart,n=e.transferSize;i>=0&&q.counters.downloadTime.push(i),n>=0&&q.counters.transferSize.push(n)}),q.counters.downloadTime.count>0&&q.counters.downloadTime.flush(),q.counters.transferSize.count>0&&q.counters.transferSize.flush()}Pm(){q.counters.blockingTime.flush(),q.counters.inpContribution.flush()}onBeforeArtificialPageView(){this.Pm(),this.bo&&csClearTimeout(this.bo),this.Fs.stopInterval(),this.To=!0}onBeforeNaturalPageView(){this.Pm()}onAfterNaturalPageView(t){t===bs.Natural?(this.Fs.flush("boot"),this.Fs.startInterval()):(this.bo&&csClearTimeout(this.bo),this.Fs.stopInterval(),this.To=!0)}onInitialDomStart(){this.To||this.Fs.stopInterval()}onInitialDomDone(){this.To||(this.To=!0,this.Fs.flush("initial-dom"),this.bo=window.csSetTimeout(()=>{this.Fs.flush("post-initial-dom"),this.Fs.startInterval()},5e3))}onOptout(){this.Fs.clear()}}return s})(),XS=(()=>{let s;return function(r){r.COMPRESSION_DISABLED="compressionDisabled"}(s||(s={})),s})(),KS=(()=>{class s{constructor(){}static init(t){(!this.Mu||t!==void 0)&&this.initFlags(t)}static initFlags(t=document.cookie){var e;let i=(e=/_cs_debug=((\w|\.|\:|=)+)/g.exec(t))===null||e===void 0?void 0:e[1];if(this.Mu=new Map,i){let n=csString.prototype.split.call(i,".");for(let o=0;o<n.length;o++){let[c,l]=csString.prototype.split.call(n[o],"=");this.Mu.set(c,l||"true")}}}static getBoolean(t){let e=this.getString(t);return e!=null&&e!=="false"&&parseInt(e)!==0}static getString(t){var e;return this.init(),(e=this.Mu)===null||e===void 0?void 0:e.get(t)}static isCompressionEnabled(){return!this.getBoolean(XS.COMPRESSION_DISABLED)}static Log(t){return(e,i,n)=>{var o;let c=i.toString(),l=`${(o=e.constructor)===null||o===void 0?void 0:o.name}.${c}`,h=n.value;JS(s.getString("debugLog"),t)&&(n.value=function(...d){return console.log(l,...d),h.bind(this)(...d)})}}}return s})();function JS(s,r){var t;return s==null?!1:s===r||!!(!((t=csString.prototype.match.call(s,new csRegExp("(^|,)("+r+")(,|$)")))===null||t===void 0)&&t.length)}var QS=(()=>{class s{constructor(t){this.Qb=t,this.Om=[],this.Du={},this.Zb=0}static create(i){return Q(this,arguments,function*(t,e={}){let n=new s(t),o;return csArray.prototype.forEach.call(Object.entries(e),([c,l])=>{e[c]=l,n.register(l)}),yield n.Ur().catch(c=>{ht.warn("Failed to start worker: "+c.toString()),o=new t}),new Proxy(n,{get(c,l){return l==="__worker"?n.we:t.prototype[l]instanceof Function?(...h)=>o?Promise.resolve(o[l](...h)):n.Nm(l,h):o?Promise.resolve(o[l]):n.Nm(l,[])}})})}Nm(t,e){let i=++this.Zb;return new Promise((n,o)=>{this.Du[i]=(c,l)=>{delete this.Du[i],c?o(c):n(l)},this.we.postMessage({id:i,command:t,params:e})})}register(t){csArray.prototype.push.call(this.Om,t.toString())}Ur(){try{let t=zc.toString()+`
`+csArray.prototype.join.call(this.Om,`
`)+`

const klass = (${this.Qb.toString()});

${zc.name}()`,e=new Blob([t],{type:"application/javascript"}),i=csURL.createObjectURL(e);this.we=new Worker(i),this.we.addEventListener("message",n=>{var o,c,l,h,d;if(n.data!=="ping"){if(!((o=n.data)===null||o===void 0)&&o.critical||!n.data.id){ht.error("Worker error:",(l=(c=n.data)===null||c===void 0?void 0:c.critical)!==null&&l!==void 0?l:"No ID");return}(d=(h=this.Du)[n.data.id])===null||d===void 0||d.call(h,n.data.error,n.data.result)}})}catch(t){return Promise.reject(t)}return new Promise((t,e)=>{this.we.onerror=i=>e(new Error(i.message)),this.we.onmessage=()=>{this.we.onmessage=this.we.onerror=null,t()}})}}return s})();function zc(){let s=new klass;self.postMessage("ping"),self.onmessage=r=>{var t,e,i;if(!(!((t=r.data)===null||t===void 0)&&t.command))return self.postMessage({critical:"Invalid command",id:(e=r.data)===null||e===void 0?void 0:e.id,command:(i=r.data)===null||i===void 0?void 0:i.command});Promise.resolve().then(()=>{let n=s[r.data.command];return typeof n=="function"?n.apply(s,r.data.params):n}).then(n=>{var o;self.postMessage({result:n,id:r.data.id,command:(o=r.data)===null||o===void 0?void 0:o.command})},n=>{var o,c;self.postMessage({error:n,id:(o=r.data)===null||o===void 0?void 0:o.id,command:(c=r.data)===null||c===void 0?void 0:c.command})})}}function vo(){function i(a){let f=a.length;for(;--f>=0;)a[f]=0}let n=0,o=1,c=2,l=3,h=258,d=29,p=256,y=p+1+d,m=30,v=19,b=2*y+1,C=15,_=16,T=7,x=256,O=16,w=17,H=18,$=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),tt=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),It=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Gt=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ee=512,S=new Array((y+2)*2);i(S);let V=new Array(m*2);i(V);let U=new Array(ee);i(U);let G=new Array(h-l+1);i(G);let mt=new Array(d);i(mt);let Mt=new Array(m);i(Mt);function be(a,f,g,E,u){this.static_tree=a,this.extra_bits=f,this.extra_base=g,this.elems=E,this.max_length=u,this.has_stree=a&&a.length}let ms,js,Hs;function Ue(a,f){this.dyn_tree=a,this.max_code=0,this.stat_desc=f}let je=a=>a<256?U[a]:U[256+(a>>>7)],ce=(a,f)=>{a.pending_buf[a.pending++]=f&255,a.pending_buf[a.pending++]=f>>>8&255},Dt=(a,f,g)=>{a.bi_valid>_-g?(a.bi_buf|=f<<a.bi_valid&65535,ce(a,a.bi_buf),a.bi_buf=f>>_-a.bi_valid,a.bi_valid+=g-_):(a.bi_buf|=f<<a.bi_valid&65535,a.bi_valid+=g)},se=(a,f,g)=>{Dt(a,g[f*2],g[f*2+1])},Gi=(a,f)=>{let g=0;do g|=a&1,a>>>=1,g<<=1;while(--f>0);return g>>>1},Gr=a=>{a.bi_valid===16?(ce(a,a.bi_buf),a.bi_buf=0,a.bi_valid=0):a.bi_valid>=8&&(a.pending_buf[a.pending++]=a.bi_buf&255,a.bi_buf>>=8,a.bi_valid-=8)},qr=(a,f)=>{let g=f.dyn_tree,E=f.max_code,u=f.stat_desc.static_tree,R=f.stat_desc.has_stree,A=f.stat_desc.extra_bits,P=f.stat_desc.extra_base,st=f.stat_desc.max_length,z,Xt,Ye,ut,_s,$s,ar=0;for(ut=0;ut<=C;ut++)a.bl_count[ut]=0;for(g[a.heap[a.heap_max]*2+1]=0,z=a.heap_max+1;z<b;z++)Xt=a.heap[z],ut=g[g[Xt*2+1]*2+1]+1,ut>st&&(ut=st,ar++),g[Xt*2+1]=ut,!(Xt>E)&&(a.bl_count[ut]++,_s=0,Xt>=P&&(_s=A[Xt-P]),$s=g[Xt*2],a.opt_len+=$s*(ut+_s),R&&(a.static_len+=$s*(u[Xt*2+1]+_s)));if(ar!==0){do{for(ut=st-1;a.bl_count[ut]===0;)ut--;a.bl_count[ut]--,a.bl_count[ut+1]+=2,a.bl_count[st]--,ar-=2}while(ar>0);for(ut=st;ut!==0;ut--)for(Xt=a.bl_count[ut];Xt!==0;)Ye=a.heap[--z],!(Ye>E)&&(g[Ye*2+1]!==ut&&(a.opt_len+=(ut-g[Ye*2+1])*g[Ye*2],g[Ye*2+1]=ut),Xt--)}},qi=(a,f,g)=>{let E=new Array(C+1),u=0,R,A;for(R=1;R<=C;R++)E[R]=u=u+g[R-1]<<1;for(A=0;A<=f;A++){let P=a[A*2+1];P!==0&&(a[A*2]=Gi(E[P]++,P))}},Wr=()=>{let a,f,g,E,u,R=new Array(C+1);for(g=0,E=0;E<d-1;E++)for(mt[E]=g,a=0;a<1<<$[E];a++)G[g++]=E;for(G[g-1]=E,u=0,E=0;E<16;E++)for(Mt[E]=u,a=0;a<1<<tt[E];a++)U[u++]=E;for(u>>=7;E<m;E++)for(Mt[E]=u<<7,a=0;a<1<<tt[E]-7;a++)U[256+u++]=E;for(f=0;f<=C;f++)R[f]=0;for(a=0;a<=143;)S[a*2+1]=8,a++,R[8]++;for(;a<=255;)S[a*2+1]=9,a++,R[9]++;for(;a<=279;)S[a*2+1]=7,a++,R[7]++;for(;a<=287;)S[a*2+1]=8,a++,R[8]++;for(qi(S,y+1,R),a=0;a<m;a++)V[a*2+1]=5,V[a*2]=Gi(a,5);ms=new be(S,$,p+1,y,C),js=new be(V,tt,0,m,C),Hs=new be(new Array(0),It,0,v,T)},Wi=a=>{let f;for(f=0;f<y;f++)a.dyn_ltree[f*2]=0;for(f=0;f<m;f++)a.dyn_dtree[f*2]=0;for(f=0;f<v;f++)a.bl_tree[f*2]=0;a.dyn_ltree[x*2]=1,a.opt_len=a.static_len=0,a.last_lit=a.matches=0},Yi=a=>{a.bi_valid>8?ce(a,a.bi_buf):a.bi_valid>0&&(a.pending_buf[a.pending++]=a.bi_buf),a.bi_buf=0,a.bi_valid=0},Xi=(a,f,g,E)=>{Yi(a),E&&(ce(a,g),ce(a,~g)),a.pending_buf.set(a.window.subarray(f,f+g),a.pending),a.pending+=g},Yr=(a,f,g,E)=>{let u=f*2,R=g*2;return a[u]<a[R]||a[u]===a[R]&&E[f]<=E[g]},Ki=(a,f,g)=>{let E=a.heap[g],u=g<<1;for(;u<=a.heap_len&&(u<a.heap_len&&Yr(f,a.heap[u+1],a.heap[u],a.depth)&&u++,!Yr(f,E,a.heap[u],a.depth));)a.heap[g]=a.heap[u],g=u,u<<=1;a.heap[g]=E},Xr=(a,f,g)=>{let E,u,R=0,A,P;if(a.last_lit!==0)do E=a.pending_buf[a.d_buf+R*2]<<8|a.pending_buf[a.d_buf+R*2+1],u=a.pending_buf[a.l_buf+R],R++,E===0?se(a,u,f):(A=G[u],se(a,A+p+1,f),P=$[A],P!==0&&(u-=mt[A],Dt(a,u,P)),E--,A=je(E),se(a,A,g),P=tt[A],P!==0&&(E-=Mt[A],Dt(a,E,P)));while(R<a.last_lit);se(a,x,f)},Ji=(a,f)=>{let g=f.dyn_tree,E=f.stat_desc.static_tree,u=f.stat_desc.has_stree,R=f.stat_desc.elems,A,P,st=-1,z;for(a.heap_len=0,a.heap_max=b,A=0;A<R;A++)g[A*2]!==0?(a.heap[++a.heap_len]=st=A,a.depth[A]=0):g[A*2+1]=0;for(;a.heap_len<2;)z=a.heap[++a.heap_len]=st<2?++st:0,g[z*2]=1,a.depth[z]=0,a.opt_len--,u&&(a.static_len-=E[z*2+1]);for(f.max_code=st,A=a.heap_len>>1;A>=1;A--)Ki(a,g,A);z=R;do A=a.heap[1],a.heap[1]=a.heap[a.heap_len--],Ki(a,g,1),P=a.heap[1],a.heap[--a.heap_max]=A,a.heap[--a.heap_max]=P,g[z*2]=g[A*2]+g[P*2],a.depth[z]=(a.depth[A]>=a.depth[P]?a.depth[A]:a.depth[P])+1,g[A*2+1]=g[P*2+1]=z,a.heap[1]=z++,Ki(a,g,1);while(a.heap_len>=2);a.heap[--a.heap_max]=a.heap[1],qr(a,f),qi(g,st,a.bl_count)},Kr=(a,f,g)=>{let E,u=-1,R,A=f[0*2+1],P=0,st=7,z=4;for(A===0&&(st=138,z=3),f[(g+1)*2+1]=65535,E=0;E<=g;E++)R=A,A=f[(E+1)*2+1],!(++P<st&&R===A)&&(P<z?a.bl_tree[R*2]+=P:R!==0?(R!==u&&a.bl_tree[R*2]++,a.bl_tree[O*2]++):P<=10?a.bl_tree[w*2]++:a.bl_tree[H*2]++,P=0,u=R,A===0?(st=138,z=3):R===A?(st=6,z=3):(st=7,z=4))},la=(a,f,g)=>{let E,u=-1,R,A=f[0*2+1],P=0,st=7,z=4;for(A===0&&(st=138,z=3),E=0;E<=g;E++)if(R=A,A=f[(E+1)*2+1],!(++P<st&&R===A)){if(P<z)do se(a,R,a.bl_tree);while(--P!==0);else R!==0?(R!==u&&(se(a,R,a.bl_tree),P--),se(a,O,a.bl_tree),Dt(a,P-3,2)):P<=10?(se(a,w,a.bl_tree),Dt(a,P-3,3)):(se(a,H,a.bl_tree),Dt(a,P-11,7));P=0,u=R,A===0?(st=138,z=3):R===A?(st=6,z=3):(st=7,z=4)}},Lh=a=>{let f;for(Kr(a,a.dyn_ltree,a.l_desc.max_code),Kr(a,a.dyn_dtree,a.d_desc.max_code),Ji(a,a.bl_desc),f=v-1;f>=3&&a.bl_tree[Gt[f]*2+1]===0;f--);return a.opt_len+=3*(f+1)+5+5+4,f},Vh=(a,f,g,E)=>{let u;for(Dt(a,f-257,5),Dt(a,g-1,5),Dt(a,E-4,4),u=0;u<E;u++)Dt(a,a.bl_tree[Gt[u]*2+1],3);la(a,a.dyn_ltree,f-1),la(a,a.dyn_dtree,g-1)},Uh=a=>{let f=4093624447,g;for(g=0;g<=31;g++,f>>>=1)if(f&1&&a.dyn_ltree[g*2]!==0)return 0;if(a.dyn_ltree[9*2]!==0||a.dyn_ltree[10*2]!==0||a.dyn_ltree[13*2]!==0)return 1;for(g=32;g<p;g++)if(a.dyn_ltree[g*2]!==0)return 1;return 0},ha=!1,jh=a=>{ha||(Wr(),ha=!0),a.l_desc=new Ue(a.dyn_ltree,ms),a.d_desc=new Ue(a.dyn_dtree,js),a.bl_desc=new Ue(a.bl_tree,Hs),a.bi_buf=0,a.bi_valid=0,Wi(a)},ua=(a,f,g,E)=>{Dt(a,(n<<1)+(E?1:0),3),Xi(a,f,g,!0)},Hh=a=>{Dt(a,o<<1,3),se(a,x,S),Gr(a)},Bh=(a,f,g,E)=>{let u,R,A=0;a.level>0?(a.strm.data_type===2&&(a.strm.data_type=Uh(a)),Ji(a,a.l_desc),Ji(a,a.d_desc),A=Lh(a),u=a.opt_len+3+7>>>3,R=a.static_len+3+7>>>3,R<=u&&(u=R)):u=R=g+5,g+4<=u&&f!==-1?ua(a,f,g,E):a.strategy===4||R===u?(Dt(a,(o<<1)+(E?1:0),3),Xr(a,S,V)):(Dt(a,(c<<1)+(E?1:0),3),Vh(a,a.l_desc.max_code+1,a.d_desc.max_code+1,A+1),Xr(a,a.dyn_ltree,a.dyn_dtree)),Wi(a),E&&Yi(a)},Fh=(a,f,g)=>(a.pending_buf[a.d_buf+a.last_lit*2]=f>>>8&255,a.pending_buf[a.d_buf+a.last_lit*2+1]=f&255,a.pending_buf[a.l_buf+a.last_lit]=g&255,a.last_lit++,f===0?a.dyn_ltree[g*2]++:(a.matches++,f--,a.dyn_ltree[(G[g]+p+1)*2]++,a.dyn_dtree[je(f)*2]++),a.last_lit===a.lit_bufsize-1);var $h=jh,zh=ua,Gh=Bh,qh=Fh,Wh=Hh,Yh={_tr_init:$h,_tr_stored_block:zh,_tr_flush_block:Gh,_tr_tally:qh,_tr_align:Wh},da=(a,f,g,E)=>{let u=a&65535|0,R=a>>>16&65535|0,A=0;for(;g!==0;){A=g>2e3?2e3:g,g-=A;do u=u+f[E++]|0,R=R+u|0;while(--A);u%=65521,R%=65521}return u|R<<16|0};let Xh=()=>{let a,f=[];for(var g=0;g<256;g++){a=g;for(var E=0;E<8;E++)a=a&1?3988292384^a>>>1:a>>>1;f[g]=a}return f},Kh=new Uint32Array(Xh());var He=(a,f,g,E)=>{let u=Kh,R=E+g;a^=-1;for(let A=E;A<R;A++)a=a>>>8^u[(a^f[A])&255];return a^-1},Qi={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},fa={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};let{_tr_init:Jh,_tr_stored_block:Qh,_tr_flush_block:Zh,_tr_tally:Be,_tr_align:tu}=Yh,{Z_NO_FLUSH:ys,Z_PARTIAL_FLUSH:eu,Z_FULL_FLUSH:su,Z_FINISH:Fe,Z_BLOCK:pa,Z_OK:pe,Z_STREAM_END:ga,Z_STREAM_ERROR:ie,Z_DATA_ERROR:iu,Z_BUF_ERROR:Jr,Z_DEFAULT_COMPRESSION:ru,Z_FILTERED:nu,Z_HUFFMAN_ONLY:Zi,Z_RLE:ou,Z_FIXED:au,Z_DEFAULT_STRATEGY:cu,Z_UNKNOWN:lu,Z_DEFLATED:tr}=fa,hu=9,uu=15,du=8,Qr=256+1+29,fu=30,pu=19,gu=2*Qr+1,mu=15,et=3,$e=258,le=$e+et+1,yu=32,er=42,Zr=69,sr=73,ir=91,rr=103,Es=113,hi=666,bt=1,ui=2,vs=3,Bs=4,Eu=3,ze=(a,f)=>(a.msg=Qi[f],f),ma=a=>(a<<1)-(a>4?9:0),Ge=a=>{let f=a.length;for(;--f>=0;)a[f]=0},qe=(a,f,g)=>(f<<a.hash_shift^g)&a.hash_mask,We=a=>{let f=a.state,g=f.pending;g>a.avail_out&&(g=a.avail_out),g!==0&&(a.output.set(f.pending_buf.subarray(f.pending_out,f.pending_out+g),a.next_out),a.next_out+=g,f.pending_out+=g,a.total_out+=g,a.avail_out-=g,f.pending-=g,f.pending===0&&(f.pending_out=0))},kt=(a,f)=>{Zh(a,a.block_start>=0?a.block_start:-1,a.strstart-a.block_start,f),a.block_start=a.strstart,We(a.strm)},nt=(a,f)=>{a.pending_buf[a.pending++]=f},di=(a,f)=>{a.pending_buf[a.pending++]=f>>>8&255,a.pending_buf[a.pending++]=f&255},vu=(a,f,g,E)=>{let u=a.avail_in;return u>E&&(u=E),u===0?0:(a.avail_in-=u,f.set(a.input.subarray(a.next_in,a.next_in+u),g),a.state.wrap===1?a.adler=da(a.adler,f,u,g):a.state.wrap===2&&(a.adler=He(a.adler,f,u,g)),a.next_in+=u,a.total_in+=u,u)},ya=(a,f)=>{let g=a.max_chain_length,E=a.strstart,u,R,A=a.prev_length,P=a.nice_match,st=a.strstart>a.w_size-le?a.strstart-(a.w_size-le):0,z=a.window,Xt=a.w_mask,Ye=a.prev,ut=a.strstart+$e,_s=z[E+A-1],$s=z[E+A];a.prev_length>=a.good_match&&(g>>=2),P>a.lookahead&&(P=a.lookahead);do if(u=f,!(z[u+A]!==$s||z[u+A-1]!==_s||z[u]!==z[E]||z[++u]!==z[E+1])){E+=2,u++;do;while(z[++E]===z[++u]&&z[++E]===z[++u]&&z[++E]===z[++u]&&z[++E]===z[++u]&&z[++E]===z[++u]&&z[++E]===z[++u]&&z[++E]===z[++u]&&z[++E]===z[++u]&&E<ut);if(R=$e-(ut-E),E=ut-$e,R>A){if(a.match_start=f,A=R,R>=P)break;_s=z[E+A-1],$s=z[E+A]}}while((f=Ye[f&Xt])>st&&--g!==0);return A<=a.lookahead?A:a.lookahead},Ss=a=>{let f=a.w_size,g,E,u,R,A;do{if(R=a.window_size-a.lookahead-a.strstart,a.strstart>=f+(f-le)){a.window.set(a.window.subarray(f,f+f),0),a.match_start-=f,a.strstart-=f,a.block_start-=f,E=a.hash_size,g=E;do u=a.head[--g],a.head[g]=u>=f?u-f:0;while(--E);E=f,g=E;do u=a.prev[--g],a.prev[g]=u>=f?u-f:0;while(--E);R+=f}if(a.strm.avail_in===0)break;if(E=vu(a.strm,a.window,a.strstart+a.lookahead,R),a.lookahead+=E,a.lookahead+a.insert>=et)for(A=a.strstart-a.insert,a.ins_h=a.window[A],a.ins_h=qe(a,a.ins_h,a.window[A+1]);a.insert&&(a.ins_h=qe(a,a.ins_h,a.window[A+et-1]),a.prev[A&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=A,A++,a.insert--,!(a.lookahead+a.insert<et)););}while(a.lookahead<le&&a.strm.avail_in!==0)},Su=(a,f)=>{let g=65535;for(g>a.pending_buf_size-5&&(g=a.pending_buf_size-5);;){if(a.lookahead<=1){if(Ss(a),a.lookahead===0&&f===ys)return bt;if(a.lookahead===0)break}a.strstart+=a.lookahead,a.lookahead=0;let E=a.block_start+g;if((a.strstart===0||a.strstart>=E)&&(a.lookahead=a.strstart-E,a.strstart=E,kt(a,!1),a.strm.avail_out===0)||a.strstart-a.block_start>=a.w_size-le&&(kt(a,!1),a.strm.avail_out===0))return bt}return a.insert=0,f===Fe?(kt(a,!0),a.strm.avail_out===0?vs:Bs):(a.strstart>a.block_start&&(kt(a,!1),a.strm.avail_out===0),bt)},tn=(a,f)=>{let g,E;for(;;){if(a.lookahead<le){if(Ss(a),a.lookahead<le&&f===ys)return bt;if(a.lookahead===0)break}if(g=0,a.lookahead>=et&&(a.ins_h=qe(a,a.ins_h,a.window[a.strstart+et-1]),g=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),g!==0&&a.strstart-g<=a.w_size-le&&(a.match_length=ya(a,g)),a.match_length>=et)if(E=Be(a,a.strstart-a.match_start,a.match_length-et),a.lookahead-=a.match_length,a.match_length<=a.max_lazy_match&&a.lookahead>=et){a.match_length--;do a.strstart++,a.ins_h=qe(a,a.ins_h,a.window[a.strstart+et-1]),g=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart;while(--a.match_length!==0);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=qe(a,a.ins_h,a.window[a.strstart+1]);else E=Be(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(E&&(kt(a,!1),a.strm.avail_out===0))return bt}return a.insert=a.strstart<et-1?a.strstart:et-1,f===Fe?(kt(a,!0),a.strm.avail_out===0?vs:Bs):a.last_lit&&(kt(a,!1),a.strm.avail_out===0)?bt:ui},Fs=(a,f)=>{let g,E,u;for(;;){if(a.lookahead<le){if(Ss(a),a.lookahead<le&&f===ys)return bt;if(a.lookahead===0)break}if(g=0,a.lookahead>=et&&(a.ins_h=qe(a,a.ins_h,a.window[a.strstart+et-1]),g=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),a.prev_length=a.match_length,a.prev_match=a.match_start,a.match_length=et-1,g!==0&&a.prev_length<a.max_lazy_match&&a.strstart-g<=a.w_size-le&&(a.match_length=ya(a,g),a.match_length<=5&&(a.strategy===nu||a.match_length===et&&a.strstart-a.match_start>4096)&&(a.match_length=et-1)),a.prev_length>=et&&a.match_length<=a.prev_length){u=a.strstart+a.lookahead-et,E=Be(a,a.strstart-1-a.prev_match,a.prev_length-et),a.lookahead-=a.prev_length-1,a.prev_length-=2;do++a.strstart<=u&&(a.ins_h=qe(a,a.ins_h,a.window[a.strstart+et-1]),g=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);while(--a.prev_length!==0);if(a.match_available=0,a.match_length=et-1,a.strstart++,E&&(kt(a,!1),a.strm.avail_out===0))return bt}else if(a.match_available){if(E=Be(a,0,a.window[a.strstart-1]),E&&kt(a,!1),a.strstart++,a.lookahead--,a.strm.avail_out===0)return bt}else a.match_available=1,a.strstart++,a.lookahead--}return a.match_available&&(E=Be(a,0,a.window[a.strstart-1]),a.match_available=0),a.insert=a.strstart<et-1?a.strstart:et-1,f===Fe?(kt(a,!0),a.strm.avail_out===0?vs:Bs):a.last_lit&&(kt(a,!1),a.strm.avail_out===0)?bt:ui},_u=(a,f)=>{let g,E,u,R,A=a.window;for(;;){if(a.lookahead<=$e){if(Ss(a),a.lookahead<=$e&&f===ys)return bt;if(a.lookahead===0)break}if(a.match_length=0,a.lookahead>=et&&a.strstart>0&&(u=a.strstart-1,E=A[u],E===A[++u]&&E===A[++u]&&E===A[++u])){R=a.strstart+$e;do;while(E===A[++u]&&E===A[++u]&&E===A[++u]&&E===A[++u]&&E===A[++u]&&E===A[++u]&&E===A[++u]&&E===A[++u]&&u<R);a.match_length=$e-(R-u),a.match_length>a.lookahead&&(a.match_length=a.lookahead)}if(a.match_length>=et?(g=Be(a,1,a.match_length-et),a.lookahead-=a.match_length,a.strstart+=a.match_length,a.match_length=0):(g=Be(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++),g&&(kt(a,!1),a.strm.avail_out===0))return bt}return a.insert=0,f===Fe?(kt(a,!0),a.strm.avail_out===0?vs:Bs):a.last_lit&&(kt(a,!1),a.strm.avail_out===0)?bt:ui},wu=(a,f)=>{let g;for(;;){if(a.lookahead===0&&(Ss(a),a.lookahead===0)){if(f===ys)return bt;break}if(a.match_length=0,g=Be(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++,g&&(kt(a,!1),a.strm.avail_out===0))return bt}return a.insert=0,f===Fe?(kt(a,!0),a.strm.avail_out===0?vs:Bs):a.last_lit&&(kt(a,!1),a.strm.avail_out===0)?bt:ui};function ge(a,f,g,E,u){this.good_length=a,this.max_lazy=f,this.nice_length=g,this.max_chain=E,this.func=u}let fi=[new ge(0,0,0,0,Su),new ge(4,4,8,4,tn),new ge(4,5,16,8,tn),new ge(4,6,32,32,tn),new ge(4,4,16,16,Fs),new ge(8,16,32,32,Fs),new ge(8,16,128,128,Fs),new ge(8,32,128,256,Fs),new ge(32,128,258,1024,Fs),new ge(32,258,258,4096,Fs)],Au=a=>{a.window_size=2*a.w_size,Ge(a.head),a.max_lazy_match=fi[a.level].max_lazy,a.good_match=fi[a.level].good_length,a.nice_match=fi[a.level].nice_length,a.max_chain_length=fi[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=et-1,a.match_available=0,a.ins_h=0};function Tu(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=tr,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(gu*2),this.dyn_dtree=new Uint16Array((2*fu+1)*2),this.bl_tree=new Uint16Array((2*pu+1)*2),Ge(this.dyn_ltree),Ge(this.dyn_dtree),Ge(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(mu+1),this.heap=new Uint16Array(2*Qr+1),Ge(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*Qr+1),Ge(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}let Ea=a=>{if(!a||!a.state)return ze(a,ie);a.total_in=a.total_out=0,a.data_type=lu;let f=a.state;return f.pending=0,f.pending_out=0,f.wrap<0&&(f.wrap=-f.wrap),f.status=f.wrap?er:Es,a.adler=f.wrap===2?0:1,f.last_flush=ys,Jh(f),pe},va=a=>{let f=Ea(a);return f===pe&&Au(a.state),f},bu=(a,f)=>!a||!a.state||a.state.wrap!==2?ie:(a.state.gzhead=f,pe),Sa=(a,f,g,E,u,R)=>{if(!a)return ie;let A=1;if(f===ru&&(f=6),E<0?(A=0,E=-E):E>15&&(A=2,E-=16),u<1||u>hu||g!==tr||E<8||E>15||f<0||f>9||R<0||R>au)return ze(a,ie);E===8&&(E=9);let P=new Tu;return a.state=P,P.strm=a,P.wrap=A,P.gzhead=null,P.w_bits=E,P.w_size=1<<P.w_bits,P.w_mask=P.w_size-1,P.hash_bits=u+7,P.hash_size=1<<P.hash_bits,P.hash_mask=P.hash_size-1,P.hash_shift=~~((P.hash_bits+et-1)/et),P.window=new Uint8Array(P.w_size*2),P.head=new Uint16Array(P.hash_size),P.prev=new Uint16Array(P.w_size),P.lit_bufsize=1<<u+6,P.pending_buf_size=P.lit_bufsize*4,P.pending_buf=new Uint8Array(P.pending_buf_size),P.d_buf=1*P.lit_bufsize,P.l_buf=3*P.lit_bufsize,P.level=f,P.strategy=R,P.method=g,va(a)},Ru=(a,f)=>Sa(a,f,tr,uu,du,cu),Cu=(a,f)=>{let g,E;if(!a||!a.state||f>pa||f<0)return a?ze(a,ie):ie;let u=a.state;if(!a.output||!a.input&&a.avail_in!==0||u.status===hi&&f!==Fe)return ze(a,a.avail_out===0?Jr:ie);u.strm=a;let R=u.last_flush;if(u.last_flush=f,u.status===er)if(u.wrap===2)a.adler=0,nt(u,31),nt(u,139),nt(u,8),u.gzhead?(nt(u,(u.gzhead.text?1:0)+(u.gzhead.hcrc?2:0)+(u.gzhead.extra?4:0)+(u.gzhead.name?8:0)+(u.gzhead.comment?16:0)),nt(u,u.gzhead.time&255),nt(u,u.gzhead.time>>8&255),nt(u,u.gzhead.time>>16&255),nt(u,u.gzhead.time>>24&255),nt(u,u.level===9?2:u.strategy>=Zi||u.level<2?4:0),nt(u,u.gzhead.os&255),u.gzhead.extra&&u.gzhead.extra.length&&(nt(u,u.gzhead.extra.length&255),nt(u,u.gzhead.extra.length>>8&255)),u.gzhead.hcrc&&(a.adler=He(a.adler,u.pending_buf,u.pending,0)),u.gzindex=0,u.status=Zr):(nt(u,0),nt(u,0),nt(u,0),nt(u,0),nt(u,0),nt(u,u.level===9?2:u.strategy>=Zi||u.level<2?4:0),nt(u,Eu),u.status=Es);else{let A=tr+(u.w_bits-8<<4)<<8,P=-1;u.strategy>=Zi||u.level<2?P=0:u.level<6?P=1:u.level===6?P=2:P=3,A|=P<<6,u.strstart!==0&&(A|=yu),A+=31-A%31,u.status=Es,di(u,A),u.strstart!==0&&(di(u,a.adler>>>16),di(u,a.adler&65535)),a.adler=1}if(u.status===Zr)if(u.gzhead.extra){for(g=u.pending;u.gzindex<(u.gzhead.extra.length&65535)&&!(u.pending===u.pending_buf_size&&(u.gzhead.hcrc&&u.pending>g&&(a.adler=He(a.adler,u.pending_buf,u.pending-g,g)),We(a),g=u.pending,u.pending===u.pending_buf_size));)nt(u,u.gzhead.extra[u.gzindex]&255),u.gzindex++;u.gzhead.hcrc&&u.pending>g&&(a.adler=He(a.adler,u.pending_buf,u.pending-g,g)),u.gzindex===u.gzhead.extra.length&&(u.gzindex=0,u.status=sr)}else u.status=sr;if(u.status===sr)if(u.gzhead.name){g=u.pending;do{if(u.pending===u.pending_buf_size&&(u.gzhead.hcrc&&u.pending>g&&(a.adler=He(a.adler,u.pending_buf,u.pending-g,g)),We(a),g=u.pending,u.pending===u.pending_buf_size)){E=1;break}u.gzindex<u.gzhead.name.length?E=u.gzhead.name.charCodeAt(u.gzindex++)&255:E=0,nt(u,E)}while(E!==0);u.gzhead.hcrc&&u.pending>g&&(a.adler=He(a.adler,u.pending_buf,u.pending-g,g)),E===0&&(u.gzindex=0,u.status=ir)}else u.status=ir;if(u.status===ir)if(u.gzhead.comment){g=u.pending;do{if(u.pending===u.pending_buf_size&&(u.gzhead.hcrc&&u.pending>g&&(a.adler=He(a.adler,u.pending_buf,u.pending-g,g)),We(a),g=u.pending,u.pending===u.pending_buf_size)){E=1;break}u.gzindex<u.gzhead.comment.length?E=u.gzhead.comment.charCodeAt(u.gzindex++)&255:E=0,nt(u,E)}while(E!==0);u.gzhead.hcrc&&u.pending>g&&(a.adler=He(a.adler,u.pending_buf,u.pending-g,g)),E===0&&(u.status=rr)}else u.status=rr;if(u.status===rr&&(u.gzhead.hcrc?(u.pending+2>u.pending_buf_size&&We(a),u.pending+2<=u.pending_buf_size&&(nt(u,a.adler&255),nt(u,a.adler>>8&255),a.adler=0,u.status=Es)):u.status=Es),u.pending!==0){if(We(a),a.avail_out===0)return u.last_flush=-1,pe}else if(a.avail_in===0&&ma(f)<=ma(R)&&f!==Fe)return ze(a,Jr);if(u.status===hi&&a.avail_in!==0)return ze(a,Jr);if(a.avail_in!==0||u.lookahead!==0||f!==ys&&u.status!==hi){let A=u.strategy===Zi?wu(u,f):u.strategy===ou?_u(u,f):fi[u.level].func(u,f);if((A===vs||A===Bs)&&(u.status=hi),A===bt||A===vs)return a.avail_out===0&&(u.last_flush=-1),pe;if(A===ui&&(f===eu?tu(u):f!==pa&&(Qh(u,0,0,!1),f===su&&(Ge(u.head),u.lookahead===0&&(u.strstart=0,u.block_start=0,u.insert=0))),We(a),a.avail_out===0))return u.last_flush=-1,pe}return f!==Fe?pe:u.wrap<=0?ga:(u.wrap===2?(nt(u,a.adler&255),nt(u,a.adler>>8&255),nt(u,a.adler>>16&255),nt(u,a.adler>>24&255),nt(u,a.total_in&255),nt(u,a.total_in>>8&255),nt(u,a.total_in>>16&255),nt(u,a.total_in>>24&255)):(di(u,a.adler>>>16),di(u,a.adler&65535)),We(a),u.wrap>0&&(u.wrap=-u.wrap),u.pending!==0?pe:ga)},Iu=a=>{if(!a||!a.state)return ie;let f=a.state.status;return f!==er&&f!==Zr&&f!==sr&&f!==ir&&f!==rr&&f!==Es&&f!==hi?ze(a,ie):(a.state=null,f===Es?ze(a,iu):pe)},Pu=(a,f)=>{let g=f.length;if(!a||!a.state)return ie;let E=a.state,u=E.wrap;if(u===2||u===1&&E.status!==er||E.lookahead)return ie;if(u===1&&(a.adler=da(a.adler,f,g,0)),E.wrap=0,g>=E.w_size){u===0&&(Ge(E.head),E.strstart=0,E.block_start=0,E.insert=0);let st=new Uint8Array(E.w_size);st.set(f.subarray(g-E.w_size,g),0),f=st,g=E.w_size}let R=a.avail_in,A=a.next_in,P=a.input;for(a.avail_in=g,a.next_in=0,a.input=f,Ss(E);E.lookahead>=et;){let st=E.strstart,z=E.lookahead-(et-1);do E.ins_h=qe(E,E.ins_h,E.window[st+et-1]),E.prev[st&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=st,st++;while(--z);E.strstart=st,E.lookahead=et-1,Ss(E)}return E.strstart+=E.lookahead,E.block_start=E.strstart,E.insert=E.lookahead,E.lookahead=0,E.match_length=E.prev_length=et-1,E.match_available=0,a.next_in=A,a.input=P,a.avail_in=R,E.wrap=u,pe};var Ou=Ru,Nu=Sa,Mu=va,Du=Ea,ku=bu,xu=Cu,Lu=Iu,Vu=Pu,Uu="pako deflate (from Nodeca project)",pi={deflateInit:Ou,deflateInit2:Nu,deflateReset:Mu,deflateResetKeep:Du,deflateSetHeader:ku,deflate:xu,deflateEnd:Lu,deflateSetDictionary:Vu,deflateInfo:Uu};let ju=(a,f)=>Object.prototype.hasOwnProperty.call(a,f);var Hu=function(a){let f=Array.prototype.slice.call(arguments,1);for(;f.length;){let g=f.shift();if(g){if(typeof g!="object")throw new TypeError(g+"must be non-object");for(let E in g)ju(g,E)&&(a[E]=g[E])}}return a},Bu=a=>{let f=0;for(let E=0,u=a.length;E<u;E++)f+=a[E].length;let g=new Uint8Array(f);for(let E=0,u=0,R=a.length;E<R;E++){let A=a[E];g.set(A,u),u+=A.length}return g},_a={assign:Hu,flattenChunks:Bu};let wa=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(a){wa=!1}let gi=new Uint8Array(256);for(let a=0;a<256;a++)gi[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;gi[254]=gi[254]=1;var Fu=a=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(a);let f,g,E,u,R,A=a.length,P=0;for(u=0;u<A;u++)g=a.charCodeAt(u),(g&64512)===55296&&u+1<A&&(E=a.charCodeAt(u+1),(E&64512)===56320&&(g=65536+(g-55296<<10)+(E-56320),u++)),P+=g<128?1:g<2048?2:g<65536?3:4;for(f=new Uint8Array(P),R=0,u=0;R<P;u++)g=a.charCodeAt(u),(g&64512)===55296&&u+1<A&&(E=a.charCodeAt(u+1),(E&64512)===56320&&(g=65536+(g-55296<<10)+(E-56320),u++)),g<128?f[R++]=g:g<2048?(f[R++]=192|g>>>6,f[R++]=128|g&63):g<65536?(f[R++]=224|g>>>12,f[R++]=128|g>>>6&63,f[R++]=128|g&63):(f[R++]=240|g>>>18,f[R++]=128|g>>>12&63,f[R++]=128|g>>>6&63,f[R++]=128|g&63);return f};let Aa=(a,f=a.length)=>{if(f<65534&&a.subarray&&wa)return String.fromCharCode.apply(null,a.length===f?a:a.subarray(0,f));let g="";for(let E=0;E<f;E++)g+=String.fromCharCode(a[E]);return g};var $u=(a,f)=>{let g=f||a.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(a.subarray(0,f));let E,u,R=new Array(g*2);for(u=0,E=0;E<g;){let A=a[E++];if(A<128){R[u++]=A;continue}let P=gi[A];if(P>4){R[u++]=65533,E+=P-1;continue}for(A&=P===2?31:P===3?15:7;P>1&&E<g;)A=A<<6|a[E++]&63,P--;if(P>1){R[u++]=65533;continue}A<65536?R[u++]=A:(A-=65536,R[u++]=55296|A>>10&1023,R[u++]=56320|A&1023)}return Aa(R,u)},zu=(a,f)=>{f=f||a.length,f>a.length&&(f=a.length);let g=f-1;for(;g>=0&&(a[g]&192)===128;)g--;return g<0||g===0?f:g+gi[a[g]]>f?g:f},Ta={string2buf:Fu,buf2string:$u,utf8border:zu};function Gu(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var qu=Gu;let ba=Object.prototype.toString,{Z_NO_FLUSH:Wu,Z_SYNC_FLUSH:Yu,Z_FULL_FLUSH:Xu,Z_FINISH:Ku,Z_OK:nr,Z_STREAM_END:Ju,Z_DEFAULT_COMPRESSION:Qu,Z_DEFAULT_STRATEGY:Zu,Z_DEFLATED:td}=fa;function or(a){this.options=_a.assign({level:Qu,method:td,chunkSize:16384,windowBits:15,memLevel:8,strategy:Zu},a||{});let f=this.options;f.raw&&f.windowBits>0?f.windowBits=-f.windowBits:f.gzip&&f.windowBits>0&&f.windowBits<16&&(f.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new qu,this.strm.avail_out=0;let g=pi.deflateInit2(this.strm,f.level,f.method,f.windowBits,f.memLevel,f.strategy);if(g!==nr)throw new Error(Qi[g]);if(f.header&&pi.deflateSetHeader(this.strm,f.header),f.dictionary){let E;if(typeof f.dictionary=="string"?E=Ta.string2buf(f.dictionary):ba.call(f.dictionary)==="[object ArrayBuffer]"?E=new Uint8Array(f.dictionary):E=f.dictionary,g=pi.deflateSetDictionary(this.strm,E),g!==nr)throw new Error(Qi[g]);this._dict_set=!0}}or.prototype.push=function(a,f){let g=this.strm,E=this.options.chunkSize,u,R;if(this.ended)return!1;for(f===~~f?R=f:R=f===!0?Ku:Wu,typeof a=="string"?g.input=Ta.string2buf(a):ba.call(a)==="[object ArrayBuffer]"?g.input=new Uint8Array(a):g.input=a,g.next_in=0,g.avail_in=g.input.length;;){if(g.avail_out===0&&(g.output=new Uint8Array(E),g.next_out=0,g.avail_out=E),(R===Yu||R===Xu)&&g.avail_out<=6){this.onData(g.output.subarray(0,g.next_out)),g.avail_out=0;continue}if(u=pi.deflate(g,R),u===Ju)return g.next_out>0&&this.onData(g.output.subarray(0,g.next_out)),u=pi.deflateEnd(this.strm),this.onEnd(u),this.ended=!0,u===nr;if(g.avail_out===0){this.onData(g.output);continue}if(R>0&&g.next_out>0){this.onData(g.output.subarray(0,g.next_out)),g.avail_out=0;continue}if(g.avail_in===0)break}return!0},or.prototype.onData=function(a){this.chunks.push(a)},or.prototype.onEnd=function(a){a===nr&&(this.result=_a.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg};function ed(a,f){f=f||{};let g=new or(f);if(g.push(a,!0),g.err)throw g.msg||Qi[g.err];return g.result}function sd(a,f){return f=f||{},f.gzip=!0,ed(a,f)}return(a,f,g)=>{let E=sd(a);return f==="base64"?E=btoa(Aa(E)):E=E.buffer,g&&g(E),E}}var ZS=(()=>{class s extends fh{constructor(){super(),this.algorithm=$r.GZIP,this.t0=vo(),this.compress=(i,n,o)=>this.Mm.compress(i,n).then(o);let e=typeof CompressionStream!="undefined"&&!!self.CompressionStream?e_:t_;this.Mm=new e,QS.create(e,{getPakoCompressor:vo}).then(i=>{this.Mm=i})}compressSync(t,e){try{return this.t0(t,e)}catch(i){throw ht.warn(i),i}}}return s})(),t_=(()=>{class s{constructor(){this.e0=vo()}compress(t,e){return Promise.resolve(this.e0(t,e))}}return s})(),e_=(()=>{class s{s0(t){return new Promise(e=>{let i=new FileReader;i.onload=n=>e(n.target.result.split(",")[1]),i.readAsDataURL(new Blob([t]))})}compress(t,e){let i=new Response(t).body.pipeThrough(new CompressionStream("gzip")),n=new Response(i).arrayBuffer();return e==="base64"?n.then(o=>this.s0(o)):n}}return s})(),s_=(()=>{class s extends fh{constructor(){super(...arguments),this.algorithm=$r.UNCOMPRESSED,this.compress=(t,e,i)=>{i(this.compressSync(t,e))},this.compressSync=(t,e)=>t}}return s})(),Oh=(()=>{class s{static create(t=!0){return this.instance?this.instance:t&&!KS.isCompressionEnabled()?new s_:this.instance=new ZS}}return s})(),i_=s=>{let r=s*60*1e3;return`${Math.floor(csDate.now()/r)}`},r_=5e3,n_=(()=>{class s extends El{constructor(t,e,i){super(t,e),this.jr=null,this.i0=(i==null?void 0:i.type)||"json",this.Dm=i==null?void 0:i.cacheMinutes,this.Ro=i==null?void 0:i.timeout}onLoad(t){this.Hr=t}onError(t){this.Co=t}onTimeout(t,e){this.Zi=t,this.Ro=e}send(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,n=>n());let t=this.retrieveParameters();this.Jc(t);let e=Oi.toQuery(t),i=`${this.domainUri}${this.path?`/${this.path}`:""}?${e}`;this.r0(i,this.i0)}abort(){this.jr&&(this.jr.abort(),this.jr=null)}isInProgress(){return this.jr!==null}r0(t,e){var i;let n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType=e,n.onerror=()=>{var o;return(o=this.Co)===null||o===void 0?void 0:o.call(this,n)},n.ontimeout=()=>{var o;return(o=this.Zi)===null||o===void 0?void 0:o.call(this,n)},n.onload=()=>{var o,c;n.status>=200&&n.status<400?((o=this.Hr)===null||o===void 0||o.call(this,this.n0(n,e)?n.response:n.responseText),csArray.prototype.forEach.call(this.afterRequestCallbacks,l=>l())):(c=this.Co)===null||c===void 0||c.call(this,n)},n.onloadend=()=>{this.jr=null},n.timeout=(i=this.Ro)!==null&&i!==void 0?i:r_,this.jr=n,n.send()}n0(t,e){let i=t.getResponseHeader("Content-Type");return i===null?e==="json":csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(i),"json")>0}Jc(t){let e;this.Dm?e=`${i_(this.Dm)}`:e=csString.prototype.slice.call(`${Math.random()}`,2,8),t.r=e}}return s})(),So=(()=>{class s{constructor(t){var e;this.Xe={},this.ku={},this.km=i=>{for(let n of i){let{metadata:o,events:c}=n;this.send(c,o)}},this.Ha=t.endpoint,this.Io=t.compressionOpts,this.oe=t.recoveryStorage,this.mandatoryParameters=(e=t.mandatoryParameters)!==null&&e!==void 0?e:[],this.xu=t.contentType,this.worker=!!t.worker,this.oe&&this.oe.recover(this.km)}setQueryParams(t){Object.keys(t).forEach(e=>{this.Xe[e]=t[e]})}removeQueryParams(t){t?t.forEach(e=>{delete this.Xe[e]}):this.Xe={}}send(t,e){let i=e||j({},this.Xe),n=!("ct"in i),o=this.xu==="application/json"||typeof t!="string"&&!this.o0(t);"ct"in i||(!this.Io||!n?i.ct=$r.UNCOMPRESSED:i.ct=this.Io.compressionType);let c=o?JSON.stringify(t):t,l=Object.keys(i).map(d=>`${encodeURIComponent(d)}=${encodeURIComponent(i[d])}`).join("&"),h=`${this.Ha}?${l}`;if(rl(this.mandatoryParameters,d=>i[d]==null)){ht.warn(`[${this.worker?"WORKER":"MAIN"}] All mandatory parameters are not present on ${h}`);return}this.Io&&n&&typeof c=="string"?this.Io.compressor(c,this.Io.compressionOutputType,d=>this.xm(h,i,d)):this.xm(h,i,c)}onLoad(t){this.Hr=t}onError(t){this.Co=t}onTimeout(t,e){this.Zi=t,this.Ro=e}abort(){this.Lm&&this.Lm()}setRequestHeader(t,e){this.ku[t]=e}getQueryParams(){return this.Xe}o0(t){return t&&t.byteLength!==void 0}xm(t,e,i){let n=new XMLHttpRequest,o=Object.keys(e).map(c=>`${encodeURIComponent(c)}=${encodeURIComponent(e[c])}`).join("&");n.open("POST",t),this.xu&&n.setRequestHeader("Content-Type",this.xu),n.onload=()=>{if(this.oe&&this.oe.recover(this.km),this.Hr){let c={params:e,responseText:n.responseText,status:n.status};this.Hr(c)}},n.onerror=()=>{this.oe&&this.oe.save({key:o,metadata:e,events:i}),this.Co&&this.Co({params:e})},this.Ro&&this.Zi&&(n.timeout=this.Ro,n.ontimeout=()=>{this.Zi()}),this.Lm=()=>n.abort(),Object.keys(this.ku).forEach(c=>{n.setRequestHeader(c,this.ku[c])}),n.send(i)}}return s})(),Nh=(()=>{class s{constructor(t){this.Vm=t}create(t,e,i){let n=e?{compressor:this.Vm.compress,compressionOutputType:e,compressionType:this.Vm.algorithm}:void 0;return new So({endpoint:t,compressionOpts:n,recoveryStorage:i})}}return s})(),o_=(()=>{class s{setItem(t,e){window.localStorage.setItem(t,e)}getItem(t){return window.localStorage.getItem(t)}removeItem(t){window.localStorage.removeItem(t)}}return s})(),a_=(()=>{class s{constructor(t){this.Lu=t}start(){this.Lu.onEvent(t=>this.Q(t)),this.Lu.start()}stop(){this.Lu.stop()}Q(t){let e=`Content Security Policy error. Violated directive: ${t.violatedDirective} - Source file: ${t.sourceFile}`;B.warn(e)}}return s})(),c_=(()=>{class s{constructor(){this.Kt={boundElement:document,type:"securitypolicyviolation",listener:t=>this.securityPolicyViolationListener(t)}}start(){yt(this.Kt)}stop(){Et(this.Kt)}onEvent(t){this.j=t}a0(t){if(!t)return!1;let e=t.disposition;return I(t.sourceFile)&&csArray.prototype.some.call(s.c0,i=>csString.prototype.indexOf.call(t.sourceFile,i)>0)&&e!=="report"}securityPolicyViolationListener(t){this.a0(t)&&this.j({violatedDirective:t.violatedDirective,sourceFile:t.sourceFile})}}return s.c0=["contentsquare","cdnssl.clicktale.net"],F([N("Event handler type: securitypolicyviolation")],s.prototype,"securityPolicyViolationListener",null),s})(),l_=(()=>{class s{init(){this.Ec=new a_(new c_),this.Ec.start()}onOptout(){this.Ec.stop()}onArtificialPageViewEnd(t){t&&this.Ec.stop()}onAfterArtificialPageView(t){t&&this.Ec.start()}}return s})(),h_=(()=>{class s{constructor(t,e,i){this.E=t,this.R=e,this.w=i}grantReplayConsent(){if(!cs.isReplayConsentNeeded(this.E))return;let t=this.R.getSession();if(!t){this.R.grantReplayRecordingBeforeSessionStart();return}cs.isRecordingBlockedByConsent(t)&&(this.R.grantReplayRecording(t),this.w.emitAfterReplayRecordingConsentGranted())}withdrawReplayConsent(){if(!cs.isReplayConsentNeeded(this.E))return;let t=this.R.getSession();if(!t){this.R.withdrawnReplayRecordingBeforeSessionStart();return}cs.isRecordingWithDrawn(t)||(this.R.withdrawnReplayRecording(t),this.w.emitAfterReplayRecordingConsentWithdrawn())}}return s})(),u_=["replay:consent:unanonymized:granted","trackConsentGranted"],d_=["replay:consent:unanonymized:withdrawn","trackConsentWithdrawn"],f_=["replay:consent:startForSession:granted"],p_=["replay:consent:startForSession:withdrawn"],g_=(()=>{class s{constructor(t,e,i,n,o){this.E=t,this.S=e,this.It=i,this.R=n,this.w=o}init(){this.Um=new h_(this.E,this.R,this.w),this.It.setInitialConsent(),this.ut()}ut(){this.S.register(u_,()=>{this.It.grantReplayAnonymizationConsent()}),this.S.register(d_,()=>{this.It.withdrawReplayAnonymizationConsent()}),this.S.register(f_,()=>{this.Um.grantReplayConsent()}),this.S.register(p_,()=>{this.Um.withdrawReplayConsent()})}onOptout(){this.It.removeAllConsents()}onBeforeVisitorRenewal(){this.It.removeAllConsents()}onAfterVisitorRenewal(){this.It.setInitialConsent()}onAfterVisitorCleared(){this.It.setInitialConsent()}}return s})(),es="_cs_c",As=(()=>{let s;return function(r){r[r.NOT_REQUIRED=0]="NOT_REQUIRED",r[r.NOT_EXPRESSED=1]="NOT_EXPRESSED",r[r.GRANTED=2]="GRANTED",r[r.WITHDRAWN=3]="WITHDRAWN"}(s||(s={})),s})(),m_=(()=>{class s{constructor(t,e,i){this.E=t,this.M=e,this.mt=i}get(){let t;return this.E.cookielessTrackingEnabled?t=this.mt.getItem(es):t=this.M.get(es),t===null?t:Number(t)}set(t){this.E.cookielessTrackingEnabled?this.mt.setItem(es,csString(t)):this.M.set(es,csString(t),bo)}remove(){this.E.cookielessTrackingEnabled?this.mt.removeItem(es):this.M.delete(es)}handleSubdomainChange(){this.E.cookielessTrackingEnabled||(this.E.allowSubdomains?this.M.delete(es,Ur.CURRENT_DOMAIN):this.M.delete(es,this.M.getRootDomain()))}}return s})(),y_=(()=>{class s{constructor(t,e,i){this.E=t,this.ft=e,this.w=i}setInitialConsent(){let t=this.ft.get();(t===null||this.hasConsentRequiredChanged(t))&&this.setDefaultReplayAnonymization()}hasConsentRequiredChanged(t){let e=this.E.consentRequired;return e&&t===As.NOT_REQUIRED||!e&&t!==As.NOT_REQUIRED}handleSubdomainChange(){this.ft.handleSubdomainChange()}setDefaultReplayAnonymization(){let t=this.E.consentRequired?As.NOT_EXPRESSED:As.NOT_REQUIRED;this.ft.set(t)}grantReplayAnonymizationConsent(){this.E.consentRequired&&(this.ft.set(As.GRANTED),this.w.emitReplayUnanonymizationConsentGranted())}withdrawReplayAnonymizationConsent(){this.E.consentRequired&&(this.ft.set(As.WITHDRAWN),this.w.emitReplayUnanonymizationConsentWithdrawn())}removeAllConsents(){this.ft.remove()}isReplayUnanonymizedAllowedByConsent(){return!this.E.consentRequired||this.ft.get()===As.GRANTED}getRequestParameters(){return{uc:`${this.ft.get()}`}}}return s})();var E_=(()=>{class s{setItem(t,e){window.sessionStorage.setItem(t,e)}getItem(t){return window.sessionStorage.getItem(t)}removeItem(t){window.sessionStorage.removeItem(t)}}return s})();var Gc=512,qc=255,Mn={SESSION:["visit",2],PAGE:["page",3],NEXT_PAGE_ONLY:["nextPageOnly",4]},v_=(()=>{class s{constructor(t,e){this.D=t,this.ft=e,this.te={},this.$e={}}set(t,e,i,n){let o,c;if((At(t)||I(t))&&Number(t)>0&&vt(e)&&vt(i)&&!Se(e)&&!Se(i)&&this.u0(n)){let l=this.D.anonymizePII(csString(e)),h=this.D.anonymizePII(csString(i));if(o=[csString.prototype.slice.call(l,0,Gc),csString.prototype.slice.call(h,0,qc)],c=i!=="",!Z(n)||csArray.prototype.indexOf.call(Mn.SESSION,n)>=0){let d=this.getCustomVariablesSession();c?d[t]=o:delete d[t],this.setCustomVariableSession(d)}(!Z(n)||csArray.prototype.indexOf.call(Mn.PAGE,n)>=0)&&(c?this.te[t]=o:delete this.te[t]),Z(n)&&csArray.prototype.indexOf.call(Mn.NEXT_PAGE_ONLY,n)>=0&&(c?this.$e[t]=o:delete this.$e[t])}else throw new $t(Go[0])}getCustomVariablesSession(){let t=this.ft.get();if(!t)return{};let e=window.csJSON.parse(t);return e!==null&&Qs(e)?e:{}}setCustomVariableSession(t){this.ft.set(window.csJSON.stringify(t))}removeCustomVariablesSession(){this.ft.remove()}removeCustomVariablesPage(){this.te={}}getRequestParameters(){let t=this.getCustomVariablesSession();for(let i in this.$e)this.$e.hasOwnProperty(i)&&(this.te[i]=this.$e[i]);for(let i in this.te)this.te.hasOwnProperty(i)&&(t[i]=this.te[i]);if(window.csJSON.stringify(t).length<=2)return{};let e={cvars:this.Hm(t)};return this.hasCustomVariablesPage()&&(e.cvarp=this.getCustomVariablesPage()),e}deleteNextPageOnlyCustomVariables(){if(Object.keys(this.$e).length>0)for(let t in this.$e)this.$e[t]===this.te[t]&&(delete this.te[t],delete this.$e[t])}hasCustomVariablesPage(){return this.te&&!Hn(this.te)}getCustomVariablesPage(){return this.Hm(this.te)}Bm(t){for(let e in t)if(t.hasOwnProperty(e)){let i=parseInt(e,10),n=t[e],o=n[0],c=n[1];(!od(i,1,20)||o.length>Gc||c.length>qc)&&delete t[e]}}Hm(t){this.Bm(t);let e=Hn(t)?[]:t;return window.csJSON.stringify(e)}u0(t){return!Z(t)||I(t)||At(t)}getAllValidCustomVars(){let t=this.getCustomVariablesSession();for(let e in this.$e)this.$e.hasOwnProperty(e)&&(this.te[e]=this.$e[e]);for(let e in this.te)this.te.hasOwnProperty(e)&&(t[e]=this.te[e]);return this.Bm(t),t}}return s})(),S_=(()=>{class s{constructor(t,e,i,n){this.Ae=t,this.Po=e,this.Oo=i,this.It=n}init(){this.d0()}shouldMaskNonTextElements(){if(this.Ae.anonymisationMethod!==ws.replayRecordingMaskedUrlRegexRules)return!1;if(this.Ae.isSMB)return this.shouldUseAnonymization();let t=this.Oo.getMatchingRules(this.Po.getAnonymizedUrl());return csArray.prototype.some.call(t,e=>e.maskMedia)}shouldUseAnonymization(){if(this.It&&!this.It.isReplayUnanonymizedAllowedByConsent()){switch(this.Ae.anonymisationMethod){case null:case ws.replayRecordingUnmaskedUrlRegex:return!(this.Ae.replayRecordingUnmaskedUrlRegex&&this.Ae.replayRecordingUnmaskedUrlRegex.test(this.Po.getAnonymizedUrl()));case ws.replayRecordingUnmaskedUrlRegexRules:return!this.Oo.evaluateUrl(this.Po.getAnonymizedUrl())}return!0}else{switch(this.Ae.anonymisationMethod){case null:case ws.replayRecordingMaskedUrlRegex:return!!(this.Ae.replayRecordingMaskedUrlRegex&&this.Ae.replayRecordingMaskedUrlRegex.test(this.Po.getAnonymizedUrl()));case ws.replayRecordingMaskedUrlRegexRules:return this.Oo.evaluateUrl(this.Po.getAnonymizedUrl())}return!1}}d0(){this.Ae.anonymisationMethod===ws.replayRecordingMaskedUrlRegexRules&&this.Ae.replayRecordingMaskedUrlRegexRules?this.Oo.setRegexRules(this.Ae.replayRecordingMaskedUrlRegexRules):this.Ae.anonymisationMethod===ws.replayRecordingUnmaskedUrlRegexRules&&this.Ae.replayRecordingUnmaskedUrlRegexRules&&this.Oo.setRegexRules(this.Ae.replayRecordingUnmaskedUrlRegexRules)}}return s})();var __=(()=>{class s extends fe{constructor(t){super(),this.W=null,this.vc=null,this.U=null,this.ai=null,this.Fm=["value","checked","src","data","alt"],this.Sc={state:D.MaskedElementState.Child},this.p0=e=>{for(let i of e){if(D.isMaskedElement(i.target)||D.isMaskedElementChild(i.target))for(let n=0;n<i.addedNodes.length;n+=1){let o=i.addedNodes[n];D.isMaskedElement(o)||D.isMaskedElementChild(o)||pt(o)&&this.$m(o)}for(let n=0;n<i.removedNodes.length;n+=1){let o=i.removedNodes[n];lt.isConnected(o)||this.zm(o)}}},this.g0=t}setMaskedElementSettings(t){this.zs=t}startIdentifier(){this.isStarted||(this.isStarted=!0,this.onStart())}stopIdentifier(){return this.isStarted=!1,this.onStop()}start(){}stop(){}onStart(){var t,e,i,n;this.zs||(ht.error("maskedElementSettings not initialized","MaskedElementIdentifier.start"),this.zs={elementSelector:"",attrSelector:"",attrSelectors:[]});let{elementSelector:o,attrSelector:c,attrSelectors:l}=this.zs;(t=this.ai)!==null&&t!==void 0||(this.ai=this.m0()),o.length!==0&&((e=this.W)!==null&&e!==void 0||(this.W=this.y0()),this.W.observe(o)),c.length!==0&&((i=this.vc)!==null&&i!==void 0||(this.vc=this.E0(l)),this.vc.observe(c)),(n=this.U)!==null&&n!==void 0||(this.U=new Te(this.p0,(h,d)=>d==="added"&&this.v0(h))),this.U.observe(),csSetTimeout(this.g0)}onStop(){var t,e,i;this.W&&(this.zm(document),this.W.disconnect()),(t=this.vc)===null||t===void 0||t.disconnect(),(e=this.U)===null||e===void 0||e.disconnect(),(i=this.ai)===null||i===void 0||i.disconnect()}m0(){return window.ResizeObserver?new ResizeObserver(t=>{window.requestAnimationFrame(()=>{csArray.prototype.forEach.call(t,e=>{this.resizeObserverCallback(e)})})}):null}y0(){return new de(t=>{csArray.prototype.forEach.call(t,e=>{this.S0(e)?this.$m(e):(this._0(e),this.w0(e))})})}E0(t){return new de(e=>{csArray.prototype.forEach.call(e,i=>this.A0(i,t))})}resizeObserverCallback(t){let e=t.target.getBoundingClientRect(),i=D.getMaskedElementDetails(t.target);if(i.state!==D.MaskedElementState.Parent||e.width===i.width&&e.height===i.height)return;let n={state:D.MaskedElementState.Parent,width:e.width,height:e.height};D.setMaskedElementProperty(t.target,n),this.produceEvent({type:"ResizeMaskedElement",target:W(t.target),width:e.width,height:e.height})}w0(t){!this.ai||!pt(t)||Vr(t)||this.ai.observe(t)}S0(t){let e=csNodeparentNode.apply(t);return e?D.isMaskedElement(e)||D.isMaskedElementChild(e):Pi(t)?D.isMaskedElement(t.host)||D.isMaskedElementChild(t.host):!1}v0(t){(D.isMaskedElement(t.host)||D.isMaskedElementChild(t.host))&&D.setMaskedElementProperty(t,this.Sc)}zm(t){ae(t,NodeFilter.SHOW_ELEMENT).visitAll(i=>{D.unsetMaskedElementProperty(i)})}_0(t){let e=t.getBoundingClientRect(),i={state:D.MaskedElementState.Parent,width:e.width,height:e.height};D.setMaskedElementProperty(t,i),this.T0(t),ae(t).visitAll(n=>n!==t&&D.setMaskedElementProperty(n,this.Sc))}$m(t){D.setMaskedElementProperty(t,this.Sc),ae(t).visitAll(e=>e!==t&&D.setMaskedElementProperty(e,this.Sc))}T0(t){var e;let i=(e=at.getProperty(t,D.maskedAttributeProp))!==null&&e!==void 0?e:{attributes:[]};for(let n=0;n<this.Fm.length;n+=1){let o=this.Fm[n];csArray.prototype.indexOf.call(i.attributes,o)===-1&&csArray.prototype.push.call(i.attributes,o)}i.attributes.length!==0&&D.setMaskedAttributeProperty(t,i)}A0(t,e){var i;let n=(i=at.getProperty(t,D.maskedAttributeProp))!==null&&i!==void 0?i:{attributes:[]};for(let o=0;o<t.attributes.length;o+=1){let c=t.attributes[o].name;csArray.prototype.indexOf.call(n.attributes,c)===-1&&csArray.prototype.some.call(e,l=>csString.prototype.indexOf.call(l.attrName,c)>-1&&Zt.call(t,l.selector))&&csArray.prototype.push.call(n.attributes,c)}n.attributes.length!==0&&D.setMaskedAttributeProperty(t,n)}}return Ve([N()],s.prototype,"resizeObserverCallback",null),s})(),w_=(()=>{class s{constructor(){this.Uu=0,this.B=!1,this.Gm="data-cs-capture",this.Ai=t=>{for(let e of t){if(Ee.isWhitelistedElement(e.target))for(let i=0;i<e.addedNodes.length;i+=1){let n=e.addedNodes[i];Ee.isWhitelistedElement(n)||pt(n)&&this.qm(n)}for(let i=0;i<e.removedNodes.length;i+=1){let n=e.removedNodes[i];lt.isConnected(n)||this.Wm(n)}}}}start(){this.Uu++,!this.B&&(this.B=!0,this.b0())}b0(){this.W||(this.W=new de(e=>J(e,i=>this.qm(i))));let t=this.ju?`[${this.Gm}], ${this.ju}`:`[${this.Gm}]`;this.W.observe(t),this.U||(this.U=new Te(this.Ai,(e,i)=>i==="added"&&this.R0(e))),this.U.observe()}stop(){this.B&&(this.Uu--,this.Uu===0&&(this.B=!1,this.C0()))}C0(){this.W&&(this.Wm(document),this.W.disconnect()),this.U&&this.U.disconnect()}setWhitelistedElementsSelector(t,e=!0){if(Ut(t))this.ju=t;else if(e)throw new $t("setCapturedElementsSelector")}getWhitelistedElementsSelector(){return this.ju}qm(t){ae(t).visitAll(e=>{Ee.whitelistElement(e)})}R0(t){Ee.isWhitelistedElement(t.host)&&Ee.whitelistElement(t)}Wm(t){ae(t,NodeFilter.SHOW_ELEMENT).visitAll(i=>{Ee.removeWhitelistElement(i)})}}return s})();var A_=(()=>{let s;return function(r){function t(){let i=navigator.userAgent+navigator.language+navigator.platform,n=csString.prototype.slice.call(e(i).toString(16),-4),o=new csDate().getTime(),c="xxxxxxxx-hhhh-axxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,l=>{let h=(o+Math.random()*16)%16|0;return o=Math.floor(o/16),(l==="x"?h:h&7|8).toString(16)});return csString.prototype.replace.call(c,"hhhh",n)}r.generate=t;function e(i){let n=0;for(let o=0;o<i.length;o+=1)n=csString.prototype.charCodeAt.call(i,o)+(n<<6)+(n<<16)-n;return Math.abs(n)}}(s||(s={})),s})();var T_="csq:start-hotjar",aa=(()=>{let s;return function(r){r.HJ_DUAL_COLLECT="one_app_tag_dc"}(s||(s={})),s})(),b_=(()=>{class s{static set(t,e){s.Xm[t]=e}static isEnabled(t){return s.Xm[t]===!0}}return s.Xm={[aa.HJ_DUAL_COLLECT]:!1},s})();function R_(s){return!window.hjSiteSettings||!((window.hjSiteSettings.features==null?void 0:csArray.prototype.indexOf.call(window.hjSiteSettings.features,aa.HJ_DUAL_COLLECT))>-1)?!1:s?!Nl(s)&&!Zp(s):!0}var C_=(()=>{class s{constructor(t,e){this.Z=t,this.Rt=e,this.Hu=!1}getRequestParameters(){return{dr:this.get()}}addUrlMaskingPattern(t){this.Rt.addUrlMaskingPattern(t)}enableRemoveQueryString(){this.Hu=!0}disableRemoveQueryString(){this.Hu=!1}get(){let t=this.Hu?this.Z.removeQueryString(this.Zm()):this.Zm();return this.Z.anonymizeUrl(t,{maskingPatterns:this.Rt.getUrlMaskingPatterns()})}set(t){this.ty=t}Zm(){if(this.ty)return this.ty;let t="";try{t=window.top.document.referrer}catch(e){if(window.parent)try{t=window.parent.document.referrer}catch(i){t=""}}return t===""&&(t=document.referrer),typeof t!="string"&&(t=""),t}}return s})();function Wc(s,r,t){if(!Z(r)&&!Z(t))return s.href;let e=Z(r)?Mh(r):s.pathname,i=Z(t)?Dh(t):s.search;return`${s.protocol}//${s.host}${e}${i}`}function Mh(s){return jt(s,"/")?s:`/${s}`}function Dh(s){return jt(s,"?")||s===""?s:`?${s}`}var Dn=(()=>{let s;return function(r){r[r.page=1]="page",r[r.onNextPageviewOnly=2]="onNextPageviewOnly"}(s||(s={})),s})(),I_=(()=>{class s{constructor(t,e){this.xt=t,this.Z=e,this.B0=10}overridePath(t,e){if(t===""){this.Br=void 0;return}let i=this.ey(e);i&&(this.Bu=i),this.Br=e?this.sy(t,e):t}overrideQuery(t,e){let i=this.ey(e);i&&(this.Fu=i),this.Mo=e?this.sy(t,e):t}computeOverriddenUrl(t){return this.F0(t)?this.getAnonymizedUrl():t}$0(t){return(typeof t=="string"||typeof t=="number")&&t in Dn}F0(t){let e=this.da(this.xt.href);return this.da(t)===e}da(t){return wf(t,"/")?csString.prototype.slice.call(t,0,-1):t}ey(t){return Z(t==null?void 0:t.lifespan)&&this.$0(t==null?void 0:t.lifespan)?t==null?void 0:t.lifespan:null}z0(){return this.Bu&&this.Bu in Dn}G0(){return this.Fu&&this.Fu in Dn}cleanupOverrideLifespan(){this.z0()&&(this.Br=void 0,this.Bu=void 0),this.G0()&&(this.Mo=void 0,this.Fu=void 0)}getAnonymizedUrl(){let t=Wc(this.xt,this.Br,this.Mo);return this.Z.anonymizeUrl(t)}getUrl(){return Wc(this.xt,this.Br,this.Mo)}getAnonymizedPathAndQuery(){let t=Z(this.Br)?Mh(this.Br):this.xt.pathname,e=Z(this.Mo)?Dh(this.Mo):this.xt.search;return this.Z.anonymizeUrl(t+e)}getUrlProtocol(){return this.xt.protocol}getRequestParameters(){return{url:this.getAnonymizedUrl()}}sy(t,e){return this.q0(e)?this.W0(t):this.Y0(e)?this.X0(t):t}Y0(t){return!!t.decodeURI}X0(t){return this.iy(t,1,!1)}q0(t){return!!t.decodeURIDeep}W0(t){return this.iy(t,this.B0,!0)}iy(t,e,i){let n=t;for(let o=0;o<e;o++)try{let c=window.decodeURI(n);if(c===n)return n;n=c}catch(c){return n}return i&&B.warn(`decodeURIDeep limit reached: ${n}`),n}}return s})(),P_=(()=>{class s{constructor(t,e){this.S=t,this.Ts=e}init(){this.S.register(["debugEvents"],t=>{typeof t=="boolean"&&this.Ts.updateDynamicFields("emitDebugEvents",t)})}}return s})();var Yc=(()=>{class s{constructor(t,e,i,n,o){this.E=t,this.N=e,this.R=i,this.ry=n,this.Es=o}getRequestParameters(){var t;let e=j(j({},xo()),this.E.getRequestParameters()),i=this.R.getSession();i&&(e.pn=`${i.pageNumber}`);let n=this.N.getVisitor();if(n&&(e.sn=`${n.visitsCount}`,e.uu=`${n.id}`),!((t=this.ry)===null||t===void 0)&&t.hasSubProjectId()&&(e.subProjectID=`${this.ry.getSubProjectId()}`),this.K0(e),window.heap&&!this.E.isCsCrosswritingHeap())try{e.happid=window.heap.appid,window.heap.getSessionId&&(e.hsid=window.heap.getSessionId()),window.heap.getUserId?e.huu=window.heap.getUserId():window.heap.userId&&(e.huu=window.heap.userId),window.heap.getPageviewMetadata&&(e.hpvid=window.heap.getPageviewMetadata().pageviewId)}catch(o){delete e.happid,delete e.hsid,delete e.huu,delete e.hpvid}return e}K0(t){if(!this.Es)return;let e=this.Es.getSharedContext();e&&(t.happid=e.happid,t.t=e.pageTitle,t.fvt=csString(e.firstViewTime),t.fvurl=e.firstViewUrl,e.previousViewUrl&&(t.pvurl=e.previousViewUrl),t.url=e.currentViewUrl,e.sessionReferrer&&(t.fpvurl=e.sessionReferrer),t.sw=csString(e.screenWidth),t.sh=csString(e.screenHeight),t.cvt=csString(e.currentViewTime),e.encryptedIdentity&&(t.i=e.encryptedIdentity),e.cvarp&&(t.cvarp=e.cvarp))}}return s})();function O_(){let s="[data-cs-mask]",r="#c1_card_info_id",t=".ctHidden",e=["[data-heap-redact-text]","[heap-ignore]","[data-heap-ignore]","[data-heap-redact-attributes]"],i=["[data-hj-suppress]",".data-hj-suppress","[data-hj-masked]"];return[s,r,t,...e,...i]}function N_(){return[{selector:".ctHidden,input:not([type=button]):not([type=submit])",attrName:"value"}]}var M_=(()=>{class s{constructor(t){this.al=t,this.J0={PIISelectors:["picture","img","video","audio"],Attributes:[]},this.zs={elementSelector:"",attrSelector:"",attrSelectors:[]};let e={PIISelectors:O_(),Attributes:N_()};this.zs=D.getComputedSelectorSettings(e,this.zs)}init(){this.Q0()}setMaskedElementSettingsFromCommand(t){if(t=D.sanitizeSelectorUserInput(t),!D.isSelectorUserInput(t))throw new $t(qo[0]);this.$u(t)}setMaskedElementSettingsFromParent(t){let e={PIISelectors:csString.prototype.split.call(t.elementSelector,","),Attributes:t.attrSelectors};this.$u(e)}getMaskedElementSettings(t){return t?this.ny(this.J0):this.zs}Q0(){var t,e,i,n,o,c,l;let h={PIISelectors:[],Attributes:[]};((i=(e=(t=window==null?void 0:window.ClickTaleSettings)===null||t===void 0?void 0:t.DOM)===null||e===void 0?void 0:e.PII)===null||i===void 0?void 0:i.Text)instanceof Array&&h.PIISelectors.push(...window.ClickTaleSettings.DOM.PII.Text),((c=(o=(n=window==null?void 0:window.ClickTaleSettings)===null||n===void 0?void 0:n.DOM)===null||o===void 0?void 0:o.PII)===null||c===void 0?void 0:c.Attributes)instanceof Array&&window.ClickTaleSettings.DOM.PII.Attributes.forEach(d=>{I(d.attr)&&I(d.rule)&&h.Attributes.push({selector:d.rule,attrName:d.attr})}),(l=this.al)===null||l===void 0||l.markClicktalePIIInUse(h),this.$u(h)}$u(t){this.zs=this.ny(t)}ny(t){return D.getComputedSelectorSettings(t,this.zs)}}return s})(),D_=60*1e3,k_=30*1e3,x_=(()=>{class s{constructor(t,e){this.R=t,this.N=e,this.zu=!1,this.Z0=jr(()=>this.R.refreshSession(),k_)}onSessionExpired(t){this.tR=t}isSessionValid(){return this.zu?!0:!(!this.R.hasValidSession()||this.R.pollCacheRefreshEvent()&&this.N.isSessionRenewed())}isCurrentPageviewValid(){let t=this.R.hasValidSession();return this.R.pollCacheRefreshEvent(!1)?!this.N.isSessionRenewed():t}refreshSession(){this.isSessionValid()?this.Z0():this.eR()&&(this.oy=k.now(),this.renewSession(!1))}renewSession(t){this.zu=!0,this.tR(t),this.zu=!1}eR(){return!document.hidden&&(!Z(this.oy)||k.now()-this.oy>D_)}}return s})(),L_=(()=>{class s{constructor(){this.W=null,this.U=null,this.B=!1,this.Ai=t=>{for(let e of t)if(is.isEditableNode(e.target))for(let i=0;i<e.addedNodes.length;i+=1){let n=e.addedNodes[i];if(!is.isEditableNode(n)){if(Cr(n)||Md(n)){is.markEditableNode(n);continue}pt(n)&&this.ay(n)}}}}start(){this.B||(this.B=!0,this.W=new de(t=>J(t,e=>{this.ay(e)})),this.W.observe("[contenteditable]"),this.U=new Te(this.Ai,(t,e)=>e==="added"&&this.sR(t)),this.U.observe())}stop(){var t,e;this.B&&(this.B=!1,(t=this.W)===null||t===void 0||t.disconnect(),this.W=null,(e=this.U)===null||e===void 0||e.disconnect(),this.U=null)}ay(t){ae(t).visitAll(e=>{is.markEditableNode(e)})}sR(t){is.isEditableNode(t.host)&&is.markEditableNode(t)}}return s})();var kh=(()=>{class s{constructor(){this.subscriptions={}}subscribe(t,e){this.subscriptions[t]=e,Object.keys(this.subscriptions).length===1&&this.onStartTracking()}unsubscribe(t){delete this.subscriptions[t],Object.keys(this.subscriptions).length===0&&this.onStopTracking()}}return s})(),V_=(()=>{class s extends kh{constructor(t){super(),this.rR=t,this.fi=[{boundElement:document,type:"touchstart",listener:e=>this.Q(e)},{boundElement:document,type:"touchmove",listener:e=>this.Q(e)},{boundElement:document,type:"touchend",listener:e=>this.Q(e)}],this.Do=new lo,this.Do.onGesture((e,i)=>this.Ch(e,i))}Ch(t,e){for(let i in this.subscriptions){let n=this.subscriptions[i];n(t,e)}}onStartTracking(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.fi,t=>yt(t))}onStopTracking(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.fi,t=>Et(t))}canDetectGesture(){return typeof devicePixelRatio!="undefined"}Q(t){this.rR.tryToExecute("process gesture event",()=>{if(this.Do.isValidTouchEvent(t))switch(t.type){case"touchstart":this.Do.processActionDown(t);break;case"touchmove":this.Do.processActionMove();break;case"touchend":this.Do.processActionUp(t);break}})()}static isSwipe(t){return t.type===Rt.FLICK||t.type===Rt.DRAG}}return s})();var U_=(()=>{class s{constructor(t){this.gt=t}on(t,e){return i=>{this.gt.hasValidEventTarget(i)&&this.TR(i,t)&&e(i)}}TR(t,e){let i=Pt(t);return Zt.call(i,e)}isMatchesSelectorSupported(){return!!Zt}}return s})(),j_=(()=>{class s extends zt{constructor(){super(),this.fy=0}onStart(){B.isPerfLoggingActive()&&(this.ko=window.csSetInterval(()=>this.py(),s.bR))}onStop(){B.isPerfLoggingActive()&&(this.py(),csClearInterval(this.ko))}py(){this.fy>=s.RR||q.counters.methodPerformance.flush()&&this.fy++}}return s.bR=5e3,s.RR=5,s})(),H_=(()=>{class s{constructor(){}init(){this.Ac=new j_}onStartTracking(){this.Ac.start()}onOptout(){this.Ac.stop()}onArtificialPageViewEnd(t){t&&this.Ac.stop()}onAfterArtificialPageView(t){t&&this.Ac.start()}}return s})();var B_=["startDataCollection","data-collection:start"],F_=["data-collection:stop"],$_=(()=>{class s{constructor(t,e){this.ns=t,this.S=e}init(){this.S.register(B_,()=>{this.ns.startDataCollection()}),this.S.register(F_,()=>{this.ns.stopDataCollection()})}}return s})(),kn={fromSessionRenewal:!1,isRenewedVisitor:!1},z_=(()=>{class s{constructor(t,e,i,n,o,c){this.E=t,this.w=e,this.ls=i,this.lt=n,this.er=o,this.V=c,this.by=!1,this.Ry=0,this.rd=!0,this.Cy=!1,this.Gs=!1,this.startDataCollection=({fromSessionRenewal:l,onAfterDataCollectionStartedCallback:h}=kn)=>{l&&this.Gs||!this.by?this.rC(l,h):this.nC()}}isDataCollectionStarted(){return this.Gs}tryStartAutomaticDataCollection({fromSessionRenewal:t,isRenewedVisitor:e,onAfterDataCollectionStartedCallback:i}=kn){this.oC(t,e)&&this.startDataCollection({fromSessionRenewal:t,onAfterDataCollectionStartedCallback:i})}disableStartDataCollection(){this.rd=!1}allowStartDataCollection({fromSessionRenewal:t}=kn){this.rd=!0,this.Cy&&this.startDataCollection({fromSessionRenewal:t})}stopDataCollection(){this.Gs&&(this.Gs=!1,this.w.emitArtificialPageViewEnd(!0),this.er.stop())}nC(){this.Gs||(this.Gs=!0,this.V.isSessionValid()?(this.V.refreshSession(),this.er.start(Cs.Artificial)):this.V.renewSession(!1))}oC(t,e){return e&&!this.Gs?!1:t?!0:this.E.startMode===Nr.Manual?!1:!so(this.E)&&!this.E.isHeapSideloadsStartDataCollection()&&!this.E.isCsSideloadingHeap()}rC(t,e){if(this.ls.isActive()||(this.Cy=!0,this.aC()&&(this.Ry++,this.Ry<2))||!this.rd||this.Gs&&!t)return;this.by=!0,this.Gs=!0,this.lt.init();let i=t?Cs.Renewal:Cs.Natural;this.er.start(i);let n=()=>{this.w.emitStartTracking(t),typeof e=="function"&&e()};lt.onDocumentLoaded(n)}aC(){return so(this.E)&&this.E.isCsSideloadingHeap()}}return s})();var G_=20,q_="Custom Error:",W_="https://cserror.com/texterror.js",Y_=(()=>{class s extends zt{constructor(t,e,i,n,o,c,l){super(),this.Ys=t,this.ld=e,this.Et=i,this.ye=n,this.vi=o,this.C=c,this.V=l,this.Mc=[],this.Ui=0,this.ir=[]}initStates(){this.ms=k.now(),this.ld.removeQueryParams(),this.ld.setQueryParams(this.Et.getRequestParameters()),this.Mc=[],this.Ui=0}onStart(){this.Ys.subscribe(s.jt,t=>this.Q(t)),this.cd()}onStop(){this.Ys.unsubscribe(s.jt)}onIframeJavascriptError(t){this.Q(t)}trackCustomError(t){let e={errorType:"jsError",message:`${q_} ${t}`,lineno:1,colno:1,filename:W_};this.Uo(e)}Uo(t){if(this.isStarted){let e=this.Q(t);e&&this.vi.emitCustomJavaScriptErrorEvent(e)}else csArray.prototype.push.call(this.ir,t)}cd(){this.isStarted&&(csArray.prototype.forEach.call(this.ir,t=>this.Uo(t)),this.ir=[])}Q(t){if(this.isStarted&&this.Ui<G_&&this.V.isSessionValid()){let e=ct(j({},t),{pageUrl:this.C.getAnonymizedUrl(),rt:this.Ki()});return this.ye.anonymize(e),csArray.prototype.push.call(this.Mc,e),this.Ao(),e}return null}Ki(){return k.now()-this.ms}Ao(){this.ld.send({errors:this.Mc}),this.Mc=[],this.Ui+=1}}return s.jt="JavaScriptErrorsService",s})(),X_="errors",K_=(()=>{class s{constructor(t,e,i,n,o,c,l,h,d,p){this.Ys=t,this.ye=e,this.E=i,this.Et=n,this.yt=o,this.S=c,this.vi=l,this.C=h,this.ce=d,this.V=p}init(){let t=this.ce.create(`${this.E.getTrackerUri()}/${X_}`);this.Xs=new Y_(this.Ys,t,this.Et,this.ye,this.vi,this.C,this.V),this.yt.addListener(this.Xs),this.ut()}ut(){this.E.jsCustomErrorsEnabled&&!this.E.customErrors.enabled&&this.S.register(ql,t=>{this.Xs.trackCustomError(t)})}onStartTracking(){this.Xs.start()}onAfterNaturalPageView(){this.Xs.initStates()}onArtificialPageViewEnd(t){t&&this.Xs.stop()}onAfterArtificialPageView(t){this.Xs.initStates(),t&&this.Xs.start()}onBeforeSessionRenewal(){this.Xs.stop()}onOptout(){this.Xs.stop()}}return s})(),J_=(()=>{class s extends kh{constructor(){super(),this.G=new hh(t=>this.errorListener(t))}onStartTracking(){this.G.observe()}onStopTracking(){this.G.disconnect()}errorListener(t){let e=this.DC(t);for(let i in this.subscriptions){let n=this.subscriptions[i];n(e)}}kC(t){return t=t!=null?t:"[NO ERROR MESSAGE]",Ot.truncate(t,s.Ih,Ot.ELLIPSIS)}xC(t){return!t||re(t)?"":Ot.truncate(t,s.Ph,Ot.ELLIPSIS)}DC(t){return{errorType:"jsError",message:this.kC(t.message),filename:this.xC(t.filename),lineno:t.lineno,colno:t.colno}}}return s.Ih=1024,s.Ph=150,F([N("Event handler type: error")],s.prototype,"errorListener",null),s})(),Q_="CS_ANONYMIZED_VALUE",Z_=(()=>{class s{constructor(t,e){this.D=t,this.C=e}anonymize(t){return I(t.message)&&(t.message=this.LC(t.message),t.message=this.D.anonymizePII(t.message)),I(t.filename)&&(t.filename=this.C.computeOverriddenUrl(t.filename)),t}LC(t){return csString.prototype.replace.call(t,/(value\s*=\s*".*"|value\s*=\s*'.*')/,`value='${Q_}'`)}}return s})();var tw=(()=>{class s{constructor(t){this.S=t}init(){this.Gy(s.gI,_l),this.Gy(s.mI,Sl)}Gy(t,e){this.S.register([t],(i,n)=>{!I(i)||!(I(n)||Le(n))||B.error(n,`${e}${i}`)})}}return s.mI="logSnippetError",s.gI="logImplementationSnippetError",s})();var ew=(()=>{class s{constructor(t,e){this.$t=t,this.E=e,this.qy=!1}enableRecordingContext(t,e,i){this.qy=!0,this.Lr=t,this.R=e,this.no=i}getRecordingContext(){var t,e,i;if(!this.qy)return{isRecording:!1,recordingStartTimestamp:0,etrState:oe.ETR_OFF,etrStatus:Qt.ETR_DISABLED,collectState:M.ANALYTICS_ONLY};let n=this.R.getSession();return{isRecording:this.Lr.isRecording(),useAnonymization:this.$t.getSensitiveStatus().useAnonymization,enableOnlineResources:(t=this.Lr.getStaticResourceManagerStatus())===null||t===void 0?void 0:t.onlineAssets.activated,enableOnlineResourcesOnNextPageview:(e=this.Lr.getStaticResourceManagerStatus())===null||e===void 0?void 0:e.onlineAssets.enabledOnNextPageview,recordingStartTimestamp:parseInt(this.Lr.getRecordingStartTimestamp(),10),etrState:this.E.malkaEtrEnabled?oe.ETR_ON:oe.ETR_OFF,etrStatus:this.no.getEtrStatus(n),collectState:(i=n==null?void 0:n.collectState)!==null&&i!==void 0?i:M.ANALYTICS_ONLY}}}return s})(),ki=(()=>{class s{static isRecordingSupported(){return"MutationObserver"in window&&"visibilityState"in document}static isAsyncSerializationSupported(){return"Promise"in window&&"findIndex"in csArray.prototype}}return s})();var sw=(()=>{class s extends zt{constructor(t,e,i,n,o,c){super(),this.Ee=t,this.lt=e,this.Wt=i,this.fr=n,this.Zr=o,this.it=c}onStart(){var t,e,i;this.Wt.start(),this.Ee.setMaskedElementSettings(this.lt.getMaskedElementSettings((t=this.it)===null||t===void 0?void 0:t.shouldMaskNonTextElements())),this.Ee.startIdentifier(),(e=this.fr)===null||e===void 0||e.start(),(i=this.Zr)===null||i===void 0||i.start()}onStop(){var t,e;this.Wt.stop(),this.Ee.stopIdentifier(),(t=this.fr)===null||t===void 0||t.stop(),(e=this.Zr)===null||e===void 0||e.stop()}}return s})(),iw=(()=>{class s{constructor(t,e,i,n,o,c){this.it=t,this.lt=e,this.ie=i,this.Wt=n,this.Cn=o,this.ht=c,this.In=Lo(this.Cn)}getSensitiveStatus(){var t,e;return{started:this.ie.isStarted,useAnonymization:this.it.shouldUseAnonymization(),capturedElementSelector:this.Wt.getWhitelistedElementsSelector(),maskedElementSettings:this.lt.getMaskedElementSettings((t=this.it)===null||t===void 0?void 0:t.shouldMaskNonTextElements()),encryptionSelectors:(e=this.ht)===null||e===void 0?void 0:e.getEncryptionSelectors()}}getElementSensitiveStatus(t){let e=this.ie.isStarted,i=this.it.shouldUseAnonymization();return e?D.isMaskedElement(t)||D.isMaskedElementChild(t)?Jt.MASKED:Wy.shouldEncrypt(t)?Jt.ENCRYPTED:is.isEditableNode(t)?Jt.ANONYMIZED:i?Ee.isWhitelistedElement(t)?Jt.CAPTURED:Jt.ANONYMIZED:Jt.CAPTURED:Jt.ANONYMIZED}getAttributeSensitiveStatus(t,e){if(!this.ie.isStarted)return Jt.ANONYMIZED;let i=this.it.shouldUseAnonymization();return D.isMaskedAttribute(t,e)?Jt.MASKED:i?ni(t)||Ee.isWhitelistedElement(t)||this.In.has(e)?Jt.CAPTURED:Jt.ANONYMIZED:Jt.CAPTURED}}return s})(),rw=(()=>{class s{constructor(t){this.V=t}onAfterVisitorRenewal(){this.V.renewSession(!0)}}return s})(),nw={MATCHED:{[M.ANALYTICS_ONLY]:M.ANALYTICS_ONLY_RULES_TARGETING,[M.RECORDING_GLOBAL_SAMPLING]:M.RECORDING_RULES_TARGETING,[M.ANALYTICS_ONLY_RECORDING_PENDING_RULES_TARGETING]:M.RECORDING_RULES_TARGETING},MISSED:{[M.ANALYTICS_ONLY]:M.ANALYTICS_ONLY_RULES_TARGETING,[M.RECORDING_GLOBAL_SAMPLING]:M.ANALYTICS_ONLY_RECORDING_PENDING_RULES_TARGETING}},xn=(()=>{let s;return function(r){let t;function e(m){t=m}r.setLogger=e;function i(m,v){for(let b of m)if(o(b,v))return!0;return!1}r.isUrlMatching=i;function n(m,v){if(I(v)){for(let b of m)if(o(b,v))return!0}else if(Ar(v)){for(let b of m)if(o(b,csString(v)))return!0}return!1}r.isMatching=n;function o(m,v){let b=c(m,v);return m.negate?!b:b}function c(m,v){switch(m.rule_type==="date"&&(m.match_operation==="less_than"||m.match_operation==="greater_than")&&(v=(new csDate(v).valueOf()/1e3).toFixed(0)),m.match_operation){case"exact":switch(m.rule_type){case"string":return I(m.pattern)?csString.prototype.toLowerCase.call(v)===csString.prototype.toLowerCase.call(m.pattern):!1;case"boolean":return v===m.pattern||v===csString(m.pattern);case"number":return vt(v)?Number(v)===Number(m.pattern):!1;default:return v===m.pattern}case"starts_with":return I(m.pattern)?csString.prototype.indexOf.call(v,m.pattern)===0:!1;case"ends_with":return I(m.pattern)?ii(v,m.pattern):!1;case"contains":return I(m.pattern)?csString.prototype.indexOf.call(v,m.pattern)!==-1:!1;case"regex":if(!I(m.pattern))return!1;try{return new csRegExp(m.pattern).test(v)}catch(b){return t==null||t.warn(`targeting.matchOperation.regex invalid ${b==null?void 0:b.message}`),!1}case"simple":return I(m.pattern)?y(v)===y(m.pattern):!1;case"greater_than":return Number(v)>Number(m.pattern);case"less_than":return Number(v)<Number(m.pattern);case"exact_date":{let b=Number(m.pattern);if(!At(b))return!1;let C=new csDate(b*1e3);return new csDate(v).toDateString()===C.toDateString()}case"exact_days_ago":return l(m,v);case"more_than_days_ago":return h(m,v);case"less_than_days_ago":return d(m,v);case"unknown":return p(v);default:return t==null||t.warn(`targeting.matchOperation.regex not managed operation ${m.match_operation}`),!1}}function l(m,v){let b=new csDate,C=b.setDate(b.getDate()-Number(m.pattern)),_=new csDate(C);return new csDate(v).toDateString()===_.toDateString()}function h(m,v){let b=Number(m.pattern);if(!At(b))return!1;let C=Number(b)+1,_=new csDate,T=new csDate(_);return T.setDate(_.getDate()-C),new csDate(v).getTime()<=T.getTime()}function d(m,v){let b=Number(m.pattern);if(!At(b))return!1;if(b===0)return l(m,v);let C=new csDate,_=new csDate(C);return _.setDate(C.getDate()-b),new csDate(v).getTime()>=_.getTime()}function p(m){return vt(m)?I(m)?csString.prototype.trim.call(m)==="":Ar(m)?m===!0:At(m)?m!==0:!1:!0}function y(m){let v=jt(m,"http://")||jt(m,"https://")?m:`https://${m}`,b=yl(v);return b!==null?csString.prototype.replace.call(b.host,/^www./,""):m}}(s||(s={})),s})(),ow=(()=>{let s;return function(r){r.URL="url"}(s||(s={})),s})(),Ln={isLegacyURL:s=>s.component==="url",isLegacyTrigger:s=>s.component==="trigger",isURL:s=>s.type===ow.URL},aw=(()=>{class s{constructor(t){this.Yy=new Vo,this.Xy=[],this.Ky=[],xn.setLogger(t)}setTargetingRules(t){this.Yy.setRegexRules(csArray.prototype.filter.call(t,Ln.isURL));for(let e of t)Ln.isLegacyURL(e)?csArray.prototype.push.call(this.Xy,e):Ln.isLegacyTrigger(e)&&csArray.prototype.push.call(this.Ky,e)}matchUrl(t){return xn.isUrlMatching(this.Xy,t)||this.Yy.evaluateUrl(t)}matchTrigger(t){return xn.isMatching(this.Ky,t)}}return s})(),cw=(()=>{class s extends zt{constructor(t,e,i){super(),this.Jy=t,this.md=e,this.C=i}init(){this.yd=new aw(B),this.Jy&&this.yd.setTargetingRules(this.Jy)}onStart(){}checkTargetingRules(){let t=this.C.getAnonymizedUrl();this.md(this.Ed(t,"url"))}onStop(){}onTargetingRulesArtificialPageview(t){this.isStarted&&this.md(this.Ed(t,"url"))}onExternalEvent(t){this.isStarted&&this.md(this.Ed(t.name,"trigger"))}Ed(t,e){var i,n;return e==="url"&&I(t)&&(!((i=this.yd)===null||i===void 0)&&i.matchUrl(t))?!0:!!(e==="trigger"&&(!((n=this.yd)===null||n===void 0)&&n.matchTrigger(t)))}}return s})(),lw=(()=>{class s{constructor(t,e,i,n,o,c,l){this.E=t,this.w=e,this.Ct=i,this.J=n,this.C=o,this.R=c,this.ns=l,this.rr=!1,this.Go=(h=!1)=>{this.rr&&this.E.isSMB&&this.ns.allowStartDataCollection({fromSessionRenewal:h}),this.E.startMode===Nr.Automatic&&this.ns.startDataCollection({fromSessionRenewal:h})},this.wI=h=>{this.rr||(this.rr=h,this.Qy(),this.Go())}}init(){this.E.isSMB&&this.ns.disableStartDataCollection(),this.tn=new cw(this.E.recordTargetingRules,this.wI,this.C),this.J.addListener(this.tn),this.tn.init()}start(){this.tn.start()}stop(){this.tn.stop()}maybeStartDataCollection(t){if(t){this.Go(t);return}if(this.AI()){this.rr=!0,this.Go(),this.stop();return}this.tn.checkTargetingRules()}onAfterArtificialPageView(){this.tn.checkTargetingRules()}onCollectStateChange(t){if(this.Zy(t)){this.stop();return}let e=t===M.ANALYTICS_ONLY_RECORDING_PENDING_RULES_TARGETING;!this.rr&&e||csSetTimeout(()=>this.tE(t),0)}onStartTracking(){this.Qy()}AI(){let t=this.R.getSession();return!!(t&&this.Zy(t.collectState))}Zy(t){return t===M.RECORDING_RULES_TARGETING||t===M.ANALYTICS_ONLY_RULES_TARGETING}Qy(){var t;if(this.rr){let e=this.R.getSession(),i=this.Ct.getInitialCollectState();this.tE((t=e==null?void 0:e.collectState)!==null&&t!==void 0?t:i),this.ns.isDataCollectionStarted()&&this.w.emitTargetingRulesMatched()}}tE(t){let e=nw[this.rr?"MATCHED":"MISSED"][t];e&&this.w.emitCollectStateChange(e,oe.ETR_OFF)}}return s})(),hw=(()=>{class s{constructor(){this.eE=new Set,this.sE=[],this.vd=new Set,this.Sd=[]}addUrlMaskingPattern(t){if(this.eE.has(t))return;this.eE.add(t);let e=qa(t);csArray.prototype.push.call(this.sE,e)}getUrlMaskingPatterns(){return this.sE}resetPartialUrlMaskingPatterns(){this.vd.clear(),this.Sd=[]}addPartialUrlMaskingPattern(t){if(this.vd.has(t))return;this.vd.add(t);let e=qa(t);csArray.prototype.push.call(this.Sd,e)}getPartialUrlMaskingPatterns(){return this.Sd}}return s})(),uw=(()=>{class s{constructor(t,e,i){this.E=t,this.N=e,this.R=i,this.ms=k.now()}resetStartTime(){this.ms=k.now()}getSessionData(){let{projectId:t}=this.E,e=this.N.getVisitor();e==null&&B.warn("Visitor is null. This happens when a snippet tries to get Session Data before the tag was initialized.");let{id:i,visitsCount:n}=e!=null?e:{},o=this.R.getSession();o===null&&B.warn("Session is null. This happens when a snippet tries to get Session Data before the tag was initialized.");let{pageNumber:c}=o!=null?o:{};return{projectId:t,userId:i,sessionNumber:n,pageNumber:c,relativeTimestamp:k.now()-this.ms}}}return s})(),dw=["clearSession"],fw=["extendSession"];var pw=["getSessionData"],gw=["session:start:newVisitor"],mw=["session:clear:visitor"],yw=(()=>{class s{constructor(t,e,i,n){this.E=t,this.N=e,this.R=i,this.S=n}init(){this._d=new uw(this.E,this.N,this.R),this.S.register(dw,()=>this.R.removeSession()),this.S.register(fw,()=>this.R.extendSessionPeriodically(),{disableApplyPending:!0}),this.S.register(pw,()=>this._d.getSessionData(),{disableApplyPending:!0}),this.S.register(gw,()=>this.N.renewVisitor()),this.S.register(mw,()=>{this.N.resetVisitor()},{disableApplyImmediate:!0})}onBeforeNaturalPageView(){this.N.createOrUpdateVisitor(),this.R.createOrUpdateSession()}onBeforeArtificialPageView(){this.N.createOrUpdateVisitor(),this.R.createOrUpdateSession()}onAfterNaturalPageView(){this._d.resetStartTime()}onAfterArtificialPageView(){this._d.resetStartTime()}onOptout(){this.N.removeVisitor(),this.R.removeSession()}onCollectStateChange(t){this.R.updateCollectState(t)}}return s})(),Ew=(()=>{class s{constructor(t,e,i,n,o,c,l,h,d,p,y,m,v,b,C,_,T,x,O,w,H,$,tt,It,Gt,ee,S,V,U,G,mt,Mt,be,ms,js,Hs,Ue){this.Et=t,this.qo=e,this.ue=i,this.N=n,this.R=o,this.V=c,this.Ps=l,this.w=h,this.S=d,this.gl=p,this.E=y,this.ml=m,this.ls=v,this._n=b,this.It=C,this.D=_,this.et=T,this.Z=x,this.C=O,this.TI=w,this.J=H,this.yt=$,this.bt=tt,this.iE=It,this.qt=Gt,this.bI=ee,this.O=S,this.ce=V,this.M=U,this.mt=G,this.K=mt,this.Ct=Mt,this.lt=be,this.Ge=ms,this.rs=js,this.es=Hs,this.ss=Ue,this.RI=je=>{this.w.emitBeforeSessionRenewal(),this.rn(!0,je),this.w.emitAfterSessionRenewal()},this.CI=je=>{this.w.emitBeforeSessionRenewal(),this.Ct.refreshQuota(ce=>{ce!==M.QUOTA_REACHED&&(this.rn(!0,je),this.w.emitAfterSessionRenewal())})}}start(){if(this.ml.init(),this.ls.init(),this.ls.isActive())return;let t,e,i,n,o,c,l,h,d,p,y,m,v,b,C,_,T,x,O;this.O.schedule(()=>{C=new rw(this.V),m=new U_(this.et),v=new __(()=>{}),_=new w_,O=new L_;let w=new sw(v,this.lt,_,x,O,this.wd());b=new iw(this.wd(),this.lt,w,_,this.E.whitelistedAttributes,T);let H=new pm(this.w,this.S,this.lt,w,_,T,x);H.init(),this.w.addListener(H),t=new aS(this.E,this.qo,this.N,this.et,m,this.S,this.V,new V_(B),this.yt,this.ce,this.J,b,this.wt,this.es,this.ss),e=new Am(this.S,this.R,this.E,this.Et,this.ue,this.D),y=new ew(b,this.E);let $=null,tt=new rm;i=new TS(this.N,this.R,this.S,this.yt,$,this.E,tt,y),n=new Nm(this.E,this.qo,this.N,this.S,this.D,this.V,this.C);let It;this.er=new hm(this.E,this.S,this.w,this.qo,this.N,this.R,this.Ps,this.It,this.bt,this.C,this.qt,tt,this.J,this.Ge,It),this.rE=new yw(this.E,this.N,this.R,this.S),this.ns=new z_(this.E,this.w,this.ls,this.lt,this.er,this.V),new $_(this.ns,this.S).init(),l=new Hm(this.E,this.S,this.ue,this.qo,this.J),h=new tw(this.S),d=new H_}),this.E.jsErrorsEnabled&&this.O.schedule(()=>{this.Ys=new J_,this.ye=new Z_(this.D,this.C);let w=new K_(this.Ys,this.ye,this.E,this.qo,this.yt,this.S,this.J,this.C,this.ce,this.V);w.init(),this.w.addListener(w)}),this.O.schedule(()=>{this._n.init()}),this.O.schedule(()=>{i.init()}),this.O.schedule(()=>{e.init()}),this.O.schedule(()=>{n.init()}),this.O.schedule(()=>{this.iE.init()}),this.O.schedule(()=>{this.er.init()}),this.O.schedule(()=>{this.rE.init()}),this.O.schedule(()=>{l.init()}),this.O.schedule(()=>{this.TI.init()}),this.O.schedule(()=>{h.init()}),this.O.schedule(()=>{d.init()}),this.O.schedule(()=>{this.bI.init()}),this.O.schedule(()=>{this.w.addListener(this.rE),this.w.addListener(this.gl),this.w.addListener(t),this.w.addListener(this._n),this.w.addListener(i),this.w.addListener(n),this.w.addListener(this.iE),this.w.addListener(this.er),this.w.addListener(l),this.w.addListener(e),this.w.addListener(d),this.w.addListener(C)}),ki.isRecordingSupported()&&this.O.schedule(()=>{let w=new Mv(y,this.R,this.E,this.Et,this.S,this.D,this.V,v,this.ye,this._t,this.Be,this.Rt,this.w,this.J,this.yt,this.qt,this.ce,this.Z,this.Kn,this.wd(),this.Yr,T);w.init(),this.w.addListener(w),i.setRecordingService(w.recordingService)}),this.O.schedule(()=>{var w;let H,$}),this.O.schedule(()=>{t.init()}),this.O.schedule(()=>{this.E.isQuotaEnabled()?this.V.onSessionExpired(w=>{this.CI(w)}):this.V.onSessionExpired(w=>{this.RI(w)}),this.rn()})}rn(t=!1,e=!1){var i,n,o;if(this.E.hasTargetingRules()){this.Wo||(this.Wo=new lw(this.E,this.w,this.Ct,this.J,this.C,this.R,this.ns),this.w.addListener(this.Wo),this.Wo.init(),this.Wo.start(),this.S.start(),(i=this.wt)===null||i===void 0||i.start()),this.Wo.maybeStartDataCollection(t);return}this.S.start(),(n=this.wt)===null||n===void 0||n.start(),this.ns.tryStartAutomaticDataCollection({fromSessionRenewal:t,isRenewedVisitor:e})}wd(){if(this.it)return this.it;let t=new Vo;return this.it=new S_(this.E,this.C,t,this.It),this.it.init(),this.it.shouldUseAnonymization()&&q.counters.pageAnonymisation.count("anonymized-on-start"),this.it}}return s})();var xh=(()=>{class s{constructor(t){this.configuration=t}}return s})(),vw=(()=>{class s extends xh{constructor(t,e,i,n,o){super(t),this.configuration=t,this.w=e,this.Ad=i,this.C=n,this.Td=o,this.bd=!1}refreshQuota(){}canCollect(t){return!0}init(){this.configuration.malkaUrlEnabled&&this.configuration.hasRecordingUrlRules()&&(this.bd=!0,this.Td.setRegexRules(this.configuration.recordingUrlRules))}sanitizeSessionCollectState(t){return(t.collectState===M.QUOTA_REACHED||t.collectState===M.RECORDING_RULES_TARGETING||t.collectState===M.RECORDING_TEMPORARILY)&&(t.collectState=M.ANALYTICS_ONLY),t}computeInitialCollectState(){return cs.isReplayConsentNeeded(this.configuration)?M.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED:this.Vc()}computeInitialCollectStateFromRecordingConsentGranted(){return this.Vc()}Vc(){if(!ki.isRecordingSupported())return M.ANALYTICS_ONLY;let t=M.ANALYTICS_ONLY,e=oe.ETR_OFF;return Ns.percentage()<this.configuration.replayRecordingRate||this.Ad.isForceReplayRecorded()?t=M.RECORDING_GLOBAL_SAMPLING:this.bd&&this.Td.evaluateUrl(this.C.getAnonymizedUrl())&&(t=M.RECORDING_URL_SAMPLING),this.configuration.malkaEtrEnabled&&(e=oe.ETR_ON),this.w.emitCollectStateChange(t,e),t}getEligibleCollectState(t){if(!ki.isRecordingSupported())return M.ANALYTICS_ONLY;if(cs.isRecordingBlockedByConsent(t))return t.collectState===M.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN?M.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN:M.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED;if(t.collectState===M.RECORDING_GLOBAL_SAMPLING)return M.RECORDING_GLOBAL_SAMPLING;let e=this.configuration.malkaEtrEnabled?oe.ETR_ON:oe.ETR_OFF;return this.bd&&this.Td.evaluateUrl(this.C.getAnonymizedUrl())?(this.w.emitCollectStateChange(M.RECORDING_URL_SAMPLING,e),M.RECORDING_URL_SAMPLING):(this.w.emitCollectStateChange(M.ANALYTICS_ONLY,e),M.ANALYTICS_ONLY)}isReplayRecorded(t){return cs.isRecordingBlockedByConsent(t)?!1:t.collectState===M.RECORDING_TEMPORARILY||t.collectState===M.RECORDING_GLOBAL_SAMPLING||t.collectState===M.RECORDING_URL_SAMPLING||this.configuration.malkaEtrEnabled}getInitialCollectState(){return M.ANALYTICS_ONLY}getRecordingConsentWithdrawn(){return M.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}}return s})(),he="_cs_s",_o=18e5,Vn=".",Sw=13,Er=(()=>{let s;return function(r){r[r.NOT_FOUND=0]="NOT_FOUND",r[r.EXPIRED=1]="EXPIRED",r[r.FOUND=2]="FOUND"}(s||(s={})),s})(),_w=(()=>{class s{constructor(t,e,i){this.E=t,this.M=e,this.K=i,this.re=null,this.Rd=!1}get(t){let e=this.getRawSession(t);return this.isValid(e)?kl(e):null}getRawSession(t){if(t){let d=this.Cd();return Jn(d)}let{sessionString:e,status:i}=this.II(),n=Jn(e);if(i!==Er.EXPIRED)return n;if(this.E.cookielessTrackingEnabled)return null;let o=this.Cd();if(!o)return null;let c=csString.prototype.split.call(o,Vn);if(!s.nE(c))return o;let l=c[c.length-1],h=parseInt(l,10);return isNaN(h)||this.PI(h),n}onCookieToSet(t){this.Ni=t}onCookieToRemove(t){this.Mi=t}set(t,e=_o){var i;let n=k.now()+e,o=eg(t);o+=`${Vn}${n}`,this.OI(o,n),this.E.cookielessTrackingEnabled?this.K.setItem(he,o):(this.M.set(he,o,e),(i=this.Ni)===null||i===void 0||i.call(this,he,o,e))}remove(){var t;this.E.cookielessTrackingEnabled?this.K.removeItem(he):(this.M.delete(he),(t=this.Mi)===null||t===void 0||t.call(this,he)),this.NI()}handleSubdomainChange(){if(this.E.cookielessTrackingEnabled)return;let t=this.get(!0);t&&(this.E.allowSubdomains?this.M.delete(he,Ur.CURRENT_DOMAIN):this.M.delete(he,this.M.getRootDomain()),this.set(t))}isValid(t){return t!==null&&Ho(t)}OI(t,e){this.re={sessionString:t,expires:e}}II(){return this.re?this.re&&k.now()<=this.re.expires?{sessionString:this.re.sessionString,status:Er.FOUND}:{sessionString:this.re.sessionString,status:Er.EXPIRED}:{sessionString:this.Cd(),status:Er.NOT_FOUND}}NI(){this.re=null}PI(t){this.re&&(this.re.expires=t,this.Rd=!0)}isCacheRefreshed(){return this.Rd}resetCacheRefreshed(){this.Rd=!1}Cd(){if(this.E.cookielessTrackingEnabled){let e=this.K.getItem(he);return!e||this.oE(e)?null:e}let t=this.M.get(he);return!t||this.oE(t)?null:t}oE(t){let e=csString.prototype.split.call(t,Vn);if(!s.nE(e))return!1;let i=parseInt(e[e.length-1],10);return!isNaN(i)&&k.now()>i}static nE(t){return t[t.length-1].length===Sw}}return s})(),ww=(()=>{class s extends xh{constructor(t,e,i){super(t),this.configuration=t,this.Yo=e,this.w=i,this.MI=M.RECORDING_GLOBAL_SAMPLING}refreshQuota(t){this.aE=t,this.Xo=void 0,this.DI()}init(t){this.kI();let e=wt.get(he);if(e!==null&&Ho(e)){let i=sg(e);t(this.canCollect(i),i==null?void 0:i.collectState)}else this.refreshQuota(i=>{t(i!==M.QUOTA_REACHED,i)})}sanitizeSessionCollectState(t){return t}canCollect(t){return t!==null&&t.collectState!==M.QUOTA_REACHED}computeInitialCollectState(t){return this.Xo?(this.w.emitCollectStateChange(this.Xo,this.configuration.malkaEtrEnabled?oe.ETR_ON:oe.ETR_OFF),this.Xo):(B.warn("Quota file error computeInitialCollectState() called before quota answered"),M.QUOTA_REACHED)}getEligibleCollectState(t){return t.collectState===M.QUOTA_REACHED?M.QUOTA_REACHED:!ki.isRecordingSupported()&&this.isReplayRecorded(t)?M.ANALYTICS_ONLY:t.collectState===M.RECORDING_RULES_TARGETING?M.RECORDING_RULES_TARGETING:t.collectState===M.ANALYTICS_ONLY_RULES_TARGETING?M.ANALYTICS_ONLY_RULES_TARGETING:t.collectState===M.ANALYTICS_ONLY_RECORDING_PENDING_RULES_TARGETING?M.ANALYTICS_ONLY_RECORDING_PENDING_RULES_TARGETING:t.collectState===M.RECORDING_GLOBAL_SAMPLING?M.RECORDING_GLOBAL_SAMPLING:M.ANALYTICS_ONLY}isReplayRecorded(t){return t.collectState===M.RECORDING_GLOBAL_SAMPLING||t.collectState===M.RECORDING_RULES_TARGETING}getInitialCollectState(){return this.Xo||M.QUOTA_REACHED}computeInitialCollectStateFromRecordingConsentGranted(t){return M.ANALYTICS_ONLY}Ko(t){this.Xo=t,this.aE&&this.aE(t)}kI(){this.Yo.onError(t=>this.quotaServiceErrorHandler(`HTTP:${t.status} - fetching quota file for pid: ${this.configuration.projectId}`)),this.Yo.onTimeout(()=>this.quotaServiceErrorHandler("timeout")),this.Yo.onLoad(t=>this.quotaFileHandler(t))}DI(){this.Yo.isInProgress()||this.Yo.send()}quotaFileHandler(t){var e;if(!(!((e=t==null?void 0:t.quotas)===null||e===void 0)&&e.length)){this.quotaServiceErrorHandler("Quota types missing from config file");return}this.xI(t)}quotaServiceErrorHandler(t){let e=`Quota error - ${t}`;B.warn(e),this.Ko(this.MI)}xI(t){let e=!1,i=!1;for(let n of t.quotas)n.quotaType==="ANALYTICS"&&n.value?e=!0:n.quotaType==="RECORDING"&&n.value&&Ns.boolean(Math.round(n.value*100))&&(i=!0);!e&&i?this.quotaServiceErrorHandler(`Quota types impossible: replay without analytics - ${csJSON.stringify(t)}`):e&&i?ki.isRecordingSupported()?this.Ko(M.RECORDING_GLOBAL_SAMPLING):this.Ko(M.ANALYTICS_ONLY):e&&!i?this.Ko(M.ANALYTICS_ONLY):this.Ko(M.QUOTA_REACHED)}getRecordingConsentWithdrawn(){return M.ANALYTICS_ONLY}}return F([N("Quota File: quotaFileHandler")],s.prototype,"quotaFileHandler",null),F([N("Quota File: onerror")],s.prototype,"quotaServiceErrorHandler",null),s})();var Aw=(()=>{class s{constructor(t,e,i,n,o){this.N=t,this.R=e,this.ws=i,this.bt=n,this.E=o}get(){return{exclusion:this.ws.getAppliedTrackingDraw(),visitor:this.N.getVisitor(),session:this.R.getSession(),cvars:this.bt.getCustomVariablesSession()}}apply(t){t&&(t.exclusion?this.exclude():this.include(t))}exclude(){this.ws.exclude(this.E),this.N.removeVisitor(),this.R.removeSession(),this.bt.removeCustomVariablesSession()}include(t){this.ws.removeExclusion(),this.N.setVisitor(t.visitor),t.session?this.R.setSession(t.session):this.R.removeSession(),t.cvars?this.bt.setCustomVariableSession(t.cvars):this.bt.removeCustomVariablesSession()}}return s})();var ca=60*1e3,Tw=60*ca,bw=4*Tw-ca,Ws=(()=>{let s;return function(r){r[r.NO=0]="NO",r[r.WITHDRAWN=1]="WITHDRAWN",r[r.GRANTED=2]="GRANTED"}(s||(s={})),s})(),Rw=(()=>{class s{constructor(t,e,i,n,o){this.be=t,this.Ct=e,this.w=i,this.BI=n,this.FI=o,this.Jo=null,this.Pd=0,this.Qo=Ws.NO}setDynamicVariablesService(t){this.$I=t}createOrUpdateSession(){this.Od(),this.zI=k.now(),this.Pd=0;let t=this.hE();t===null?(t=this.GI(),this.Vc(t),this.w.emitSessionCreated()):(t=this.Ct.sanitizeSessionCollectState(t),this.qI(t),t.collectState=this.Ct.getEligibleCollectState(t)),this.setSession(t)}grantReplayRecording(t){t.collectState=this.Ct.getInitialCollectState(),t.collectState=this.Ct.computeInitialCollectStateFromRecordingConsentGranted(t),this.setSession(t)}grantReplayRecordingBeforeSessionStart(){this.Qo=Ws.GRANTED}withdrawnReplayRecording(t){t.collectState=this.Ct.getRecordingConsentWithdrawn(),this.setSession(t)}withdrawnReplayRecordingBeforeSessionStart(){this.Qo=Ws.WITHDRAWN}Vc(t){this.Qo===Ws.WITHDRAWN?(t.collectState=this.Ct.getRecordingConsentWithdrawn(),this.setSession(t)):this.Qo===Ws.GRANTED?t.collectState=this.Ct.computeInitialCollectStateFromRecordingConsentGranted(t):t.collectState=this.Ct.computeInitialCollectState(t),this.Qo=Ws.NO}GI(){return{pageNumber:1,collectState:this.Ct.getInitialCollectState(),replayConsent:this.BI?Kn.NOT_EXPRESSED:Kn.UNNECESSARY,etrStatus:Qt.ETR_NOT_SAVED_SESSION}}qI(t){t.pageNumber+=1}isReplayRecorded(){let t=this.getSession();return!!t&&this.Ct.isReplayRecorded(t)}isTemporarilyRecorded(){let t=this.getSession();return(t==null?void 0:t.collectState)===M.RECORDING_TEMPORARILY}getRequestParameters(){let t={},e=this.getSession();return e!==null&&(t.pn=`${e.pageNumber}`),t}getSession(){return this.be.get()}hE(){return this.be.get(!0)}doesSessionExist(){return this.be.get()!==null}setSession(t){this.be.set(t),this.w.emitSessionRefreshed()}refreshSession(){let t=this.hE();t&&this.setSession(t)}removeSession(){this.be.remove(),this.w.emitSessionRemoved()}getRecordingTypes(){let t=this.getSession(),e=this.WI(t);return this.YI(e)}YI(t){let e=[];return csArray.prototype.forEach.call(t,i=>{if(Nl(i)){let n=tg[i]||i;csArray.prototype.push.call(e,n)}}),e}WI(t){let e=[];return(t==null?void 0:t.collectState)!==void 0&&(csArray.prototype.push.call(e,t.collectState),this.FI&&csArray.prototype.push.call(e,M.RECORDING_ETR_SAMPLING)),e}updateCollectState(t){let e=this.getSession();e!==null&&(e.collectState=t,this.setSession(e))}hasValidSession(){let t=this.be.getRawSession();return this.be.isValid(t)}handleSubdomainChange(){this.be.handleSubdomainChange()}pollCacheRefreshEvent(t=!0){let e=this.be.isCacheRefreshed();return e&&t&&this.be.resetCacheRefreshed(),e}extendSessionPeriodically(){this.Jo||this.uE()}extendSession(){let t=this.getSession();return t===null?(B.warn("extendSession is trying to extend an expired session"),this.Od(),!1):(this.setSession(t),!0)}uE(){if(this.XI()){this.Od();return}this.extendSession()&&(this.KI(),this.JI())}JI(){this.Jo=window.csSetTimeout(()=>{this.uE()},_o-ca)}XI(){return bw-(k.now()+_o-this.zI)<0}Od(){this.Jo&&(window.csClearTimeout(this.Jo),this.Jo=null)}KI(){this.Pd+=1,this.$I.trackDynamicVariable("session_expiry_update",this.Pd)}}return s})();var Cw=(()=>{class s{constructor(t,e,i){this.N=t,this.R=e,this.sP=i}handle(){this.N.hasAllowSubdomainsChanged()&&(this.N.handleSubdomainChange(),this.R.handleSubdomainChange(),this.sP.handleSubdomainChange())}}return s})(),Un="_cs_inc",Iw=(()=>{class s{constructor(t,e){this.xt=t,this.M=e}isForceIncluded(){return this.iP()||this.rP()}isForceReplayRecorded(){return this.nP(M.RECORDING_GLOBAL_SAMPLING)}iP(){return this.M.get(Un)!==null}nP(t){return this.M.get(Un)===t}rP(){return csString.prototype.indexOf.call(this.xt.href,Un)>0}}return s})(),Pw=(()=>{class s{constructor(t,e,i){this.E=t,this.N=e,this.ws=i}clear(){this.oP()&&(this.dE=this.N.getVisitor(),this.N.removeVisitor()),this.aP()&&this.ws.removeExclusion()}oP(){return this.N.doesVisitorExist()&&this.N.getVisitor().appliedTrackingDraw!==this.E.lastTrackingDraw}aP(){return this.ws.getAppliedTrackingDraw()!==this.E.lastTrackingDraw}restoreClearedVisitor(){this.dE&&this.N.setVisitor(this.dE)}}return s})(),Ow=(()=>{class s{constructor(t,e,i,n,o,c,l,h){this.E=t,this.N=e,this.ws=i,this.fE=n,this.cP=o,this.lP=c,this.hP=l,this.Ad=h}compute(t){var e,i;this.E.crossDomainTracking&&!this.E.cookielessTrackingEnabled?this.E.crossDomainSingleIframeTracking?(e=this.hP)===null||e===void 0||e.start(()=>this.Dd(t)):(i=this.lP)===null||i===void 0||i.applyUpToDate(()=>this.Dd(t)):this.Dd(t)}Dd(t){this.cP.handle(),this.fE.clear(),this.uP()?(this.fE.restoreClearedVisitor(),t(!0)):(this.ws.exclude(this.E),t(!1))}uP(){let t=Ns.boolean(this.E.sampleRate);return this.Ad.isForceIncluded()||!this.ws.isExcluded()&&this.N.doesVisitorExist()||!this.ws.isExcluded()&&t}}return s})(),Nw=(()=>{class s{constructor(t,e,i,n){this.E=t,this.ft=e,this.w=i,this.R=n,this.dP=10*1e3}createOrUpdateVisitor(){var t;let e=this.getVisitor();e===null&&(e=this.fP(),(t=this.R)===null||t===void 0||t.removeSession()),this.pP(e),this.setVisitor(e)}fP(){return{id:A_.generate(),visitsCount:0,appliedTrackingDraw:this.E.lastTrackingDraw,creationTimestamp:Na(),lastVisitTimestamp:0,hitTimestamp:0,expires:k.now()+this.E.visitorCookieTimeout,allowSubdomains:this.E.allowSubdomains,identityPrint:null}}pP(t){let e=Na();this.R&&!this.R.doesSessionExist()&&(t.visitsCount+=1,t.lastVisitTimestamp=e),t.hitTimestamp=e,t.appliedTrackingDraw=this.E.lastTrackingDraw,this.pE=t.visitsCount}getRequestParameters(){let t=this.getVisitor();return t?{uu:t.id,sn:`${t.visitsCount}`,hd:`${t.hitTimestamp}`}:{}}getVisitor(){return this.ft.get()}setVisitor(t){this.ft.set(t)}doesVisitorExist(){return this.ft.get()!==null}resetVisitor(){this.gE(),this.w.emitAfterVisitorCleared()}removeVisitor(){this.ft.remove()}hasAllowSubdomainsChanged(){let t=this.getVisitor();return t?t.allowSubdomains!==this.E.allowSubdomains:!1}handleSubdomainChange(){this.ft.handleSubdomainChange()}isSessionRenewed(){let t=this.getVisitor();return t===null||this.pE===void 0?!1:t.visitsCount!==this.pE}gP(){return!Z(this.mE)||k.now()-this.mE>this.dP}renewVisitor(){this.gP()?(this.mE=k.now(),this.gE(),this.w.emitAfterVisitorRenewal()):B.warn("session:start:newVisitor is trying to renew visitor under time limit")}gE(){this.w.emitBeforeVisitorRenewal(),this.removeVisitor()}}return s})(),me="_cs_id",Mw=(()=>{class s{constructor(t,e,i){this.E=t,this.M=e,this.K=i}onCookieToSet(t){this.Ni=t}onCookieToRemove(t){this.Mi=t}get(){let t;return this.E.cookielessTrackingEnabled?t=this.K.getItem(me):t=this.M.get(me),t?(Xp(t)||B.warn(`Invalid visitor string: ${t}`),Wp(t)):null}set(t){var e;let i=Yp(t);if(this.E.cookielessTrackingEnabled)this.K.setItem(me,i);else{let n=new csDate(t.expires);this.M.set(me,i,n),(e=this.Ni)===null||e===void 0||e.call(this,me,i,n)}}remove(){var t;this.E.cookielessTrackingEnabled?this.K.removeItem(me):(this.M.delete(me),(t=this.Mi)===null||t===void 0||t.call(this,me))}handleSubdomainChange(){if(this.E.cookielessTrackingEnabled)return;let t=this.get();t&&(t.allowSubdomains=this.E.allowSubdomains,this.E.allowSubdomains?this.M.delete(me,Ur.CURRENT_DOMAIN):this.M.delete(me,this.M.getRootDomain()),this.set(t))}}return s})(),Dw=(()=>{class s{constructor(t,e,i,n,o,c){this.E=t,this.Oi=e,this.lr=i,this.O=n,this.w=o,this.K=c}initWithQuota(){if(!this.E.collectionEnabled){this.yE();return}let t=new n_(this.E.getSettingsFileUri(),"",{type:"json",cacheMinutes:15});this.Ct=new ww(this.E,t,this.w),this.Ct.init((e,i)=>{e?this.init():this.yE(),R_(i)&&(b_.set(aa.HJ_DUAL_COLLECT,!0),window.dispatchEvent(new CustomEvent(T_)))})}mP(){this.O.schedule(()=>{var t;this.D=new oi,this.Z=new mp(this.D),this.C=new I_(window.location,this.Z),this.M=new Ur(this.E,this.C,this.Oi),this.M.init(),this.mt=new o_;let e;!((t=this.E.experimental)===null||t===void 0)&&t.checkPIIMigration&&(e=new kp,this.w.addListener(e)),this.S=new Vp([Lp.UXA],e),this.J=new Up,this.lt=new M_(e),this.It=new y_(this.E,new m_(this.E,this.M,this.mt),this.w)})}yE(){}init(){_i.isSupported()&&_i.setDigestSalt(this.E.projectId.toString());let t,e,i,n,o,c,l,h,d,p,y,m,v,b,C,_,T,x,O,w,H,$,tt,It,Gt,ee,S,V,U;this.mP();let G=new YS;this.w.addListener(G),this.O.schedule(()=>{y=new Iw(window.location,this.M),new l_().init(),m=Oh.create(),p=new Nh(m),this.Ct===void 0&&(this.Ct=new vw(this.E,this.w,y,this.C,new Vo),this.Ct.init())}),this.O.schedule(()=>{t=new _w(this.E,this.M,this.K),e=new Rw(t,this.Ct,this.w,this.E.replayConsentRequiredForSession,this.E.malkaEtrEnabled),i=new Mw(this.E,this.M,this.K),n=new Nw(this.E,i,this.w,e),this.lr.setContext(n,e)}),this.O.schedule(()=>{c=new Cw(n,e,this.It),l=new rg(this.E,this.M,this.K),h=new cg(window.location,l),d=new ag(h),C=new Pw(this.E,n,h),Gt=new Gp(ls,this.E);let mt;w=new Cp(Gt,this.E.isChild,mt),H=new Ip(Gt),$=new Pp(Gt),tt=new Np,It=new Rp(w,H,$,tt),_=new xp(this.S,It),T=new ug(this.C),x=new lg(T,this.S);let Mt=new ng(this.E,this.M,this.K);ee=new v_(this.D,Mt),O=new dm(this.S,ee);let be=new Aw(n,e,h,ee,this.E)}),this.O.schedule(()=>{let mt=new Ow(this.E,n,h,C,c,v,o,y);this.E.implementations&&(S=new FS(this.E.implementations,this.S,this.O),S.init(),this.w.addListener(S)),mt.compute(Mt=>{this.O.schedule(()=>{var be,ms,js,Hs;_.init();let Ue=new g_(this.E,this.S,this.It,e,this.w),je=new GS(this.E,this.M,this.mt),ce=new qS(this.w,window.location,je),Dt=new zS(this.S,ce),se=new P_(this.S,this.E),Gi=new C_(this.Z,new hw),Gr=new x_(e,n),qr,qi,Wr,Wi=new Yc(this.E,n,e,b),Yi=new Yc(this.E,n,e,b,qi);Mt?(this.w.emitInitTracking(),new Ew(Wi,Yi,m,n,e,Gr,Gi,this.w,this.S,_,this.E,Dt,ce,Ue,this.It,this.D,Gt,this.Z,this.C,se,this.J,It,ee,O,T,x,this.O,p,this.M,this.mt,this.K,this.Ct,this.lt,Wr,qr,V,U).start()):new og(this.w,this.S,_,Dt,ce,d,Ue).start()})})})}}return s})(),Rs=(()=>{let s;return function(r){let t="{domain}/tag/tag.bundle.js?v={version}",e,i={loadBundle(T){let x=T.source,O=T.data;if(c(O)){let w=()=>{let H=n(t,O);y(H,()=>x.postMessage("csBundleLoaded",T.origin))};e=O.token,_(i.loadBundle),l(T.origin)&&w()}}};function n(T,x){return csString.prototype.replace.call(csString.prototype.replace.call(csString.prototype.replace.call(T,"{version}",x.version),"{token}",x.token),"{domain}",x.domain)}function o(){return e}r.getToken=o;function c(T){return T&&T.type==="csBundleInjection"&&l(T.domain)&&d(T.version)&&h(T.token)}r.isAuthorizedIncomingMessage=c,r.hjDomainRegex=/^https?:\/\/[a-zA-Z0-9\.\-]+\.hotjar\.com$/;function l(T){return/^https?:\/\/[a-zA-Z0-9\.\-]+\.(content-square\.fr|contentsquare\.com|csq\.io)$/.test(T)||r.hjDomainRegex.test(T)}r.isAuthorizedDomain=l;function h(T){return/^[a-zA-Z0-9]+$/.test(T)}r.isAuthorizedToken=h;function d(T){return/^[a-zA-Z0-9\.]+$/.test(T)}r.isAuthorizedTagVersion=d;function p(){let T=window.opener||window.parent;return window!==T&&window.addEventListener}r.isActivable=p;function y(T,x){let O=document.createElement("script");O.type="text/javascript",O.async=!0,O.src=T,O.onload=x,O.charset="utf-8",document.head.appendChild(O)}r.addScript=y;function m(T){let x=document.createElement("link");x.rel="stylesheet",x.href=T,document.head.appendChild(x)}r.addStyle=m;function v(T){return`${T}?cb=${new csDate().getTime()}`}r.addCacheBusting=v;function b(){C(i.loadBundle)}r.waitForBundleInjection=b;function C(T){window.addEventListener("message",T,!1)}r.listen=C;function _(T){window.removeEventListener("message",T,!1)}r.removeListener=_}(s||(s={})),s})(),Xc="_hp_ved",kw=18e5,xw="/js/ved.js",Lw="/css/ved.css",Vw="/js/ved.css",Uw=(()=>{let s;return function(r){r.StatusUpdate="status"}(s||(s={})),s})(),jw=(()=>{let s;return function(r){r.ReceivedInitMessage="received_init_message"}(s||(s={})),s})();var jn=(()=>{let s;return function(r){let t=!1,e;function i(y){return e+y}function n(){let y=[i(Lw),i(Vw)];csArray.prototype.forEach.call(y,m=>{Rs.addStyle(m)})}function o(y){let m=new csRegExp("(^|;)[ ]*"+y+"=([^;]*)"),v=m.exec(document.cookie);return v?decodeURIComponent(v[2]):null}function c(y,m,v){let b=encodeURIComponent(y)+"="+encodeURIComponent(m),C=new csDate;C.setTime(C.getTime()+v);let _=b+"; expires="+C.toUTCString()+"; path=/";document.cookie=_}function l(){c(Xc,"on",kw)}function h(){return o(Xc)==="on"}r.isVLCookieEnabled=h;function d(y){window.heapV=Object.assign({},window.heap,{source:y==null?void 0:y.source,uri:e,loadArgs:y==null?void 0:y.data.args,identify:()=>{},track:()=>{}})}r.initializeHeapV=d;function p(y,m){var v;if(e=y,m){let b={type:Uw.StatusUpdate,value:jw.ReceivedInitMessage},C={targetOrigin:m==null?void 0:m.origin};(v=m==null?void 0:m.source)===null||v===void 0||v.postMessage(b,C)}t||(t=!0,l(),d(m),window.heapV&&(Rs.addScript(i(xw)),n()))}r.init=p}(s||(s={})),s})(),Hw=(()=>{let s;return function(r){let t=window.opener||window.parent,e="tag",i="https://app.contentsquare.com",n=[/^https:\/\/app\.contentsquare\.com$/,/^https:\/\/dev-app\.contentsquare\.com$/,/^https:\/\/staging-app\.contentsquare\.com$/,/^https:\/\/.*\.test\.contentsquare\.com$/,/^https:\/\/app\.[a-z0-9-]+\.csiab\.[a-z0-9-]+\.csq\.io$/,Rs.hjDomainRegex],o,c,l,h={initHeapVisualLabeler(w){var H;w.origin===l&&((H=w.data)===null||H===void 0?void 0:H.message)==="init"&&w.source&&(jn.init(l,w),T(h.initHeapVisualLabeler))},ping(w){typeof w.data=="string"&&w.data==="ping"&&y(w.origin)&&(c=w.origin,o=Rs.hjDomainRegex.test(w.origin)?i:w.origin,T(h.ping),_(h.insertMessageScript),m(Rs.addCacheBusting("utils.js")))},insertMessageScript:x(w=>{typeof w.data=="string"&&w.data!=="ping"&&(T(h.insertMessageScript),m(w.data))})};function d(){return Rs.getToken()}r.getToken=d;function p(){return window!==t&&window.addEventListener}r.isActivable=p;function y(w){return csArray.prototype.some.call(n,H=>H.test(w))}r.isAuthorizedDomain=y;function m(w,H){let $=document.createElement("script");$.type="text/javascript",$.async=!0;let tt=o==null?void 0:csString.prototype.replace.call(o,/^https?:/,"");$.src=`${tt}/${e}/${w}`,$.onload=H,$.charset="utf-8",document.getElementsByTagName("head")[0].appendChild($),v(w)}function v(w){csString.prototype.includes.call(w,"&mode=")&&sessionStorage.setItem("_hjRetakerMode",csString.prototype.split.call(w,"&mode=")[1])}function b(){_(h.ping),Rs.waitForBundleInjection()}r.waitForConnection=b;function C(w){l=w,_(h.initHeapVisualLabeler),jn.isVLCookieEnabled()&&jn.init(l)}r.waitForHeapVisualLabeler=C;function _(w){window.addEventListener("message",w,!1)}r.listen=_;function T(w){window.removeEventListener("message",w,!1)}r.removeListener=T;function x(w){return function(H){H.origin===c&&w(H)}}r.secureListener=x;function O(w){c&&t.postMessage(w,c)}r.post=O}(s||(s={})),s})();var vr=window.CSFrameCommunication||Hw,Bw=(()=>{class s extends Uo{constructor(t){super(),this.O=t;{let e=(i,n)=>{if(typeof n!="string"||!csString.prototype.startsWith.call(n,"on"))return;let o=csString.prototype.substring.call(n,2);return(...c)=>{n==="onInitialDomDone"&&(c=[]),document.dispatchEvent(new CustomEvent("cs-e2e-event",{detail:{type:"lifecycle",name:o,data:c}}))}};this.addListener(new Proxy({},{get:e}))}}emitBeforeNaturalPageView(t){for(let e of this.listeners)e.onBeforeNaturalPageView&&e.onBeforeNaturalPageView(t)}emitAfterNaturalPageView(t){for(let e of this.listeners)e.onAfterNaturalPageView&&e.onAfterNaturalPageView(t)}emitInitTracking(){for(let t of this.listeners)t.onInitTracking&&t.onInitTracking()}emitStartTracking(t){for(let e of this.listeners)e.onStartTracking&&this.O.schedule(()=>e.onStartTracking(t))}emitStartNoTrackingMode(){for(let t of this.listeners)t.onStartNoTrackingMode&&this.O.schedule(()=>t.onStartNoTrackingMode())}emitArtificialPageViewEnd(t=!1){for(let e of this.listeners)if(e.onArtificialPageViewEnd)try{e.onArtificialPageViewEnd(t)}catch(i){B.error(i)}}emitBeforeArtificialPageView(t,e){for(let i of this.listeners)i.onBeforeArtificialPageView&&i.onBeforeArtificialPageView(t,e)}emitAfterArtificialPageView(t=!1){for(let e of this.listeners)e.onAfterArtificialPageView&&e.onAfterArtificialPageView(t)}emitBeforeSessionRenewal(){for(let t of this.listeners)t.onBeforeSessionRenewal&&t.onBeforeSessionRenewal()}emitAfterSessionRenewal(){for(let t of this.listeners)t.onAfterSessionRenewal&&t.onAfterSessionRenewal()}emitOptout(){for(let t of this.listeners)t.onOptout&&t.onOptout()}emitReplayUnanonymizationConsentGranted(){for(let t of this.listeners)t.onReplayUnanonymizationConsentGranted&&t.onReplayUnanonymizationConsentGranted()}emitReplayUnanonymizationConsentWithdrawn(){for(let t of this.listeners)t.onReplayUnanonymizationConsentWithdrawn&&t.onReplayUnanonymizationConsentWithdrawn()}emitAfterReplayRecordingConsentGranted(){for(let t of this.listeners)t.onAfterReplayRecordingConsentGranted&&t.onAfterReplayRecordingConsentGranted()}emitAfterReplayRecordingConsentWithdrawn(){for(let t of this.listeners)t.onAfterReplayRecordingConsentWithdrawn&&t.onAfterReplayRecordingConsentWithdrawn()}emitCollectStateChange(t,e){for(let i of this.listeners)i.onCollectStateChange&&i.onCollectStateChange(t,e)}emitInitialDomStart(){for(let t of this.listeners)t.onInitialDomStart&&t.onInitialDomStart()}emitInitialDomDone(t){for(let e of this.listeners)e.onInitialDomDone&&e.onInitialDomDone(t)}emitRecordingContextChange(){for(let t of this.listeners)t.onRecordingContextChange&&t.onRecordingContextChange()}emitSensitiveStatusChange(){var t;for(let e of this.listeners)(t=e.onSensitiveStatusChange)===null||t===void 0||t.call(e)}emitBeforeVisitorRenewal(){for(let t of this.listeners)t.onBeforeVisitorRenewal&&t.onBeforeVisitorRenewal()}emitAfterVisitorCleared(){for(let t of this.listeners)t.onAfterVisitorCleared&&t.onAfterVisitorCleared()}emitAfterVisitorRenewal(){for(let t of this.listeners)t.onAfterVisitorRenewal&&t.onAfterVisitorRenewal()}emitSessionCreated(){for(let t of this.listeners)t.onSessionCreated&&t.onSessionCreated()}emitSessionRemoved(){for(let t of this.listeners)t.onSessionRemoved&&t.onSessionRemoved()}emitSessionRefreshed(){for(let t of this.listeners)t.onSessionRefreshed&&t.onSessionRefreshed()}emitTargetingRulesMatched(){for(let t of this.listeners)t.onTargetingRulesMatched&&t.onTargetingRulesMatched()}}return F([Nt("emitStartTracking")],s.prototype,"emitStartTracking",null),s})();var Kc="cs_verify_install_auto",Jc="cs_verify_install",Fw="hjVerifyInstall",$w="hjVerifyUUID",zw=(()=>{class s{constructor(t,e){this.E=t,this.K=e}verifyInstallation(){var t;let e=qf(),i=e[Fw]||"",n=e[$w]||"",o,c=0;try{o=this.K.getItem(Jc)}catch(l){}if(i||o){if(c=Number(i||o)||0,i)try{this.K.setItem(Jc,i)}catch(l){}if(((t=window.CSQ_TAGS)===null||t===void 0?void 0:t.length)>1){this.pO(c,n);return}this.gO(c,n)}}verifyInstallationAuto(){if(this.E.trackingCodeVerified)return;let t=null;try{t=this.K.getItem(Kc)}catch(i){}let e=`${this.E.projectId}`;if(!t||t!==e){let i=new So({endpoint:this.mO(),contentType:"application/json"});i.send({}),i.onLoad(()=>{this.K.setItem(Kc,e)}),i.onError(n=>{B.error(`Failed to report verification results: ${n}`,"verifyInstallationAuto")})}}mO(){return`${this.E.getVerificationEndpoint()}/v2/projects/${this.E.projectId}/verify-installation/auto`}yO(t){return`${this.E.getVerificationEndpoint()}/v1/verification/${t}/result`}DE(t,e){this.un({title:"Contentsquare installation invalid",message:"The tracking code you are trying to verify does not match the one installed on this page. Please make sure you install the correct tracking code provided for this site.",status:"bad"}),this.sa({verifyUUID:e,status:"wrong_code",detail:{expected:csString(t),actual:csString(this.E.projectId)}});let i=`Passed projectId: ${t} != Configured Site ${this.E.projectId}`;B.error(i,"verifyInstallation")}pO(t,e){let i=csArray.prototype.filter.call(window.CSQ_TAGS,function(h,d){return csArray.prototype.indexOf.call(window.CSQ_TAGS,h)===d}),n="You have "+window.CSQ_TAGS.length+" tracking scripts installed on your site. ",o=!!window.dataLayer,c;i.length>1?(c=n+"Please remove the duplicate scripts to prevent data collection issues.",this.un({title:"Multiple different Contentsquare scripts detected",message:c,status:"bad"}),this.sa({verifyUUID:e,status:"multiple_codes",detail:{expected:csString(t),actual:csArray.prototype.map.call(i,csString),gtm:!1}})):o?(c=n+"If you've installed Contentsquare through GTM - please remove the duplicate scripts to prevent data collection issues.",this.un({title:"Multiple Contentsquare scripts detected",message:c,status:"bad"}),this.sa({verifyUUID:e,status:"multiple_codes",detail:{expected:csString(t),actual:csArray.prototype.map.call(i,csString),gtm:!0}})):t===this.E.projectId?(c=n+"This will not affect data collection, but we do suggest removing redundant scripts.",this.un({title:"Multiple Contentsquare scripts detected",message:c,status:"warning"}),this.sa({verifyUUID:e,status:"warning",detail:{expected:csString(t),reason:"multiple scripts"}})):this.DE(t,e);let l="Passed Site ID: "+t+" contains multiple scripts "+csArray.prototype.join.call(window.CSQ_TAGS,", ");B.error(l,"verifyInstallation")}gO(t,e){if(t===this.E.projectId){let i=()=>this.un({title:"Contentsquare installation verified",message:"The Contentsquare tracking code has been properly installed on this page. Browse your site in this window if you wish to verify installation on any other pages.",status:"good"}),n=()=>this.un({title:"Error reporting verification results",message:"There was an error reporting the verification result. Please try again.",status:"bad"});this.sa({verifyUUID:e,status:"ok",onSuccess:i,onError:n})}else this.DE(t,e)}EO(t){switch(t){case"good":return"\u2705";case"bad":return"\u274C";case"warning":return"\u26A0\uFE0F";default:return"\u2139\uFE0F"}}un({title:t,message:e,status:i}){let o=`${this.EO(i)} ${t}

${e}`;window.alert(o)}sa({verifyUUID:t,detail:e,status:i,onSuccess:n,onError:o}){if(!t)return;let c=new So({endpoint:this.yO(t),contentType:"application/json"}),l=ct(j({},e&&{error_detail:e}),{status:i});c.send(l),c.onLoad(h=>{h.status<400?n&&n():o&&o()}),c.onError(h=>{B.error(`Failed to report verification results: ${h}`,"verifyInstallation"),o&&o()})}}return s})(),Gw=(()=>{class s{constructor(t,e,i){this.E=t,this.Tt=e,this.lr=i}start(){var t,e,i,n,o;if(window.CSQ_TAGS=csArray.prototype.concat.call(window.CSQ_TAGS||[],this.E.projectId),window.UXAnalytics)return;window.UXAnalytics={};let c=new E_;if(this.E.tagVerificationEnabled&&!this.Tt.isInWebViewContext()){let y=new zw(this.E,c);y.verifyInstallationAuto(),y.verifyInstallation()}let l=new Eh(!!(!((t=this.E.taskSchedulerOptions)===null||t===void 0)&&t.enabled),(e=this.E.taskSchedulerOptions)===null||e===void 0?void 0:e.maxProcessingTime,(i=this.E.taskSchedulerOptions)===null||i===void 0?void 0:i.waitDuration),h=new hp(this.Tt,this.E);h.init();let d=new dp(this.E,h);if(this.Tt.isTopWindowTracker()&&d.canTrack()){if(!((n=window.CSProtectnativeFunctionsLogs)===null||n===void 0)&&n.Warning&&B.warn(`protectNativeFunctions failed: ${window.CSProtectnativeFunctionsLogs.Warning}`),!((o=window.CSProtectnativeFunctionsLogs)===null||o===void 0)&&o.Critical){B.error(`protectNativeFunctions failed: ${window.CSProtectnativeFunctionsLogs.Critical}`);return}cp();let y=new Bw(l),m=new Dw(this.E,h,this.lr,l,y,c);this.E.isQuotaEnabled()?m.initWithQuota():m.init()}let p=csString.prototype.indexOf.call(window.location.href,"csDebug=1")>-1;window.UXAnalytics={Sensitive:{isNodeSensitive(y){return D.isMaskedElement(y)||D.isMaskedElementChild(y)},isAttributeSensitive(y,m){return D.isMaskedAttribute(y,m)},getSensitiveAttributes(y){return Rr(y.attributes,m=>D.isMaskedAttribute(y,m.name))}},Console:{warn(y){p&&console.warn("cs.tracking.warning",y)},error(y){p&&console.error("cs.tracking.error",y)}},Version:vl},window.CSFrameCommunication||(window.CSFrameCommunication=vr,vr.isActivable()&&vr.waitForConnection(),this.E.isCsCrosswritingHeap()&&vr.waitForHeapVisualLabeler(this.E.getHeapWebAppUri()))}}return F([Nt("main.start"),N("main.start")],s.prototype,"start",null),s})();function qw(){csSetTimeout(()=>{let s=0;typeof CompressionStream!="undefined"&&(s|=1),typeof TransformStream!="undefined"&&(s|=2),typeof performance!="undefined"&&typeof performance.now=="function"&&(s|=4),typeof Worker!="undefined"&&(s|=8),typeof scheduler!="undefined"&&(typeof scheduler.yield=="function"&&(s|=16),typeof scheduler.postTask=="function"&&(s|=32)),q.counters.availableFeatures.set(s)})}var Ww=(()=>{class s{constructor(t,e,i){this.X=t,this.D=e,this.vO=i,this.vt=[],this.SO=xo().v,qw()}flush(){this.vt.length!==0&&(this.X.send({m:csArray.prototype.map.call(this.vt,t=>({n:t.name,p:t.parameter,v:t.value})),p:this.D.anonymizePII(window.location.pathname),pid:this.vO,v:this.SO}),this.vt=[])}push(t){csArray.prototype.push.call(this.vt,...t),this.flush()}}return s.THROTTLE_INTERVAL=5e3,F([ji({wait:s.THROTTLE_INTERVAL,mode:"trailing"})],s.prototype,"flush",null),s})();function Yw(s,r){let t=s.validationRate/10,e=Ns.boolean(t);if((s.environment==="staging"||!1||e)&&!r.isInWebViewContext())try{let o=Oh.create(r.isTopWindowTracker()),l=new Nh(o).create(s.getMetricsUri()),h=new oi,d=new Ww(l,h,s.projectId);q.setService(d)}catch(o){B.warn(`Error initializing metrics: ${o.message}`)}}function Xw(){var s;_d();let r=new np(window.CS_CONF);window._uxa=window._uxa||[],r.processOptionOverrides(window._uxa);let t=new mf(window,r);t.init();let e=new _f;if(ad(B),pf(),B.computeIsActive(r.validationRate),t.isTopWindowTracker()){let n=new Bf(r,e);B.setStrategy(n)}else if(t.isInWebViewContext()){let n=new $f;B.setStrategy(n)}!((s=r==null?void 0:r.experimental)===null||s===void 0)&&s.disableMutationObserverProtection&&window.csMutationObserver&&(window.csMutationObserver=xs(window,"MutationObserver")),hf(),Yw(r,t),new Gw(r,t,e).start()}window.CSCurrentScript=document.currentScript;csSetTimeout(()=>{try{gf(Xw)}catch(s){}});})();

// signature-6c66a1d3bdfb2a5bf01873ef9ff01c7fc898135308108ae56f1cdda7f907c0d0